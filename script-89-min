///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Url site cliente
const urlSiteCliente = "https://dalpack-embalagens.lojaintegrada.com.br/";
const facebook = "https://www.facebook.com/#";
const instagram = "https://www.instagram.com/#";
const youtube = "https://www.instagram.com/#";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Numeracão das imagens do painel
const numPainel = "2256/2256296";
// --Setas
const urlSeta = `https://cdn.awsli.com.br/2256/2256296/arquivos/icons8-less-than-32.png`;

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Userback
const apiToken =
  "7603|72389|Y6HssROcsvzEmR0agSQPeVCAdY3nc7fuG1FB6RfgdmYw49BDQ4";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Logos
const logoClienteNegativa =
  "https://cdn.awsli.com.br/2161/2161378/arquivos/logo.png";
const logoLojaIntegrada =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/logo-footer-loja-integrada-desktop.svg";
const logoMentores =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/logo-footer-mentores-desktop.svg";
const logoCliente =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/Logo - Puro.png";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Links redes sociais
const linkClienteFacebook = "https://www.facebook.com/dalpackembalagens/";
const linkClienteInstagram = "https://www.instagram.com/dalpackembalagens/";
const linkClienteYoutube = "https://www.youtube.com/@DalpackEmbalagens";
const linkClienteTikTok = "https://www.tiktok.com/@dalpackembalagem";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Informações cliente
const telefoneCliente = "(11) 91789-9515";
const horarioFuncionamento = "Seg a Sex - das 7h às 17h";
const razaoSocial = "Dalpack Comercio Eletronico LTDA";
const cnpjEndereco =
  "CNPJ: 42.458.501/0001-66<br> Estrada Murilo de Almeida Passos, 980 - Galpão 5<br> - E-commerce Dalpack, Vila Industrial, <br>Bom Jesus dos Perdões, SP - 12955-000";
const descritivoNegocio =
  "A Dalpack é uma empresa que fabrica e vende embalagens. Em constante crescimento procura agora se alocar nos marketplaces e E-Commerce e vender ainda mais on-line!";
const descritivoInferior =
  "Dalpack Comercio Eletronico LTDA | CNPJ: 42.458.501/0001-66<br> Endereço: Estrada Murilo de Almeida Passos, 980 - Galpão 5 <br>E-commerce Dalpack, Vila Industrial, Bom Jesus dos Perdões, SP - 12955-000";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Bandeiras cartão
const bandeiraAmex =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-americanexpress.png";
const bandeiraDiners =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-diners.png";
const bandeiraElo =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-elo.png";
const andeiraHipercard =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-hipercard-pb.png";
const bandeiraMastercard =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-Mastercard.png";
const bandeiraVisa =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-visa.png";
const bandeiraBoleto =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-code.png";
const bandeiraDinheiro =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-money.png";
const bandeiraPix =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/pgto-pix-pb.png";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Selo compra segura
const seloCompraSegura =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/selo-comprasegura.svg";
const seloGoogle =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/selo-google-safe-browsing.svg";
const seloMercadolivre =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/selo-mercadolivre-novo.png";
const seloCorreios =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/selo-correios.svg";
const seloOpinioes =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/selo-opinioes-novo.png";
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Selos header checkout
const seloCompraSeguraCheckout =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/selo-comprasegura-checkout.svg";
const seloGoogleCheckout =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/selo-google-safe-browsing-checkout.svg";
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// --Navbar e Ícones
const iconeAtendimento = `https://cdn.awsli.com.br/${numPainel}/arquivos/chat.svg`;
const iconeFavoritos = `https://cdn.awsli.com.br/${numPainel}/arquivos/heart.svg`;
const iconeMinhaConta = `https://cdn.awsli.com.br/${numPainel}/arquivos/user.svg`;
const iconeCarrinho = `https://cdn.awsli.com.br/${numPainel}/arquivos/icon-carrinho.svg`;
const iconeSanduiche =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/button-menu.svg";
const iconeBuscar = `https://cdn.awsli.com.br/${numPainel}/arquivos/icon-search.svg`;
const textoSearchBar = "Faça sua pesquisa aqui_";
const iconePlayVideo =
  "https://cdn.awsli.com.br/1595/1595002/arquivos/button-play.png";
const iconeLogout =
  "https://cdn.awsli.com.br/1595/1595002/arquivos/icon-exit.svg";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// --Slogan
const iconeSlogan = "";
// const mensagemSlogan = "Super promoção de Lançamento Clique aqui e confira";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////// Colocar codigo no painel com o nome - midBanners-Configs ///////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Banner Destaques Desktop
// const bannerDestaqueUm = `https://cdn.awsli.com.br/2256/2256296/arquivos/mid-banner-1-desktop.png`;
// const bannerDestaqueDois = `https://cdn.awsli.com.br/2256/2256296/arquivos/mid-banner-2-desktop.png`;
// const bannerDestaqueTres = `https://cdn.awsli.com.br/2256/2256296/arquivos/mid-banner-3-desktop.png`;
// const bannerDestaqueQuatro = `https://cdn.awsli.com.br/2256/2256296/arquivos/mid-banner-4-desktop.png`;

// const titleElementoUm = "";
// const titleElementoDois = "";
// const titleElementoTres = "";
// const titleElementoQuatro = "";
// const textoBtnElementoUm = "";
// const textoBtnElementoDois = "";
// const textoBtnElementoTres = "";
// const textoBtnElementoQuatro = "";
// const linkBtnElementoUm = "/supermercado-padaria/papel-acoplado";
// const linkBtnElementoDois = "/sacos-para-talher";
// const linkBtnElementoTres = "/saco-kraft-pao-nosso";
// const linkBtnElementoQuatro = "/sacolas-kraft-sos";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Secao SaibaMais
const h2SecaoSaibaMais = "Nós somos a Dalpack";
const paragrafoSecaoSaibaMais =
  "A Dalpack é uma empresa que fabrica e vende embalagens. Em constante crescimento procura agora se alocar nos marketplaces e E-Commerce e vender ainda mais on-line! Por ser uma empresa fabricante conta com alguns dos melhores preços em seus produtos e com qualidade impecável. Além do site próprio, já somos sucesso em outros markeplaces, como, Americanas, Magazine Luiza, Mercado Livre, Shopee, entre outros, possibilitando as melhores possibilidades de compra e entrega para nossos clientes.";
const textoBotaoSaibaMais = "Saiba mais";
const imagemSecaoSaibaMais = `https://cdn.awsli.com.br/${numPainel}/arquivos/imagem-about-desktop.png`;

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Secao Stripe Banners https://cdn.awsli.com.br/2256/2256296/arquivos/Icon feather-package.svg
const urlIconeUmStripe = `https://cdn.awsli.com.br/${numPainel}/arquivos/Icon feather-package.svg`;
const paragrafoUmStripe = "Produtos a";
const strongUmStripe = "pronta entrega";
//
const urlIconeDoisStripe = `https://cdn.awsli.com.br/${numPainel}/arquivos/Icon metro-star-empty.svg`;
const paragrafoDoisStripe = "Personalização";
const strongDoisStripe = "da embalagem";
//
const urlIconeTresStripe = `https://cdn.awsli.com.br/${numPainel}/arquivos/icon-destaque-03-desktop.svg`;
const paragrafoTresStripe = "Envio para";
const strongTresStripe = "todo o Brasil";
//
const urlIconeQuatroStripe = `https://cdn.awsli.com.br/${numPainel}/arquivos/icon-vantagem-4.svg`;
const paragrafoQuatroStripe = "Certificado SSL";
const strongQuatroStripe = "100% seguro";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////// Banner Destaque Inferior - Colocar essas variaveis no painel da loja integrada. Nome do arquivo bannerFooter-Configs/////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// const bannerDestaqueInferior = `https://cdn.awsli.com.br/${numPainel}/arquivos/banner-bottom-desktop.png`;
// const bannerDestaqueInferiorMobile = `https://cdn.awsli.com.br/${numPainel}/arquivos/banner-bottom-mobile@2x.png`;
// const textoBannerDestaqueInferior = "Conheça Disco Elysium;";
// const porcentBannerDestaqueInferior = "The Final Cut!";
// const ctaBannerDestaqueInferior = "Comprar agora";
// const linkBannerDestaqueInferior = "/oferta";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Página Login
const imagemDireita = "";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Página Cadastro
const botaoCadastrarEndereco = `[href='${urlSiteCliente}conta/endereco/criar']`;
const imagemAvatar =
  "https://cdn.awsli.com.br/2256/2256296/arquivos/avatar-cabecalho-user-desktop.png";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Página Quem-somos
const quemSomosBanner =
  "https://cdn.awsli.com.br/2161/2161378/arquivos/quem-somos.png";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Página Perguntas Frequentes
const perguntasFrequentesBanner =
  "https://cdn.awsli.com.br/2161/2161378/arquivos/perguntas-frequentes.png";

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Página Privacidade e Segurança
const segurancaEPrivacidadeBanner =
  "https://cdn.awsli.com.br/2161/2161378/arquivos/seguranc-a-e-privacidade.png";

// Verifica se tem a classe
function temClasse(selector, className) {
  return document.querySelector(selector).classList.contains(className);
}

// Imprime um item
function print(item) {
  console.log(item);
}

// Converte texto em HTML
const stringToHTML = (str) => {
  const parser = new DOMParser();
  const doc = parser.parseFromString(str, "text/html");
  return doc.body;
};

// Verifica páginas
function paginaProduto() {
  return temClasse("body", "pagina-produto");
}

function paginaConteudo() {
  return temClasse("body", "pagina-pagina");
}

function paginaInicial() {
  return temClasse("body", "pagina-inicial");
}

function paginaCadastro() {
  return temClasse("body", "pagina-cadastro");
}

function paginaInstitucional() {
  return temClasse("body", "pagina-pagina");
}

function paginaCategoria() {
  return temClasse("body", "pagina-categoria");
}

function paginaBusca() {
  return temClasse("body", "pagina-busca");
}

function paginaLogin() {
  return temClasse("body", "pagina-login");
}

function paginaCarrinho() {
  return (
    temClasse("body", "pagina-carrinho") &&
    !temClasse("body", "carrinho-checkout")
  );
}

function paginaCheckout() {
  return temClasse("body", "carrinho-checkout");
}

function isPaginasDaConta() {
  var temp = document.querySelector(
    ".pagina-conta, .pagina-pedido-listar, .pagina-favorito-listar, .pagina-pedido, .pagina-conta-endereco"
  );
  return !!temp;
}

function paginaConta() {
  return temClasse("body", "pagina-conta");
}

function paginaPedidoAberto() {
  return temClasse("body", "pagina-pedido");
}

function paginaMinhaConta() {
  return (
    temClasse("body", "pagina-conta") &&
    window.location.pathname == "/conta/index"
  );
}

function paginaEditarEndereco() {
  return (
    temClasse("body", "pagina-conta-endereco") &&
    window.location.pathname == "/conta/endereco/criar"
  );
}

function paginaEditarMinhaConta() {
  return (
    temClasse("body", "pagina-conta") &&
    window.location.pathname == "/conta/editar"
  );
}

function paginaAlterarSenha() {
  return (
    temClasse("body", "pagina-conta") &&
    window.location.pathname == "/conta/alterar_senha"
  );
}

function paginaPedidoListar() {
  return (
    temClasse("body", "pagina-pedido-listar") &&
    window.location.pathname == "/conta/pedido/listar"
  );
}

function paginaListaDesejos() {
  return (
    temClasse("body", "pagina-favorito-listar") &&
    window.location.pathname == "/conta/favorito/listar"
  );
}

function paginaAlterarSenha() {
  var alterarSenhaRegex = /alterar_senha/;

  return alterarSenhaRegex.test(window.location.href);
}

function paginaEditarMinhaConta() {
  var editarMinhaContaRegex = /conta\/editar/;
  return editarMinhaContaRegex.test(window.location.href);
}

// Termina funções de páginas

function removerTudo(selector) {
  document.querySelectorAll(selector).forEach((e) => e.remove());
}

function removaSeExistir(selector) {
  var item = document.querySelector(selector);

  if (!!item) {
    item.remove();
  }
}

function adicionaLinkOverlayMenu(titulo, link, classe) {
  var li = document.createElement("li");
  var a = document.createElement("a");

  if (classe !== undefined) {
    li.classList.add(classe);
  }

  a.href = link;
  a.innerHTML = titulo;

  li.append(a);

  document.querySelector("#overlay-menu >ul.nivel-um").append(li);
}

function contentLoaded(func) {
  if (document.readyState !== "loading") {
    func();
  } else {
    document.addEventListener("DOMContentLoaded", function () {
      "strict";
      func();
    });
  }
}

// Criar Swiper
function createSwiper(appendSelector, extraClass) {
  var swiper = document.createElement("div");
  swiper.classList.add("swiper");

  if (extraClass !== undefined) {
    swiper.classList.add(extraClass);
  }

  var wrapper = document.createElement("div");
  wrapper.classList.add("swiper-wrapper");
  swiper.append(wrapper);

  document.querySelector(appendSelector).append(swiper);

  return swiper;
}

// Adiciona SwiperSlide
function addSwiperSlideLPS(swiperSelector, imgSrc, title, link) {
  var swiper = document.querySelector(swiperSelector);
  var wrapper = swiper.querySelector(".swiper-wrapper");
  var slide = document.createElement("div");
  var a = document.createElement("a");

  var productImage = document.createElement("img");
  var arrow = document.createElement("img");
  var productTitle = document.createElement("h4");

  slide.classList.add("swiper-slide");
  productImage.classList.add("lps-product-img");
  arrow.classList.add("lps-arrow");
  productTitle.classList.add("lps-product-title");

  productImage.src = imgSrc;
  arrow.src = urlSeta;
  productTitle.innerHTML = title;
  a.href = link;

  a.append(productImage);
  a.append(arrow);
  a.append(productTitle);

  slide.append(a);

  wrapper.append(slide);
}

function addFullBannersLPS(linkDesktop, linkMobile) {
  var bannerDesktopLPS = document.createElement("img");
  var bannerMobileLPS = document.createElement("img");

  bannerDesktopLPS.classList.add("full-banner-desktop-lps");
  bannerMobileLPS.classList.add("full-banner-mobile-lps");

  bannerDesktopLPS.src = linkDesktop;
  bannerMobileLPS.src = linkMobile;

  document.querySelector("#corpo").prepend(bannerDesktopLPS);
  document.querySelector("#corpo").prepend(bannerMobileLPS);
}

// Adiciona botões de SWIPER
function setSwiperButtons(carousel) {
  var buttonNext = document.createElement("div");
  buttonNext.classList.add("swiper-button-next");

  var buttonPrev = document.createElement("div");
  buttonPrev.classList.add("swiper-button-prev");

  document
    .querySelector(carousel + "+.produtos-carrossel .swiper")
    .after(buttonNext);
  document
    .querySelector(
      carousel + "+.produtos-carrossel .swiper + .swiper-button-next"
    )
    .after(buttonPrev);
}

// Adiciona paginação no carrossel
function setPagination(carousel) {
  var pagination = document.createElement("div");
  pagination.classList.add("swiper-pagination");
  document
    .querySelector(carousel + "+.produtos-carrossel .swiper")
    .append(pagination);
}

function setCarouselLPS(title, appendSelector, extraClass) {
  var destination = document.querySelector(appendSelector);
  var h2 = document.createElement("h2");
  h2.classList.add("carousel-title");
  h2.innerHTML = title;

  destination.append(h2);

  var swiper = document.createElement("div");
  swiper.classList.add("swiper");

  if (extraClass !== undefined) {
    swiper.classList.add(extraClass);
  }

  var pagination = document.createElement("div");
  pagination.classList.add("swiper-pagination");
  swiper.append(pagination);

  swiper.classList.add("carousel-lps");

  var wrapper = document.createElement("div");
  wrapper.classList.add("swiper-wrapper");
  swiper.append(wrapper);

  destination.append(swiper);

  var buttonNext = document.createElement("div");
  buttonNext.classList.add("swiper-button-next");

  var buttonPrev = document.createElement("div");
  buttonPrev.classList.add("swiper-button-prev");

  swiper.append(buttonNext);
  swiper.append(buttonPrev);
}

function startSwiper(swiperSelector, slidesPerViewDesktop) {
  var swiper = document.querySelector(swiperSelector);

  new Swiper(swiper, {
    loop: false,
    slidesPerView: 2,
    spaceBetween: 10,
    breakpoints: {
      400: {
        slidesPerView: 2,
        spaceBetween: 5,
      },
      700: {
        slidesPerView: 3,
        spaceBetween: 5,
      },
      992: {
        slidesPerView: slidesPerViewDesktop,
        spaceBetween: 30,
      },
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
  });
}

function setCarousel(carousel) {
  var productCards = document.querySelectorAll(
    carousel + "+.produtos-carrossel li > div > ul > li"
  );

  var sw = createSwiper(carousel + "+.produtos-carrossel");

  for (var i = 0; i < productCards.length; i++) {
    var item = productCards[i];
    item.classList.add("swiper-slide");
    document
      .querySelector(carousel + "+.produtos-carrossel .swiper .swiper-wrapper")
      .append(item);
  }

  setSwiperButtons(carousel);

  setPagination(carousel);

  document.querySelector(carousel + "+.produtos-carrossel > li").remove();

  new Swiper(sw, {
    loop: false,
    slidesPerView: 1,
    spaceBetween: 10,
    breakpoints: {
      400: {
        slidesPerView: 1,
        spaceBetween: 5,
      },
      700: {
        slidesPerView: 2,
        spaceBetween: 5,
      },
      992: {
        slidesPerView: 4,
        spaceBetween: 30,
      },
    },
    navigation: {
      nextEl: sw.nextElementSibling,
      prevEl: sw.nextElementSibling.nextElementSibling,
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
  });
}

function miniBannersLPS(appendSelector, srcImg1, srcImg2, href1, href2) {
  var destination = document.querySelector(appendSelector);

  var title = "Escolha por ambiente";
  var h2 = document.createElement("h2");
  h2.classList.add("carousel-title");
  h2.innerHTML = title;

  destination.append(h2);

  var conteiner = document.createElement("div");

  conteiner.classList.add("minibanners-conteiner-lps");

  var a1 = document.createElement("a");
  var a2 = document.createElement("a");

  var image1 = document.createElement("img");
  var image2 = document.createElement("img");

  image1.src = srcImg1;
  image2.src = srcImg2;

  a1.append(image1);
  a2.append(image2);

  a1.href = href1;
  a2.href = href2;

  conteiner.append(a1);
  conteiner.append(a2);

  destination.append(conteiner);
}

function mudarTituloBotaoCompraCarrinho(titulo) {
  var botao = document.querySelector(
    ".pagina-carrinho .finalizar-compra .acao-editar .botao.principal.grande"
  );

  if (!!botao) {
    botao.innerHTML = "";
    botao.innerHTML = "<i class='icon-ok'></i>" + titulo;
  }
}

function insereCarrinhoBotaoCompraProduto() {
  var botao = document.querySelector(
    ".pagina-produto .principal .comprar .botao-comprar"
  );

  var tagIcone = document.createElement("i");
  tagIcone.id = "tagIconeComprar";
  tagIcone.classList.add("icone-carrinho-comprar");

  if (!!botao) {
    botao.prepend(tagIcone);
  } else {
    tagIcone.remove();
  }
}

function substituirSkuPorCodigo() {
  var skus = document.querySelectorAll(
    ".tabela-carrinho .produto-info ul li:first-child span strong"
  );

  for (var i = 0; i < skus.length; i++) {
    var skuHTML = skus[i].outerHTML;

    var parentSku = skus[i].parentElement;

    parentSku.innerHTML = "Código :" + skuHTML;
  }
}

function produtoIndisponivel() {
  return !!document.querySelector(".acoes-produto.indisponivel");
}

function adicionarClasseAoBody(classToAdd) {
  document.querySelector("body").classList.add(classToAdd);
}

function paginaQuemSomos() {
  if (paginaConteudo()) {
    var temp = document.querySelector("#quem-somos");
    return !!temp;
  } else {
    return false;
  }
}

function paginaSegurancaPrivacidade() {
  if (paginaConteudo()) {
    var temp = document.querySelector("#seguranca-e-privacidade");
    return !!temp;
  } else {
    return false;
  }
}

function paginaTermosDeUso() {
  if (paginaConteudo()) {
    var temp = document.querySelector("#termos-de-uso");
    return !!temp;
  } else {
    return false;
  }
}

function paginaFAQ() {
  if (paginaConteudo()) {
    var temp = document.querySelector("#faq");
    return !!temp;
  } else {
    return false;
  }
}

function paginaTrocasDevolucoes() {
  if (paginaConteudo()) {
    var temp = document.querySelector("#trocas-e-devolucoes");
    return !!temp;
  } else {
    return false;
  }
}

function createBanner(fullBanner, images, sectionBanner) {
  if (!!fullBanner) {
    const wrapper = fullBanner.querySelector(".swiper-wrapper");

    // Mount Slide Wrapper
    images.map((image) => {
      const slide = document.createElement("div");
      const img = document.createElement("img");

      sectionBanner.append(fullBanner);

      img.src = image.src;
      img.alt = image.alt;

      slide.classList.add("swiper-slide");
      slide.appendChild(img);

      // Create Title

      const divTitle = document.createElement("div");
      divTitle.classList.add("swiper-slide-text");
      const verMais = document.createElement("a");

      if (image.title) {
        const title = document.createElement("h2");
        title.classList.add("title");
        title.innerText = image.title.toString().split("||")[0].trim();

        divTitle.append(title);

        if (image.title.toString().split("||")[1]) {
          verMais.classList.add("swiper-slide-btn");
          verMais.href = image.link;
          verMais.innerText = image.title.toString().split("||")[1].trim();
          divTitle.appendChild(verMais);
        }

        slide.appendChild(divTitle);
      } else {
        const title = document.createElement("h2");
        title.classList.add("title");
        divTitle.append(title);
        slide.appendChild(divTitle);
      }

      if (image.link) {
        // Create Button
        const a = document.createElement("a");
        a.classList.add("btn-black");
        a.href = image.link;
        a.append(img);
        slide.append(a);
      }

      // Append
      wrapper.appendChild(slide);
    });

    // Swiper
    new Swiper(fullBanner, {
      loop: true,
      spaceBetween: 0,
      pagination: { el: fullBanner.querySelector(".swiper-pagination") },
      navigation: {
        nextEl: fullBanner.querySelector(".swiper-button-next"),
        prevEl: fullBanner.querySelector(".swiper-button-prev"),
      },
    });
  }
}

function posicionaFiltro() {
  var filtrosAplicados = document.querySelector(".m-filtros-aplicados");
  var tituloPaginaCategoria = document.querySelector("h1.titulo");
  var ordenarListagem = document.querySelector(".ordenar-listagem.topo");
  if (!!filtrosAplicados && !!tituloPaginaCategoria && !!ordenarListagem) {
    tituloPaginaCategoria.after(filtrosAplicados);
    filtrosAplicados.after(ordenarListagem);
  } else {
    removaSeExistir(".m-filtros-aplicados");
  }
}

function createFilterItem(filtro) {
  var nomeFiltro = filtro.innerHTML;

  var mFiltro = document.createElement("div");
  mFiltro.classList.add("m-filtro");

  var mFiltroDescricao = document.createElement("span");
  mFiltroDescricao.classList.add("m-filtro-descricao");

  var mFiltroRemove = document.createElement("a");
  mFiltroRemove.classList.add("m-filtro-remove");

  var paiFiltro = filtro.closest(".filtro");
  mFiltroRemove.href = paiFiltro.querySelector("a.limpar").href;

  var mIconRemove = document.createElement("i");
  mIconRemove.classList.add("icon-remove");

  mFiltroDescricao.innerHTML = nomeFiltro;
  mFiltro.append(mFiltroDescricao);

  mFiltroRemove.append(mIconRemove);
  mFiltro.append(mFiltroRemove);

  var filtrosAplicadosBoxItens = document.querySelector(
    ".m-filtros-aplicados .m-filtros-aplicados-box-itens"
  );

  if (!!filtrosAplicadosBoxItens) {
    filtrosAplicadosBoxItens.append(mFiltro);
  }
}

function removeTodosOsFilhos(seletor) {
  var itens = document.querySelectorAll(seletor + " > *");

  for (var i = 0; i < itens.length; i++) {
    itens[i].remove();
  }
}

function setHeaderCarrinhoCheckout() {
  removeTodosOsFilhos("#cabecalho");
  var headerCarrinhoCheckout = document.querySelector(
    ".header-carrinho-checkout"
  );

  if (!!headerCarrinhoCheckout) {
    document.querySelector("#cabecalho").append(headerCarrinhoCheckout);
  }
}

function getQuantidadePaginaCarrinho() {
  var quantidades = document.querySelectorAll("input[name='quantidade']");
  var total = 0;

  for (let i = 0; i < quantidades.length; i++) {
    total += parseInt(quantidades[i].value);
  }

  return total;
}

function getQuantidadePaginaCheckout() {
  // .conteiner-qtd > div

  var quantidades = document.querySelectorAll(".conteiner-qtd > div");
  var total = 0;

  for (let i = 0; i < quantidades.length; i++) {
    total += parseInt(quantidades[i].innerHTML);
  }

  return total;
}

function setTituloPaginaCheckout() {
  let novoTitulo = "Checkout";

  let titulo = document.querySelector("h1.titulo");
  let tituloSmall = titulo.querySelector("small").cloneNode(true);

  let qtde = getQuantidadePaginaCheckout();

  titulo.innerHTML =
    novoTitulo + " <span class='titulo-qtde-carrinho'>(" + qtde + ")</span>";

  titulo.append(tituloSmall);
}

function setTituloPaginaCarrinho() {
  let titulo = document.querySelector("h1.titulo");

  if (!!titulo) {
    let smallTitulo = titulo.querySelector("small").cloneNode(true);

    var qtde = getQuantidadePaginaCarrinho();

    titulo.innerHTML =
      "Carrinho <span class='titulo-qtde-carrinho'>(" + qtde + ")</span>";

    titulo.append(smallTitulo);
  }
}

function removeSubtotalPaginaCarrinho() {
  var subtotal = document.querySelector(".subtotal");

  if (!!subtotal) {
    var rowSubtotal = subtotal.closest("tr");

    if (!!rowSubtotal) {
      rowSubtotal.remove();
    }
  }
}

function addQtde(elem) {
  var value = parseInt(elem.previousElementSibling.value);

  value += 1;

  elem.previousElementSibling.value = value;

  var acoesProduto = elem.closest(".acoes-produto");

  var produtoId = acoesProduto.getAttribute("data-produto-id");

  acoesProduto.querySelector(".botao-comprar").href =
    window.location.origin +
    "/carrinho/produto/" +
    produtoId +
    "/adicionar/" +
    value;
}

function subQtde(elem) {
  var value = parseInt(elem.nextElementSibling.value);

  if (value != 1) {
    value -= 1;
    elem.nextElementSibling.value = value;

    var acoesProduto = elem.closest(".acoes-produto");

    var produtoId = acoesProduto.getAttribute("data-produto-id");

    acoesProduto.querySelector(".botao-comprar").href =
      window.location.origin +
      "/carrinho/produto/" +
      produtoId +
      "/adicionar/" +
      value;
  }
}

function removeTodasAsClasses(seletor) {
  let elemento = document.querySelector(seletor);

  if (!!elemento) {
    elemento.className = "";
  }
}

const addLinkLogout = () => {
  let htmlInsert = `<li>
    <a href="/conta/logout">
<i class="icon-logout cor-secundaria">

</i> 
Sair
    </a>
<li class="divisor borda-alpha"></li>
   
</li>`;

  document
    .querySelector(".menu-simples")
    .insertAdjacentHTML("beforeend", htmlInsert);
};

// adiciona textos e btn nos miniBanners
window.addEventListener("load", () => {
  const images = document.querySelectorAll(
    ".mini-banner > div.span4 > div.flexslider > ul.slides > li > a > img"
  );
  const links = document.querySelectorAll(
    ".mini-banner > div.span4 > div.flexslider > ul.slides > li > a"
  );
  const onlyimage = document.querySelectorAll(
    ".mini-banner > div.span4 > div.flexslider > ul.slides > li > img"
  );
  images.forEach((elem, index) => {
    const div = document.createElement("div");
    const h4 = document.createElement("h4");
    const a = document.createElement("a");

    div.classList.add("midBanner-text");
    h4.classList.add("midBanner-text-title");
    a.classList.add("midBanner-text-a");

    if (links[index].href) {
      h4.innerText = elem.alt.split("||")[0];
      div.appendChild(h4);

      a.href = links[index].href;
      a.innerText = elem.alt.split("||")[1] && elem.alt.split("||")[1];
      div.appendChild(a);
    }

    elem.parentNode.parentNode.appendChild(div);
  });

  onlyimage.forEach((elem, index) => {
    const div = document.createElement("div");
    const h4 = document.createElement("h4");

    div.classList.add("midBanner-text");
    h4.classList.add("midBanner-text-title");

    if (onlyimage[index]) {
      h4.innerText = elem.alt.split("||")[0];
      div.appendChild(h4);
    }

    elem.parentNode.appendChild(div);
  });

  // links.forEach((elem) => {
  //   elem.href = "";
  // });
});

// Esconde o site até que carrege totalmente

window.addEventListener('load', () => {
    'strict'
    const corpo = document.querySelector("body");
    corpo.classList.add("mostrar-pagina");
});

// window.Userback = window.Userback || {};
// Userback.access_token =
//   "7603|72389|Y6HssROcsvzEmR0agSQPeVCAdY3nc7fuG1FB6RfgdmYw49BDQ4";
// (function (d) {
//   var s = d.createElement("script");
//   s.async = true;
//   s.src = "https://static.userback.io/widget/v1.js";
//   (d.head || d.body).appendChild(s);
// })(document);

if (paginaInicial) {
  setInterval(() => {
    const fullBanner = document.querySelector("#full-banner");
    fullBanner.querySelector(".swiper-button-next").click();
  }, 5000);
}

const criarBreadcrumbs = () => {
    // 1 CRIAR CONTEINER
    const divBreadcrumbs = document.createElement("div");
    divBreadcrumbs.id = "breadcrumbs";
    // 2 CRIAR ORDERED LIST 
    const orderedList = document.createElement("ol");
    orderedList.vocab = "https://schema.org/";
    orderedList.typeof = "BreadcrumbList";
    // 3 CRIAR LI
    const listItem = document.createElement("li");
    listItem.property = "itemListElement";
    listItem.typeof = "ListItem";
    // 4 CRIAR breadcrumb link
    const linkBreadcrumb = document.createElement("a");
    linkBreadcrumb.href = "/";
    linkBreadcrumb.property = "item";
    linkBreadcrumb.typeof = "WebPage";
    linkBreadcrumb.textContent = "Página inicial";
    // 4 CRIAR META 
    const metaBreadcrumb = document.createElement("meta");
    metaBreadcrumb.property = "position";
    metaBreadcrumb.content = "1";
    // APPENDS 4->3
    listItem.append(linkBreadcrumb);
    listItem.append(metaBreadcrumb);
    // APPENDS 3->2
    orderedList.append(listItem);
    // APPEND 2->1
    divBreadcrumbs.append(orderedList);

    return divBreadcrumbs;
}


window.addEventListener('load', () => {
    'strict'

    try {


        // CRIAR BREADCRUMB CUSTOMIZADO
        document.querySelector("body").append(criarBreadcrumbs());

        /** Custom list **/
        const newList = document.querySelector('#breadcrumbs');

        /** Exclude home page **/
        if (window.location.pathname === '/') {
            newList.remove();
            return;
        }

        const breadcrumbs = document.querySelector('.breadcrumbs');
        if (breadcrumbs) {
            const ul = breadcrumbs.querySelector('ul');
            const items = ul.querySelectorAll('a, li > strong');
            const ol = newList.querySelector('ol');

            items.forEach((item, index) => {
                if (index) {

                    /** Insert Schema Markup in breadcrumbs **/
                    const li = document.createElement('li');
                    li.setAttribute('property', 'itemListElement');
                    li.setAttribute('typeof', 'ListItem');

                    const link = document.createElement('a');
                    link.setAttribute('property', 'item');
                    link.setAttribute('typeof', 'WebPage');

                    const meta = document.createElement('meta');
                    meta.setAttribute('property', 'position');
                    meta.setAttribute('content', index + 1);

                    /** Set data to link */
                    link.href = item.href;
                    link.innerText = item.innerText;

                    li.append(link);
                    li.append(meta);
                    ol.append(li);
                }
            });

            newList.append(ol);
            breadcrumbs.remove();

            /** Change position breadcrumb **/
            const productBody = document.querySelector('#corpo > .conteiner');
            productBody.prepend(newList);

        } else {
            newList.remove();
        }

    } catch (erro) {
        console.log(`Erro encontrado -> ${erro}`);
    }
});
const criarFooter = (
  urlLogoFooter,
  urlFacebook,
  urlYoutube,
  urlTikTok,
  urlInstagram,
  numContato,
  horarioAtendimento,
  nomeEmpresarial,
  enderecoEmpresarial,
  sobreEmpresa,
  urlSeloAmex,
  urlSeloDiners,
  urlSeloElo,
  urlSeloHipercard,
  urlSeloMastercard,
  urlSeloVisa,
  urlSeloBoleto,
  urlSeloDinheiro,
  urlSeloPix,
  urlSetaVoltarTopo,
  urlSeloCompraSegura,
  urlSeloGoogleSafe,
  urlSeloMercadoLivre,
  urlSeloCorreios,
  urlSeloOpinioesReais,
  infoLojaPlus,
  urlImagemLogoLoja,
  urlLogoMentores
) => {
  // 1 CRIAR FOOTER
  const footer = document.createElement("div");
  footer.id = "footer";
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // 2 CRIAR CONTEINER
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  const footerConteiner = document.createElement("div");
  footerConteiner.classList.add("conteiner");
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // 3 CRIAR DIV LOGO E MEDIA
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  const divLogoMidia = document.createElement("div");
  divLogoMidia.id = "logo-e-midia";
  // 4 div logo e midia box
  const boxLogoMidia = document.createElement("div");
  boxLogoMidia.classList.add("logo-e-midia-box");
  // 5 link logo footer
  const linkLogoFooter = document.createElement("a");
  linkLogoFooter.classList.add("logo-footer");
  linkLogoFooter.href = "/";
  // 6 imagem logo
  const imagemLogoFooter = document.createElement("img");
  imagemLogoFooter.id = "logo-footer-img";
  imagemLogoFooter.src = urlLogoFooter;
  // APPENDS  6->5
  linkLogoFooter.append(imagemLogoFooter);
  // 5 div midias
  const divMidias = document.createElement("div");
  divMidias.classList.add("midias");
  // 6 linkMidias
  const midiaFacebook = document.createElement("a");
  midiaFacebook.href = urlFacebook;
  midiaFacebook.target = "_blank";
  midiaFacebook.classList.add("midias-item");
  // 7 icone facebook
  const iconeFacebook = document.createElement("i");
  iconeFacebook.classList.add("icon-facebook");
  // 7 criar span Facebook
  const spanFacebook = document.createElement("span");
  spanFacebook.textContent = "Facebook";
  // Appends 7->6
  midiaFacebook.append(iconeFacebook);
  midiaFacebook.append(spanFacebook);
  // 6 linkMidias
  const midiaYoutube = document.createElement("a");
  midiaYoutube.href = urlYoutube;
  midiaYoutube.target = "_blank";
  midiaYoutube.classList.add("midias-item");
  // 7 icone facebook
  const iconeYoutube = document.createElement("i");
  iconeYoutube.classList.add("icon-youtube-play");
  // 7 criar span Youtube
  const spanYoutube = document.createElement("span");
  spanYoutube.textContent = "Youtube";
  // Appends 7->6
  midiaYoutube.append(iconeYoutube);
  midiaYoutube.append(spanYoutube);
  
  const midiaTikTok = document.createElement("a");
  midiaTikTok.href = urlTikTok;
  midiaTikTok.target = "_blank";
  midiaTikTok.classList.add("midias-item");
  // 7 icone facebook
  const iconeTikTok = document.createElement("i");
  iconeTikTok.classList.add("icon-tiktok");
  // 7 criar span TikTok
  const spanTikTok = document.createElement("span");
  spanTikTok.textContent = "TikTok";
  // Appends 7->6
  midiaTikTok.append(iconeTikTok);
  midiaTikTok.append(spanTikTok);
  // 6 linkMidias
  const midiaInstagram = document.createElement("a");
  midiaInstagram.href = urlInstagram;
  midiaInstagram.target = "_blank";
  midiaInstagram.classList.add("midias-item");
  // 7 icone facebook
  const iconeInstagram = document.createElement("i");
  iconeInstagram.classList.add("icon-instagram");
  // 7 criar span Instagram
  const spanInstagram = document.createElement("span");
  spanInstagram.textContent = "Instagram";
  // Appends 7->6
  midiaInstagram.append(iconeInstagram);
  midiaInstagram.append(spanInstagram);
  // Appends 6->5
  divMidias.append(midiaFacebook);
  divMidias.append(midiaYoutube);
  divMidias.append(midiaTikTok);
  divMidias.append(midiaInstagram);
  // Appends 5->4
  boxLogoMidia.append(linkLogoFooter);
  boxLogoMidia.append(divMidias);
  // Append 4->3
  divLogoMidia.append(boxLogoMidia);
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // FIM SECAO LOGO E MIDIA
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // 3 CRIAR DIV MENUS
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  const menusConteiner = document.createElement("div");
  menusConteiner.id = "menus";
  // 4 CRIAR DIV MENUS ANTEDIMENTO E NEWSLETTER
  const menusAtendimentoNewsletter = document.createElement("div");
  menusAtendimentoNewsletter.classList.add("menus-atendimento-e-newsletter");
  // 5 CRIAR DIV ATENDIMENTO
  const divAtendimento = document.createElement("div");
  divAtendimento.classList.add("atendimento");
  // 6 CRIAR H4 NUM CONTATO E HORARIO ATENDIMENTO
  const h4Atendimento = document.createElement("h4");
  h4Atendimento.textContent = "Atendimento";
  // 6 CRIAR DIV NUM CONTATO
  const divNumContato = document.createElement("div");
  divNumContato.classList.add("num-contato");
  divNumContato.innerHTML = numContato;
  // 6 CRIAR PARAGRAFO HORARIO ATENDIMENTO
  const pHorarioAtendimento = document.createElement("p");
  pHorarioAtendimento.innerHTML = horarioAtendimento;

  // APPEND 6->5
  divAtendimento.append(h4Atendimento);
  divAtendimento.append(divNumContato);
  divAtendimento.append(pHorarioAtendimento);

  // 5 CRIAR FOOTER NEWSLETTER
  const footerNewsletter = document.createElement("div");
  footerNewsletter.classList.add("footer-newsletter");
  // 6 CRIAR h4 Newsletter
  const h4Newsletter = document.createElement("h4");
  h4Newsletter.textContent = "Newsletter";
  // 6 CRIAR P NEWSLETTER
  const pNewsletter = document.createElement("p");
  pNewsletter.innerHTML = "Coloque seu e-mail para <br>descontos EXCLUSIVOS!";
  // 6 CRIAR BOTAO NREWSLETTER
  const botaoNewsletter = document.createElement("button");
  botaoNewsletter.classList.add("footer-newsletter-button");
  botaoNewsletter.innerHTML = "Cadastrar";
  
  // APPENDS 6->5
  footerNewsletter.append(h4Newsletter);
  footerNewsletter.append(pNewsletter);
  footerNewsletter.append(botaoNewsletter);

  // APPEND 5->4
  menusAtendimentoNewsletter.append(divAtendimento);
  menusAtendimentoNewsletter.append(footerNewsletter);
  // banner.after(footerNewsletter);

  // 4 MENUS INFO LOJA
  const divMenusInfoLoja = document.createElement("div");
  divMenusInfoLoja.classList.add("menus-info-loja");
  // 5 CRIAR h4
  const h4MenusInfoLoja = document.createElement("h4");
  h4MenusInfoLoja.textContent = nomeEmpresarial;
  // 5 CRIAR p
  const pMenusInfoLoja = document.createElement("p");
  pMenusInfoLoja.innerHTML = enderecoEmpresarial;
  // APPENDS 5->4
  divMenusInfoLoja.append(h4MenusInfoLoja);
  divMenusInfoLoja.append(pMenusInfoLoja);

  // 4 MENUS-SOBRE
  const divMenusSobre = document.createElement("div");
  divMenusSobre.classList.add("menus-sobre");
  // 5 CRIAR h4
  const h4MenusSobre = document.createElement("h4");
  h4MenusSobre.textContent = "Sobre";
  // 5 CRIAR p
  const pMenusSobre = document.createElement("p");
  pMenusSobre.innerHTML = sobreEmpresa;
  // APPENDS 5->4
  divMenusSobre.append(h4MenusSobre);
  divMenusSobre.append(pMenusSobre);

  // 4 CRIAR MENUS-INSTITUCIONAL
  const menusInstitucional = document.createElement("div");
  menusInstitucional.classList.add("menus-institucional");
  // 5 h4
  const h4MenusInstitucional = document.createElement("h4");
  h4MenusInstitucional.textContent = "Institucional";
  // APPEND 5->4
  menusInstitucional.append(h4MenusInstitucional);

  // APPEND 4-> 3
  menusConteiner.append(menusAtendimentoNewsletter);
  menusConteiner.append(divMenusInfoLoja);
  menusConteiner.append(divMenusSobre);
  menusConteiner.append(menusInstitucional);

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // 3 CRIAR DIV SELOS E MAIS
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  const selosEMaisConteiner = document.createElement("div");
  selosEMaisConteiner.id = "selos-e-mais";
  // 4 CRIARI PAGUE COM E SETA
  const divPagueComESeta = document.createElement("div");
  divPagueComESeta.classList.add("pague-com-e-seta");
  // 5 CRIAR DIV PAGUE COM
  const divPagueCom = document.createElement("div");
  divPagueCom.classList.add("pague-com");
  // 6 criar h4
  const h4PagueCom = document.createElement("h4");
  h4PagueCom.textContent = "Pague com";
  // 6 criar div pague com selos
  const divPagueComSelos = document.createElement("div");
  divPagueComSelos.classList.add("pague-com-selos-box");
  // 7 CRIAR IMG pague com selo Amex
  const imagemPagueComAmex = document.createElement("img");
  imagemPagueComAmex.classList.add("pague-com-selo-img");
  imagemPagueComAmex.src = urlSeloAmex;
  imagemPagueComAmex.alt = `Pague com Amex`;
  // 7 CRIAR IMG pague com selo Diners
  const imagemPagueComDiners = document.createElement("img");
  imagemPagueComDiners.classList.add("pague-com-selo-img");
  imagemPagueComDiners.src = urlSeloDiners;
  imagemPagueComDiners.alt = `Pague com Diners`;
  // 7 CRIAR IMG pague com selo Elo
  const imagemPagueComElo = document.createElement("img");
  imagemPagueComElo.classList.add("pague-com-selo-img");
  imagemPagueComElo.src = urlSeloElo;
  imagemPagueComElo.alt = `Pague com Elo`;
  // 7 CRIAR IMG pague com selo Hipercard
  const imagemPagueComHipercard = document.createElement("img");
  imagemPagueComHipercard.classList.add("pague-com-selo-img");
  imagemPagueComHipercard.src = urlSeloHipercard;
  imagemPagueComHipercard.alt = `Pague com Hipercard`;
  // 7 CRIAR IMG pague com selo Mastercard
  const imagemPagueComMastercard = document.createElement("img");
  imagemPagueComMastercard.classList.add("pague-com-selo-img");
  imagemPagueComMastercard.src = urlSeloMastercard;
  imagemPagueComMastercard.alt = `Pague com Mastercard`;
  // 7 CRIAR IMG pague com selo Visa
  const imagemPagueComVisa = document.createElement("img");
  imagemPagueComVisa.classList.add("pague-com-selo-img");
  imagemPagueComVisa.src = urlSeloVisa;
  imagemPagueComVisa.alt = `Pague com Visa`;
  // 7 CRIAR IMG pague com selo Boleto
  const imagemPagueComBoleto = document.createElement("img");
  imagemPagueComBoleto.classList.add("pague-com-selo-img");
  imagemPagueComBoleto.src = urlSeloBoleto;
  imagemPagueComBoleto.alt = `Pague com Boleto`;
  // 7 CRIAR IMG pague com selo Dinheiro
  const imagemPagueComDinheiro = document.createElement("img");
  imagemPagueComDinheiro.classList.add("pague-com-selo-img");
  imagemPagueComDinheiro.src = urlSeloDinheiro;
  imagemPagueComDinheiro.alt = `Pague com Dinheiro`;

  // 8 CRIAR IMG pague com selo Pix
  const imagemPagueComPix = document.createElement("img");
  imagemPagueComPix.classList.add("pague-com-selo-img");
  imagemPagueComPix.src = urlSeloPix;
  imagemPagueComPix.alt = `Pague com Pix`;

  // APPENDS 7->6
  divPagueComSelos.append(imagemPagueComAmex);
  divPagueComSelos.append(imagemPagueComDiners);
  divPagueComSelos.append(imagemPagueComElo);
  divPagueComSelos.append(imagemPagueComHipercard);
  divPagueComSelos.append(imagemPagueComMastercard);
  divPagueComSelos.append(imagemPagueComVisa);
  divPagueComSelos.append(imagemPagueComBoleto);
  divPagueComSelos.append(imagemPagueComDinheiro);
  divPagueComSelos.append(imagemPagueComPix);

  // APPENDS 6->5
  divPagueCom.append(h4PagueCom);
  divPagueCom.append(divPagueComSelos);

  // 5 CRIAR SETA QUE VOLTA AO TOPO
  const linkSetaVoltarTopo = document.createElement("a");
  linkSetaVoltarTopo.classList.add("seta-voltar-topo");
  linkSetaVoltarTopo.href = "#top";
  // 6 IMAGEM SETA VOLTAR TOPO
  const imagemSetaVoltarTopo = document.createElement("img");
  imagemSetaVoltarTopo.classList.add("seta-voltar-topo-img");
  imagemSetaVoltarTopo.src = urlSetaVoltarTopo;
  // APPEND 6->5
  linkSetaVoltarTopo.append(imagemSetaVoltarTopo);

  // APPENDS 5->4
  divPagueComESeta.append(divPagueCom);
  divPagueComESeta.append(linkSetaVoltarTopo);

  // 4 CRIAR SELOS E INFO
  const divSelosEInfo = document.createElement("div");
  divSelosEInfo.classList.add("selos-e-info");
  // 5 DIV SELOS
  const divSelos = document.createElement("div");
  divSelos.classList.add("selos");
  // 6 h4 Selos
  const h4Selos = document.createElement("h4");
  h4Selos.textContent = "Selos";
  // 6 CRIAR SELOS BOX
  const selosBox = document.createElement("div");
  selosBox.classList.add("selos-box");
  // 7 CRIAR IMAGEM CompraSegura
  const imagemSeloCompraSegura = document.createElement("img");
  imagemSeloCompraSegura.classList.add("selo-img");
  imagemSeloCompraSegura.src = urlSeloCompraSegura;
  imagemSeloCompraSegura.alt = "CompraSegura";
  // 7 CRIAR IMAGEM GoogleSafe
  const imagemSeloGoogleSafe = document.createElement("img");
  imagemSeloGoogleSafe.classList.add("selo-img");
  imagemSeloGoogleSafe.src = urlSeloGoogleSafe;
  imagemSeloGoogleSafe.alt = "GoogleSafe";
  // 7 CRIAR IMAGEM MercadoLivre
  const imagemSeloMercadoLivre = document.createElement("img");
  imagemSeloMercadoLivre.classList.add("selo-img");
  imagemSeloMercadoLivre.src = urlSeloMercadoLivre;
  imagemSeloMercadoLivre.alt = "MercadoLivre";
  // 7 CRIAR IMAGEM Correios
  const imagemSeloCorreios = document.createElement("img");
  imagemSeloCorreios.classList.add("selo-img");
  imagemSeloCorreios.src = urlSeloCorreios;
  imagemSeloCorreios.alt = "Correios";
  // 7 CRIAR IMAGEM OpinioesReais
  const imagemSeloOpinioesReais = document.createElement("img");
  imagemSeloOpinioesReais.classList.add("selo-img");
  imagemSeloOpinioesReais.src = urlSeloOpinioesReais;
  imagemSeloOpinioesReais.alt = "OpinioesReais";

  // APPENDS 7->6
  selosBox.append(imagemSeloCompraSegura);
  selosBox.append(imagemSeloGoogleSafe);
  selosBox.append(imagemSeloMercadoLivre);
  selosBox.append(imagemSeloCorreios);
  selosBox.append(imagemSeloOpinioesReais);

  // APPENDS 6->5
  divSelos.append(h4Selos);
  divSelos.append(selosBox);

  // 5 DIV INFO LOJA PLUSS
  const infoLojaPlusConteiner = document.createElement("div");
  infoLojaPlusConteiner.classList.add("inf-loja-plus");
  // 6 PARAGRAFO nfo loja
  const pInfoLoja = document.createElement("p");
  pInfoLoja.innerHTML = infoLojaPlus;
  // APPENDS 6->5
  infoLojaPlusConteiner.append(pInfoLoja);
  // APPENDS 5->4
  divSelosEInfo.append(divSelos);
  divSelosEInfo.append(infoLojaPlusConteiner);

  // APPENDS 4->3
  selosEMaisConteiner.append(divPagueComESeta);
  selosEMaisConteiner.append(divSelosEInfo);
  selosEMaisConteiner.append(divSelosEInfo);

  // APPENDS 3->2
  footerConteiner.append(divLogoMidia);
  footerConteiner.append(menusConteiner);
  footerConteiner.append(selosEMaisConteiner);

  // 2 COPYRIGHTS CONTEINER
  const copyrightsConteiner = document.createElement("div");
  copyrightsConteiner.id = "copyrights";
  // 3 CRIAR ITENS COPY
  const copyrightsItems = document.createElement("div");
  copyrightsItems.classList.add("itens-copyrights");
  // 4 CRIAR TERMOS E PRIVACIDADE
  const termosEPrivacidade = document.createElement("div");
  termosEPrivacidade.classList.add("termos-e-privacidade");
  // 5 PARAGRAFO
  const paragrafoTermos = document.createElement("p");
  // 6 LINKS TERMOS
  // const linkTermosDeUso = document.createElement("a");
  // linkTermosDeUso.href = "/pagina/termos-de-uso.html";
  // linkTermosDeUso.innerHTML = "Termos de uso e ";
  // 6 LINKS TERMOS
  const linkSegurancaEPrivacidade = document.createElement("a");
  linkSegurancaEPrivacidade.href = "/pagina/seguranca-e-privacidade.html";
  linkSegurancaEPrivacidade.innerHTML = "Política de privacidade";

  // APPENDS 6->5
  // paragrafoTermos.append(linkTermosDeUso);
  paragrafoTermos.append(linkSegurancaEPrivacidade);
  // APPENDS 5->4
  termosEPrivacidade.append(paragrafoTermos);

  // 4 logo loja integrada
  const logoLoja = document.createElement("div");
  logoLoja.classList.add("logo-loja-integrada");
  // 5 imagem logo
  const imagemLogoLoja = document.createElement("img");
  imagemLogoLoja.classList.add("logo-loja-integrada-img");
  imagemLogoLoja.src = urlImagemLogoLoja;
  imagemLogoLoja.alt = "Imagem logo loja";
  // APPEND 5->4
  logoLoja.append(imagemLogoLoja);
  // 4 DIV MENTORES
  const divMentores = document.createElement("div");
  divMentores.classList.add("mentores");
  // 5 PARAGRAFO MENTORES
  const pMentores = document.createElement("p");
  pMentores.textContent = "Desenvolvido no Brasil pela ";
  // 5 LINK MENTORES
  const linkMentores = document.createElement("a");
  linkMentores.classList.add("logo-mentores");
  linkMentores.target = "_blank";
  linkMentores.href = "https://mentores.com.br/loja-integrada/";
  // 6 IMAGEM LOGO MENTORES
  // const imagemLogoMentores = document.createElement("img");
  // imagemLogoMentores.classList.add("logo-mentores-img");
  // imagemLogoMentores.src = urlLogoMentores;
  const imagemLogoMentores = document.createElement("p");
  imagemLogoMentores.textContent = "Mentores loja integrada layout";

  // APPENDS 6->5
  linkMentores.append(imagemLogoMentores);
  // APPENDS 5->4
  divMentores.append(pMentores);
  divMentores.append(linkMentores);

  // APPENDS 4->3
  copyrightsItems.append(termosEPrivacidade);
  copyrightsItems.append(logoLoja);
  copyrightsItems.append(divMentores);

  // APPENDS 3->2
  copyrightsConteiner.append(copyrightsItems);

  // APPENDS 2->1
  footer.append(footerConteiner);
  footer.append(copyrightsConteiner);
  return footer;
};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// FOOTER
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const footerLi = document.querySelector("#rodape");
footerLi.append(
  criarFooter(
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Inserir dados aqui
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    logoClienteNegativa,
    linkClienteFacebook,
    linkClienteYoutube,
    linkClienteTikTok,
    linkClienteInstagram,
    telefoneCliente,
    horarioFuncionamento,
    razaoSocial,
    cnpjEndereco,
    descritivoNegocio,
    bandeiraAmex,
    bandeiraDiners,
    bandeiraElo,
    andeiraHipercard,
    bandeiraMastercard,
    bandeiraVisa,
    bandeiraBoleto,
    bandeiraDinheiro,
    bandeiraPix,
    urlSeta,
    seloCompraSegura,
    seloGoogle,
    seloMercadolivre,
    seloCorreios,
    seloOpinioes,
    descritivoInferior,
    logoLojaIntegrada,
    logoMentores
  )
);
const footer = document.querySelector("#footer");
if (footerLi) {
  if (footer) {
    // newsletter
    var news = document.querySelector(".newsletter .interno .interno-conteudo");
    var newsFooter = document.querySelector(".footer-newsletter");
    newsFooter.append(news);
    //var sourceAbout = footerLi.querySelector('.sobre-loja-rodape p');
    var sourceMenu = footerLi.querySelector(".links-rodape-paginas ul");
    if (!sourceMenu) {
      var url = urlSiteCliente;
      var xhr = new XMLHttpRequest();
      xhr.open("GET", url, true);
      xhr.responseType = "document";
      xhr.send();
      xhr.onload = function (e) {
        var doc = e.target.responseXML;
        sourceMenu = doc.querySelector(".links-rodape-paginas ul");
        footer.querySelector("#menus .menus-institucional").append(sourceMenu);
      };
    } else {
      const menuInstitucional = footer.querySelector(
        "#menus .menus-institucional"
      );
      sourceMenu && menuInstitucional && menuInstitucional.append(sourceMenu);
    }
    footerLi.innerHTML = "";
    footerLi.append(footer);
  }
}

const bandeirasProdutoCards = document.querySelectorAll(
  ".bandeiras-produto span"
);

bandeirasProdutoCards.forEach((elem) => {
  elem.innerText = elem.innerText.split(" ")[0] + " OFF";
});

window.addEventListener("load", () => {
  setTimeout(() => {
    const addBandeirasConteudo =
      document.querySelectorAll(".bandeiras-produto");
    addBandeirasConteudo.forEach((elem) => {
      if (elem.innerText !== "" && elem.innerText !== "PRODUTO OFF") {
        elem.classList.add("conteudo");
      }
    });
  }, 1);
});

window.addEventListener("load", () => {
  "strict";

  // SCRIPT PÁGINA INICIAL
  try {
    if (paginaInicial()) {
      
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // CABEÇALHO
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // BARRA INICIAL
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // Inserir texto e url
      const barraInicial = document.getElementsByClassName("barra-inicial")[0];
      barraInicial.appendChild(
        criarConteudoBarraInicial(mensagemSlogan, iconeSlogan)
      );
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // SEÇÃO FULL BANNERS
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      const sectionBanner = document.querySelector(".secao-banners");
      // Append seções Banners
      sectionBanner.append(criarFullBannerDesktop());
      sectionBanner.append(criarFullBannerMobile());
      if (sectionBanner) {
        const imagesDesktop = [];
        const imagesMobile = [];
        const slides = sectionBanner.querySelectorAll(".slides li");
        slides.forEach((_slide) => {
          const title = _slide.querySelector(".titulo");
          const link = _slide.querySelector("a");
          const img = _slide.querySelector("img");
          var splitAlt = img.alt.trim().toLowerCase().split("_"); // Separa pelo "_"
          var deviceType = splitAlt[splitAlt.length - 1];
          if (deviceType == "desktop") {
            imagesDesktop.push({
              src: img.src,
              alt: img.alt,
              link: link ? link.href : null,
              title: title ? title.innerHTML : null,
            });
          } else if (deviceType == "mobile") {
            imagesMobile.push({
              src: img.src,
              alt: img.alt,
              link: link ? link.href : null,
              title: title ? title.innerHTML : null,
            });
          } else {
            imagesDesktop.push({
              src: img.src,
              alt: img.alt,
              link: link ? link.href : null,
              title: title ? title.innerHTML : null,
            });
            imagesMobile.push({
              src: img.src,
              alt: img.alt,
              link: link ? link.href : null,
              title: title ? title.innerHTML : null,
            });
          }
        });
        const fullBannerDesktop = document.querySelector("#full-banner");
        const fullBannerMobile = document.querySelector("#full-banner-mobile");
        sectionBanner.innerHTML = "";
        createBanner(fullBannerDesktop, imagesDesktop, sectionBanner);
        createBanner(fullBannerMobile, imagesMobile, sectionBanner);
      }
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // SEÇÃO BANNER DESTAQUES DESKTOP
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      const secaoListagemProdutos = document.querySelector(
        ".secao-principal #listagemProdutos ul"
      );
      secaoListagemProdutos.after(
        criarBannerDestaquesDesktop(
          bannerDestaqueUm,
          bannerDestaqueDois,
          bannerDestaqueTres,
          bannerDestaqueQuatro,
          titleElementoUm,
          titleElementoDois,
          titleElementoTres,
          titleElementoQuatro,
          textoBtnElementoUm,
          textoBtnElementoDois,
          textoBtnElementoTres,
          textoBtnElementoQuatro,
          linkBtnElementoUm,
          linkBtnElementoDois,
          linkBtnElementoTres,
          linkBtnElementoQuatro
        )
      );
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // SEÇÃO SAIBA MAIS
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      const secaoSaibaMais = document.querySelector(
        ".secao-principal #listagemProdutos ul"
      ).nextElementSibling.nextElementSibling.nextElementSibling;
      secaoSaibaMais.after(
        criarSecaoSaibaMais(
          h2SecaoSaibaMais,
          paragrafoSecaoSaibaMais,
          textoBotaoSaibaMais,
          imagemSecaoSaibaMais
        )
      );
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // SECAO STRIPE BANNERS
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      const sectionStripe = document.querySelector(".secao-banners");
      if (sectionStripe) {
        sectionStripe.after(
          criarStripeBanner(
            [
              // INSERIR URL ICONE
              urlIconeUmStripe,
              // INSERIR PARAGRAFO
              paragrafoUmStripe,
              // INSERIR STRONG
              strongUmStripe,
            ],
            [
              // INSERIR URL ICONE
              urlIconeDoisStripe,
              // INSERIR PARAGRAFO
              paragrafoDoisStripe,
              // INSERIR STRONG
              strongDoisStripe,
            ],
            [
              // INSERIR URL ICONE
              urlIconeTresStripe,
              // INSERIR PARAGRAFO
              paragrafoTresStripe,
              // INSERIR STRONG
              strongTresStripe,
            ],
            [
              // INSERIR URL ICONE
              urlIconeQuatroStripe,
              // INSERIR PARAGRAFO
              paragrafoQuatroStripe,
              // INSERIR STRONG
              strongQuatroStripe,
            ]
          )
        );
      }
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // CARROSSEL DE PRODUTOS NOVIDADES
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      const tituloPrimeiroCarrossel = document.querySelector(
        ".vitrine-lancamento > strong"
      );
      tituloPrimeiroCarrossel.textContent = "Novidades"; // ALTERAR TITULO
      const subtituloPrimeiroCarrossel = document.createElement("p");
      subtituloPrimeiroCarrossel.classList.add("subtitulo-carrossel");
      subtituloPrimeiroCarrossel.textContent =
        "todos os dias chegam novos produtos"; // ALTERAR SUBTITULO
      tituloPrimeiroCarrossel.after(subtituloPrimeiroCarrossel);
      // SWIPER
      document.body.append(
        criarCarrossel(
          //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          // Inserir dados aqui
          //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          urlSeta
        )
      );

      document.body.append(
        criarModelProductBox(
          //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          // Inserir dados aqui
          //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
          "",
          ""
        )
      );

      // SELECIONA TODOS OS UL
      let productCarouselLI = document.querySelectorAll(".produtos-carrossel");
      // SE EXISTIR PRODUTOS NO CARROSSEL
      if (productCarouselLI.length) {
        const section = document.querySelector("#product-carousel"); // Model container of carousel from HTML file
        const slide = document.querySelector("#model-product-box"); // Box in model container inside HTML file
        // LISTA DE PRODUTOS CARROSSEL
        productCarouselLI.forEach((productCarousel) => {
          const container = productCarousel.previousElementSibling;
          const classList = container && container.classList;
          // Products inside carousel list
          const _section = section.cloneNode(true);
          const _slider = _section.querySelector(".swiper");
          const items = productCarousel.querySelectorAll(
            ".listagem-linha .flex-viewport li"
          );
          items.forEach((product, index) => {
            /** Catch all infos **/
            const bandeirasCards = product.querySelector(
              ".bandeiras-produto span"
            );
            const image = product.querySelector(".imagem-produto img");
            const name = product.querySelector(".nome-produto");
            const buton = product.querySelector(".acoes-produto");
            const priceFrom = product.querySelector(".preco-venda");
            const price = product.querySelector(".preco-promocional");
            const precoAVista = product.querySelector(
              ".desconto-a-vista strong"
            );
            const stallments = product.querySelector(".preco-parcela");
            const stars = product.querySelector(".trustvox-stars");
            const link = product.querySelector(".produto-sobrepor");
            const box = slide.cloneNode(true);
            if (image) {
              const urlHover = image.getAttribute("data-imagem-caminho");
              box.id = `product_box_${index}`;
              box.classList.add("swiper-slide");
              box.querySelector("figure .cover").src = image.src;
              box.querySelector("figure img").alt = image.alt;
              if (urlHover) {
                box.querySelector("figure .hover").src = urlHover;
              } else {
                const _cover = box.querySelector("figure .cover");
                _cover && _cover.classList.remove("cover");
                box.querySelector("figure .hover").remove();
              }
            }
            if (bandeirasCards) {
              box.querySelector(".bandeiras-produto").innerHTML =
                bandeirasCards.innerHTML;
            }
            if (name) {
              box.querySelector(".product-title h2").innerHTML = name.innerHTML;
            }
            if (priceFrom) {
              box.querySelector(
                ".product-original"
              ).innerHTML = `de ${priceFrom.innerHTML} por`;
            }
            if (price) {
              box.querySelector(".product-price h2").innerHTML =
                price.innerHTML;
            }
            if (precoAVista) {
              box.querySelector(
                ".preco-a-vista"
              ).innerHTML = `${precoAVista.innerHTML} via Pix`;
            }
            if (stars) {
              box.querySelector(".stars").append(stars.cloneNode(true));
            }
            if (buton) {
              box.querySelector("a").append(buton.cloneNode(true));
            }
            if (stallments) {
              box.querySelector(".product-price small").innerHTML =
                stallments.innerHTML
                  .replaceAll('<strong class="cor-secundaria">', "")
                  .replaceAll('<strong class="cor-secundaria ">', "")
                  .replaceAll("</strong>", "");
              // .replace('de', 'de<br/>');
            }
            link &&
              box.querySelectorAll("a").forEach((item) => (item.href = link));
            box && _slider.querySelector(".swiper-wrapper").append(box);
          });
          // Montar Slider
          new Swiper(_slider, {
            loop: true,
            slidesPerView: 1,
            spaceBetween: 30,
            navigation: {
              nextEl: _section.querySelector(".swiper-button-next"),
              prevEl: _section.querySelector(".swiper-button-prev"),
            },
            breakpoints: {
              768: {
                slidesPerView: 4,
                spaceBetween: 30,
              },
            },
            pagination: {
              el: ".swiper-pagination",
              clickable: true,
            },
          });
          // Adicionar atributos e colocar itens
          _section.id = classList.length
            ? `${classList[classList.length - 1]}`
            : "listagem-carrossel";
          productCarousel.remove();
          container.append(_section);
        });
        slide.remove();
        section.remove();
        productCarouselLI = null;
      }
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // CARROSSEL DE PRODUTOS MAIS VENDIDOS
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      const tituloSegundoCarrossel = document.querySelector(
        ".vitrine-mas-vendido > strong"
      );
      tituloSegundoCarrossel.textContent = "Ofertas Relâmpago"; // ALTERAR TITULO
      const subtituloSegundoCarrossel = document.createElement("p");
      subtituloSegundoCarrossel.classList.add("subtitulo-carrossel");
      subtituloSegundoCarrossel.textContent =
        "todos os dias chegam novos produtos"; // ALTERAR SUBTITULO
      tituloSegundoCarrossel.after(subtituloSegundoCarrossel);
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // Banner destaque inferior
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      const conteinerSecaoSaibaMais =
        document.querySelector("#secao-saiba-mais");
      if (window.matchMedia("(min-width: 640px)").matches) {
        conteinerSecaoSaibaMais.after(
          criarBannerDestaqueInferior(
            bannerDestaqueInferior,
            textoBannerDestaqueInferior,
            porcentBannerDestaqueInferior,
            ctaBannerDestaqueInferior,
            linkBannerDestaqueInferior
          )
        );
      } else {
        conteinerSecaoSaibaMais.after(
          criarBannerDestaqueInferior(
            bannerDestaqueInferiorMobile,
            textoBannerDestaqueInferior,
            porcentBannerDestaqueInferior,
            ctaBannerDestaqueInferior,
            linkBannerDestaqueInferior
          )
        );
      }
      const miniBanners = document.querySelector(".banner");
      miniBanners.classList.remove("hidden-phone");
    }
  } catch (error) {
    console.log(`Erro encontrado -> ${error}`);
  }

  // pegando o banner principal da home e add o newsletter abaixo
  // const banner = document.querySelector("#banner-destaques");
  // const newsLetter = document.querySelector(".footer-newsletter");
  // banner.after(newsLetter)
});


const criarBoxImagemLogin = (urlImagem) => {
  // Insere imagem no corpo da página
  let imagemLoginBox = document.createElement("div");
  let imagemLogin = document.createElement("img");
  imagemLogin.src = urlImagem;
  imagemLogin.classList.add("imagem-login");
  imagemLoginBox.classList.add("box-imagem-login");
  imagemLoginBox.append(imagemLogin);

  return imagemLoginBox;
};

const criarBoxPrimeiroAcesso = () => {
  // 1 CRIAR CONTEINER
  const primeiroAcessoConteiner = document.createElement("div");
  primeiroAcessoConteiner.classList.add("box-primeiro-acesso");
  // 2 CRIAR PARAGRAFO
  const pPrimeiroAcesso = document.createElement("p");
  pPrimeiroAcesso.classList.add("primeiro-acesso");
  // 3 CRIAR STRONG
  const strongPrimeiroAcesso = document.createElement("strong");
  strongPrimeiroAcesso.textContent = "Primeiro acesso?";
  // APPEND 3->2
  pPrimeiroAcesso.append(strongPrimeiroAcesso);

  // 2 CRIAR PARAGRAFO
  const pFacaSeuCadastro = document.createElement("p");
  pFacaSeuCadastro.classList.add("faca-seu-cadastro");
  pFacaSeuCadastro.textContent = "Faça aqui o seu cadastro";

  // APPEND 2->1
  primeiroAcessoConteiner.append(pPrimeiroAcesso);
  primeiroAcessoConteiner.append(pFacaSeuCadastro);

  return primeiroAcessoConteiner;
};

try {
  if (paginaLogin()) {
    // APPEND BOX PRIMEIRO ACESSO
    let destinoBoxPrimeiroAcesso = document.querySelector(
      ".cadastro-logar > .span6:last-child fieldset legend"
    );
    destinoBoxPrimeiroAcesso.after(criarBoxPrimeiroAcesso());
    // CRIAR BoxImagem
    document.querySelector("#corpo .cadastro-logar").append(
      criarBoxImagemLogin(
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // INSERIR DADOS AQUI
        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        imagemDireita
      )
    );
    // Reposiciona Esqueceu sua senha
    let recuperarSenha = document.querySelector(".recuperar-senha");
    document.querySelector("#id_senha").after(recuperarSenha);
  }
} catch (error) {
  console.log(`Erro encontrado -> ${error}`);
}

window.addEventListener("load", () => {
  "strict";
  try {
    if (paginaEditarMinhaConta() || paginaEditarEndereco()) {
      addLinkLogout();
    } else {
      removaSeExistir(null);
    }
  } catch (erro) {
    console.log(`Erro encontrado -> ${erro}`);
  }
});

const criarBoxCadastrarEndereco = () => {
  let boxCadastrarNovoEndereco = document.createElement("div");
  boxCadastrarNovoEndereco.classList.add("acao-editar");
  return boxCadastrarNovoEndereco;
};

window.addEventListener("load", () => {
  "strict";

  try {
    if (paginaConta()) {
      // Adicionar classe ao body da página para não dar conflito com outras páginas
      adicionarClasseAoBody("pagina-minha-conta");

      // Muda posição do botão "Cadastrar novo endereço"
      let destinoCadastrarNovoEndereco = document.querySelector(
        ".caixa-dados.outros-enderecos fieldset"
      );
      destinoCadastrarNovoEndereco.append(criarBoxCadastrarEndereco());

      // Muda botaoCadastrarNovoEndereco
      const botaoEndereco = document.querySelector(botaoCadastrarEndereco);
      const destinoBotao = document.querySelector(".span12 .acao-editar");
      destinoBotao.append(botaoEndereco);

      addLinkLogout();
    }
  } catch (error) {
    console.log(`Erro encontrado -> ${error}`);
  }
});

window.addEventListener("load", () => {
  "strict";
  try {
    if (paginaAlterarSenha()) {
      // Adiciona classe no body para identificar a página minha conta
      adicionarClasseAoBody("pagina-alterar-senha");
      removeTodasAsClasses(".acao-editar > div");

      //Adiciona Fazer Logout ao menu lateral do usuário
      addLinkLogout();
    }
  } catch (erro) {
    console.log(`Erro encontrado -> ${erro}`);
  }
});

const criarTituloMeusPedidos = () => {
  // Insere o título da Página
  let tituloPagina = document.createElement("h3");
  tituloPagina.classList.add("titulo");
  tituloPagina.textContent = "Meus Pedidos";
  return tituloPagina;
};

window.addEventListener("load", () => {
  "strict";

  try {
    if (paginaPedidoListar()) {
      document
        .querySelector(".pagina-pedido-listar .abas-conteudo")
        .prepend(criarTituloMeusPedidos());

      addLinkLogout();
    }
  } catch (erro) {
    console.log(`Erro encontrado -> ${erro}`);
  }
});

const criarFiltros = () => {
  // 1 CRIAR FILTROS DIV
  const divFiltros = document.createElement("div");
  divFiltros.classList.add("m-filtros-aplicados");
  // 2 CRIAR SPAN FILTORS
  const spanFiltros = document.createElement("span");
  // 2 criar filtros BOX
  const boxFiltrosAplicados = document.createElement("div");
  boxFiltrosAplicados.classList.add("m-filtros-aplicados-box");
  // 3 CRIAR bOX itemS
  const boxItensFiltros = document.createElement("div");
  boxItensFiltros.classList.add("m-filtros-aplicados-box-itens");
  // APPEND 3->2
  boxFiltrosAplicados.append(boxItensFiltros);
  // 2 CRIAR LINK EXCLUIR TODOS
  const linkFiltros = document.createElement("a");
  linkFiltros.classList.add("m-filtros-aplicados-excluir-todos");
  linkFiltros.href = "?";
  linkFiltros.textContent = "Excluir todos";
  // APPENDS 2->1
  divFiltros.append(spanFiltros);
  divFiltros.append(boxFiltrosAplicados);
  divFiltros.append(linkFiltros);

  return divFiltros;
};

// banner inferior

// if (paginaCategoria()) {
//   // 1 CRIAR CONTEINER
//   const bannerDestaqueInferiorContainer = document.createElement("div");
//   bannerDestaqueInferiorContainer.classList.add("banner-destaque-inferior");
//   // 2 CRIAR IMAGEM
//   const imagemBannerDestaqueInferior = document.createElement("img");
//   imagemBannerDestaqueInferior.classList.add("banner-destaque-categorias");
//   imagemBannerDestaqueInferior.src = url(
//     "https://cdn.awsli.com.br/1595/1595002/arquivos/banner-bottom-desktop.png"
//   );
//   imagemBannerDestaqueInferior.alt = "banner destaque inferior categorias";

//   // const pag = document.querySelector(".pagination");

//   bannerDestaqueInferiorContainer.append(imagemBannerDestaqueInferior);

//   pagination.after(bannerDestaqueInferiorContainer);
// }

// //////////////

window.addEventListener("load", () => {
  "strict";

  if (paginaCategoria() | paginaBusca()) {
    var pagination = document.querySelector(".pagination");
    var listage = document.querySelector("#listagemProdutos");

    pagination ? listage.after(pagination) : null;
  }

  try {
    if (paginaCategoria() || paginaBusca()) {
      removerTudo(".componente .interno");
      const body = document.querySelector(".pagina-categoria");
      body.append(criarFiltros());
      posicionaFiltro();
      var filtros = document.querySelectorAll(".filtro ul li.active label");
      for (var i = 0; i < filtros.length; i++) {
        createFilterItem(filtros[i]);
      }

      // Mobile
      if (screen.width < 992) {
        const listagemProdutosCategorias = document.querySelector("#listagemProdutos");
        listagemProdutosCategorias.after(criarBannerDestaqueInferior(
          bannerDestaqueInferiorMobile,
          textoBannerDestaqueInferior,
          porcentBannerDestaqueInferior,
          ctaBannerDestaqueInferior
        ))
        // Desktop
      } else {
        const listagemProdutosCategorias = document.querySelector("#listagemProdutos");
        listagemProdutosCategorias.after(criarBannerDestaqueInferior(
          bannerDestaqueInferior,
          textoBannerDestaqueInferior,
          porcentBannerDestaqueInferior,
          ctaBannerDestaqueInferior
        ))
      }



    } else {
      removaSeExistir(".m-filtros-aplicados");
    }
  } catch (erro) {
    console.log(`Erro encontrado -> ${erro}`);
  }
});

window.addEventListener("load", () => {
  "strict";
  try {
    if (paginaListaDesejos()) {
      addLinkLogout();
    } else {
      removaSeExistir(null);
    }
  } catch (erro) {
    console.log(`Erro encontrado -> ${erro}`);
  }
});

window.addEventListener("load", () => {
  "strict";

  try {
    if (paginaProduto()) {
      const painelProduto = document.querySelector(
        ".produto>.row-fluid:first-child"
      );

      // const textoAlterarMercadoPago = document.querySelector(".comprar span");

      // textoAlterarMercadoPago.innerHTML =
      //   "Compra 100% segura. Pagamentos auditados pelo <strong>Mercado Pago</strong>";

      // textoAlterarMercadoPago.classList.remove("disponibilidade-produto");
      // textoAlterarMercadoPago.classList.add("descricao-mp");

      const doisSpans6 = painelProduto.querySelectorAll(".span6");
      doisSpans6.forEach((span, i) => {
        span.classList.remove("span6");
        span.classList.add(`item-painel-${i}`);
      });
      const infoProduto = document.querySelectorAll(
        ".info-principal-produto > *"
      );

      const botaoComprar = document.querySelector(".principal .comprar");
      // const parcelasProduto = document.querySelector(".parcelas-produto.borda-alpha.padrao");
      const precoProduto = document.querySelector(
        ".acoes-produto .preco-produto"
      );
      const atributos = document.querySelector(".atributos");
      const itemPainelUm = document.querySelector(".item-painel-0");
      const detalhesProduto = document.createElement("div");
      detalhesProduto.id = "item-painel-00";

      try {
        infoProduto.forEach((info) => {
          detalhesProduto.append(info);
        });
      } catch (e) {
        console.log(`erro aqui infoProduto-> ${e.message}`)
      }


      itemPainelUm.after(detalhesProduto);

      const painel0 = document.querySelector(".item-painel-0");
      const painel00 = document.querySelector("#item-painel-00");
      const painelProdutoConteiner = document.createElement("div");
      painelProdutoConteiner.id = "painel-produto-conteiner";
      painelProdutoConteiner.append(painel0);
      painelProdutoConteiner.append(painel00);
      painelProduto.prepend(painelProdutoConteiner);
      const precos = document.querySelectorAll(".acoes-produto");

      // try {
      //   for (let i = 0; i < precos.length; i++) {
      //     precos[i].after(atributos.cloneNode(true));
      //   }
      //   // precos[2].after(atributos);
      // } catch (e) {
      //   console.log(`erro no painel 00, não existe atributos -> ${e.message}`)
      // }

      const accordions = document.querySelectorAll(".accordion");
      const cep = document.querySelectorAll(".cep");
      accordions.forEach((accordion, i) => {
        accordion.append(cep[i]);
      });

      // const cartaoCredito = document.createElement("strong");
      // cartaoCredito.textContent = "Cartão de crédito";
      // const boletoBancario = document.createElement("strong");
      // boletoBancario.textContent = "Boleto Bancário";
      // const pix = document.createElement("strong");
      // pix.textContent = "Pix";
      // const textParcelas = document.querySelectorAll(".text-parcelas");
      // textParcelas[6].before(cartaoCredito);
      // textParcelas[7].before(boletoBancario);
      // textParcelas[8].before(pix);

      // BREVE DESCRICAO
      const descricao = document.querySelector("#descricao");
      const divDescricao = document.createElement("div");
      divDescricao.id = "breve-descricao";

      const descricaoh2 = document.createElement("h2");
      descricaoh2.textContent = "Descrição";
      descricaoh2.id = "descricao-titulo";


      try {
        if (descricao) {
          const breveDescricao = descricao.innerHTML.slice(0, 500);

          if (!breveDescricao) {
            breveDescricao = descricao.slice(0, 200);
          }
          divDescricao.innerHTML = breveDescricao + " ...";
          painel00.append(divDescricao);
          descricao.prepend(descricaoh2);
        }

        vejaLink =
          "<a href='#descricao' id='veja-info'>Veja mais informações</a>";
        painel00.innerHTML += vejaLink;

        linhaFormaDeEnvio = `
                <div id="envio">
                    <img src="https://cdn.awsli.com.br/2384/2384993/arquivos/icone-box-produto.png" alt="box">
                    <div>
                        <strong>Envio em 48 horas úteis após aprovação do pagamento</strong>
                        <small>*Não válido para itens digitais e pré-vendas.</small>
                    </div>
                </div>`;

        painel00.innerHTML += linhaFormaDeEnvio;
      } catch (e) {
        console.log(`Prod, -> ${e}`);
      }

      const itemPainel0 = document.querySelector(".item-painel-0");
      const div = document.createElement("div");
      div.innerHTML = `
            
                `;
      itemPainel0.append(div);

      const botaoVideo = document.querySelector("a.botao-video");
      const imagemVideo = document.createElement("img");
      imagemVideo.src = iconePlayVideo;
      imagemVideo.id = "icone-video";
      botaoVideo.append(imagemVideo);

      const produtoVideo = document.querySelector(".produto-video p");
      produtoVideo.textContent = "Clique ao lado para assistir ao vídeo";
    }
  } catch (erro) {
    console.log(`Página do produto -> ${erro}`);
  }
});

window.addEventListener('load', () => {
    'strict'

    try {
        if (paginaCarrinho()) {

            const inputFrete = document.querySelectorAll('.formas-envio .radio input');

            inputFrete.forEach((elemento, index) => {
                const newdiv = document.createElement('div');
                newdiv.classList.add('inputEnvio');
                newdiv[index].append(elemento);


                const formas = document.querySelectorAll('.formas-envio .radio');
                formas.forEach((elem) =>{
                    elem.prepend(newdiv);
                })
            })

            setTituloPaginaCarrinho();
            removeSubtotalPaginaCarrinho();
            substituirSkuPorCodigo();

            // Modifica Link não sei meu CEP
            var naoSeiMeuCEP = document.querySelector(".pagina-carrinho:not(.carrinho-checkout) .finalizar-compra #formCalcularFrete .controls .input-append + .help-inline > a");
            var iconeNaoSeiMeuCEP = naoSeiMeuCEP.querySelector("i").cloneNode(true);
            naoSeiMeuCEP.innerHTML = "";
            naoSeiMeuCEP.append(iconeNaoSeiMeuCEP);

            // frete mobile
            var fretemodal = document.querySelector('.tabela-carrinho tr.bg-dark.hidden-phone');
            fretemodal.classList.remove("hidden-phone");

        } else {

        }
    } catch (erro) {
        console.log(`Erro encontrado -> ${erro}`);
    }

});
function limitarTextCheckout() {
  const nomesFretes = document.querySelectorAll(".nome");
  for (let i = 0; i < nomesFretes.length; i++) {
      let newNome = nomesFretes[i].innerHTML.slice(0, 25);
      newNome.length >= 25 ? nomesFretes[i].innerHTML = `${newNome}...` : nomesFretes[i].innerHTML = newNome;
  }   
  
}

window.addEventListener('load', ()=>{
  if (paginaCarrinho()) {
      limitarTextCheckout()
  }

  const btnFrete = document.querySelector("#btn-frete");
  btnFrete.addEventListener("click", () => {
      document.location.reload(true);
  });
})

try {
  if (paginaCheckout()) {
    carrinhoNav("#cabecalho > .conteiner");

    function carrinhoNav(divPai) {
      let infoDiv = document.createElement("div");
      infoDiv.style.justifyContent = "space-between";
      infoDiv.style.alignItems = "center";

      infoDiv.className = "row-fluid";
      infoDiv.style.display = "flex";

      let selosDiv = document.createElement("div");
      selosDiv.className = "selo-div";
      let selos = document.createElement("img");
      selos.style.justifyContent = "space-between";
      selos.src = seloCompraSeguraCheckout;
      selos.alt = "selo-compra";
      selosDiv.appendChild(selos);

      let googleDiv = document.createElement("div");
      googleDiv.className = "google-div";
      let google = document.createElement("img");
      google.src = seloGoogleCheckout;
      google.alt = "selo google";
      googleDiv.appendChild(google);

      // let atendimentoDiv = document.createElement("div");
      // atendimentoDiv.className = "atendimento-tel";
      // atendimentoDiv.innerHTML = `
      // Atendimento<br>
      // <strong>(11) 95158-9745</strong>`;

      let conteinerNav = document.querySelector(divPai);
      conteinerNav.classList.add("mobilenav");
      conteinerNav.style.display = "flex";
      // conteinerNav.style.margin = "0px 100px 0px 100px";
      // conteinerNav.appendChild(logoDiv);
      conteinerNav.appendChild(infoDiv);
      infoDiv.appendChild(selosDiv);
      infoDiv.appendChild(googleDiv);
      infoDiv.appendChild(atendimentoDiv);
    }
  }
} catch (error) {
  console.log(`Erro encontrado checkout header -> ${error}`);
}

function preenchimentoListaEnderecos() {
  var listaEndereco = document.querySelectorAll("#listaEndereco input");
  for (let i = 0; i < listaEndereco.length; i++) {
    listaEndereco[i].parentElement.classList.remove("m-checked");
    if (listaEndereco[i].checked) {
      listaEndereco[i].parentElement.classList.add("m-checked");
    }
  }
}

window.addEventListener("load", () => {
  "strict";
  try {
    if (paginaCheckout()) {
      setTituloPaginaCheckout();
      document.querySelector(".cabecalho-interno").classList.remove("hide");
      // comportamento radio input - Lista Endereços
      var inputsListaEnderecos = document.querySelectorAll(
        "#listaEndereco input"
      );
      for (let i = 0; i < inputsListaEnderecos.length; i++) {
        inputsListaEnderecos[i].setAttribute(
          "onclick",
          "preenchimentoListaEnderecos()"
        );
      }
      preenchimentoListaEnderecos();
      const formasPagamento = document.querySelector("#exibirFormasPagamento a");
      for (let i = 0; i < 3; i++) {
        window.setTimeout(() => formasPagamento.click(), 1000);
      }

    }
  } catch (e) {
    console.log(`Erro encontrado pagina checkout -> ${e.message}`);
  }
});


// const input = document.querySelector(".tabela-carrinho .formas-envio ul li label.radio input");

window.addEventListener("load", () => {
  "strict";
  try {
    if (window.location.pathname == "/pagina/quem-somos.html") {
      const divBanner = document.createElement("div");
      divBanner.id = "banner-sobre-nos";
      const bannerImagem = document.createElement("img");
      bannerImagem.src = quemSomosBanner;
      bannerImagem.alt = "Banner sobre nos";
      divBanner.append(bannerImagem);
      divBanner.append(document.querySelector("#breadcrumbs"));
      divBanner.append(document.querySelector("h1.titulo.cor-secundaria"));
      const destinoBanner = document.querySelector("#corpo");
      destinoBanner.prepend(divBanner);

      //   APPEND DESTAQUE INFERIOR
      const caixaSombreada = document.querySelector(".caixa-sombreada");
      //   caixaSombreada.after(
      // criarBannerDestaqueInferior()
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      // Inserir dados aqui
      //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      //   bannerDestaqueInferior,
      //   textoBannerDestaqueInferior,
      //   porcentBannerDestaqueInferior,
      //   ctaBannerDestaqueInferior
      //   );
    }
  } catch (erro) {
    console.log(`Erro encontrado -> ${erro}`);
  }
});

window.addEventListener('load', () => {
    'strict'
    try {
        if (window.location.pathname == '/pagina/perguntas-frequentes.html') {
            const divBanner = document.createElement("div");
            divBanner.id = "banner-perguntas-frequentes";
            const bannerImagem = document.createElement("img");
            bannerImagem.src = perguntasFrequentesBanner;
            bannerImagem.alt = "Banner trocas e devolucoes";
            divBanner.append(bannerImagem);
            divBanner.append(document.querySelector("#breadcrumbs"));
            divBanner.append(document.querySelector("h1.titulo.cor-secundaria"));
            const destinoBanner = document.querySelector("#corpo");
            destinoBanner.prepend(divBanner);
        }

    } catch (erro) {
        console.log(`Erro encontrado -> ${erro}`);
    }
});
window.addEventListener("load", () => {
  "strict";
  try {
    if (
      window.location.pathname == "/pagina/politica-de-trocas-e-devolucoes.html"
    ) {
      const divBanner = document.createElement("div");
      divBanner.id = "banner-troca-e-devolucoes";
      const bannerImagem = document.createElement("img");
      bannerImagem.src =
        "https://cdn.awsli.com.br/1595/1595002/arquivos/banner-trocas-e-devolucoes-desktop.png";
      bannerImagem.alt = "Banner trocas e devolucoes";
      divBanner.append(bannerImagem);
      divBanner.append(document.querySelector("#breadcrumbs"));
      divBanner.append(document.querySelector("h1.titulo.cor-secundaria"));
      const destinoBanner = document.querySelector("#corpo");
      destinoBanner.prepend(divBanner);
    }
  } catch (erro) {
    console.log(`Erro encontrado -> ${erro}`);
  }
});

window.addEventListener('load', () => {
    'strict'
    try {
        if (window.location.pathname == '/pagina/uso-e-conservacao.html') {
            const divBanner = document.createElement("div");
            divBanner.id = "banner-troca-e-devolucoes";
            const bannerImagem = document.createElement("img");
            bannerImagem.src = "https://cdn.awsli.com.br/2289/2289041/arquivos/uso e cons.jpg";
            bannerImagem.alt = "Uso e Conservação";
            divBanner.append(bannerImagem);
            divBanner.append(document.querySelector("#breadcrumbs"));
            divBanner.append(document.querySelector("h1.titulo.cor-secundaria"));
            const destinoBanner = document.querySelector("#corpo");
            destinoBanner.prepend(divBanner);
        }

    } catch (e) {
        console.log(`Erro encontrado -> ${e.message}`);
    }
});
window.addEventListener('load', () => {
    'strict'
    try {
        if (window.location.pathname == '/pagina/envio-e-entrega.html') {
            const divBanner = document.createElement("div");
            divBanner.id = "banner-envio-e-entrega";
            const bannerImagem = document.createElement("img");
            bannerImagem.src = "https://cdn.awsli.com.br/1596/1596032/arquivos/Imagem-envio@2x.jpg";
            bannerImagem.alt = "Banner envio e entrega";
            divBanner.append(bannerImagem);
            divBanner.append(document.querySelector("#breadcrumbs"));
            divBanner.append(document.querySelector("h1.titulo.cor-secundaria"));
            const destinoBanner = document.querySelector("#corpo");
            destinoBanner.prepend(divBanner);
        }
    } catch (e) {
        console.log(`Erro encontrado envio e entrega -> ${e.message}`);
    }
});
window.addEventListener("load", () => {
  "strict";
  try {
    if (window.location.pathname == "/pagina/seguranca-e-privacidade.html") {
      const divBanner = document.createElement("div");
      divBanner.id = "banner-seguranca-e-privacidade";
      const bannerImagem = document.createElement("img");
      bannerImagem.src = segurancaEPrivacidadeBanner;
      bannerImagem.alt = "Banner trocas e devolucoes";
      divBanner.append(bannerImagem);
      divBanner.append(document.querySelector("#breadcrumbs"));
      // divBanner.append(document.querySelector("h1.titulo.cor-secundaria"));
      const destinoBanner = document.querySelector("#corpo");
      destinoBanner.prepend(divBanner);
    }
  } catch (erro) {
    console.log(`Erro encontrado na página de segurança e privacidade -> ${erro}`);
  }
});

window.addEventListener("load", () => {
  "strict";
  try {
    // function insereTextoFullBanners() {
      var textBanner1 = document.querySelector(".banner-text-01");
      var textBanner2 = document.querySelector(".banner-text-02");
      var textBanner3 = document.querySelector(".banner-text-03");

      var cloneTextBannerDesktop1 = textBanner1.cloneNode(true);
      var cloneTextBannerDesktop2 = textBanner2.cloneNode(true);
      var cloneTextBannerDesktop3 = textBanner3.cloneNode(true);

      // var cloneTextBannerMobile1 = textBanner1.cloneNode(true);
      // var cloneTextBannerMobile2 = textBanner2.cloneNode(true);
      // var cloneTextBannerMobile3 = textBanner3.cloneNode(true);

      document.querySelector('#full-banner .swiper-slide img[alt="Full_Banner_1_Desktop"]').after(cloneTextBannerDesktop1);
      document.querySelector("#full-banner .swiper-slide img[alt='Full_Banner_2_Desktop']").after(cloneTextBannerDesktop2);
      document.querySelector("#full-banner .swiper-slide img[alt='Full_Banner_3_Desktop']").after(cloneTextBannerDesktop3);

      // document.querySelector("#full-banner-mobile .swiper-slide img[alt='Full_Banner_2_Mobile']").after(cloneTextBannerMobile1);
      // document.querySelector("#full-banner-mobile .swiper-slide img[alt='Full_Banner_1_Mobile']").after(cloneTextBannerMobile2);
      // document.querySelector("#full-banner-mobile .swiper-slide img[alt='Full_Banner_2_Mobile']").after(cloneTextBannerMobile3);

      textBanner1.remove();
      textBanner2.remove();
      textBanner3.remove();
    // }
    // insereTextoFullBanners();

    // const nomeFull = document.querySelector('#full-banner .swiper-slide a img');
    // const atrib = nomeFull.getAttribute('alt');

    // const newsp = document.createElement('p');
    // newsp.classList.add('nome-banner');
    // newsp.style.position = 'absolute';
    // newsp.prepend(atrib);

    // nomeFull.before(newsp);

    // const nomeFull = document.querySelectorAll('#full-banner .swiper-slide a img');
    // for (let i = 0; i < nomeFull.length; i++) {

    //     let atrib = nomeFull.getAttribute('alt');

    //     const newsp = document.createElement('p');
    //     newsp.classList.add('nome-banner');
    //     newsp.style.position = 'absolute';
    //     newsp.prepend(atrib);

    //     nomeFull.before(newsp);
    //   }
    

  } catch (erro) {
    console.log(`Erro encontrado na página texto banner -> ${erro}`);
  }
});

const criarConteudoBarraInicial = (textoSlogan, urlImagemSlogan) => {
  // Adiciona texto na barra inicial
  const slogan = document.createElement("p");
  slogan.classList.add("slogan");
  slogan.innerHTML = textoSlogan;

  // Adiciona imagem na barra inicial
  const imagemSlogan = document.createElement("img");
  imagemSlogan.classList.add("imagemSlogan");
  imagemSlogan.src = urlImagemSlogan;
  imagemSlogan.alt = "imagem-slogan";

  // Seleciona barra inicial e adiciona elementos
  let barraInicialContainer = document.createElement("div");
  barraInicialContainer.classList.add("barra-inicial-container");
  barraInicialContainer.append(slogan);
  // barraInicialContainer.append(imagemSlogan);

  return barraInicialContainer;
};

// BACKUP DE LOGICA DE IMPLEMENTAÇÃO, INSERIR NAS PÁGINAS
window.addEventListener("load", () => {
  "strict";
  try {
    removerTudo(".barra-inicial .conteiner");
    removerTudo(".atalhos-mobile");
  } catch (error) {
    console.log(`Erro encontrado -> ${error}`);
  }
});

// REMOVEA STICKY BAR DO TOPO QUANDO SCROLL DOWN
window.addEventListener('load', () => {
    'strict'
    try {
        // Limpa barra topo
        removerTudo("#barraTopo");
    } catch (error) {
        console.log(`Erro encontrado -> ${error}`);
    }
});
const hoverMenuSuperiorAtendimento = () => {
  const el = document.querySelector(".box-atendimento-superior");
  el.classList.remove("displayNone");
};

const hoverOutMenuSuperiorAtendimento = () => {
  const el = document.querySelector(".box-atendimento-superior");
  el.classList.add("displayNone");
};

const hoverMenuSuperiorConta = () => {
  const el = document.querySelector(".box-minha-conta");
  el.classList.remove("displayNone");
};

const hoverOutMenuSuperiorConta = () => {
  const el = document.querySelector(".box-minha-conta");
  el.classList.add("displayNone");
};

const categ = document.querySelector("li.categoria-id-18037012 a");
const categTag = categ.getAttribute("title");
categTag.innerText = "Em breve";
/*
BARRA DE BUSCA NAV SUPERIOR
*/
const criarBarraBuscaNavSuperior = (placeholder, urlIconeBarraBusca) => {
  // Criar form
  const formBarraBusca = document.createElement("form");
  formBarraBusca.id = "form-buscar";
  formBarraBusca.action = "/buscar";
  formBarraBusca.method = "GET";

  // Criar input muitos são valores default da Loja Integrada *Cuidado
  const inputBarraBusca = document.createElement("input");
  inputBarraBusca.id = "auto-complete";
  inputBarraBusca.class = "ui-autocomplete-input";
  inputBarraBusca.type = "text";
  inputBarraBusca.name = "q";
  inputBarraBusca.placeholder = placeholder;
  inputBarraBusca.autocomplete = "off";

  // criar iframe
  // const cab = document.querySelector("#cabecalho");
  // const diviframe = document.createElement("div");
  // diviframe.classList.add("div-iframe");

  // const iframe = document.createElement("iframe");
  // iframe.classList.add("aqui-link");
  // diviframe.append(iframe);

  // cab.append(diviframe);

  // diviframe.style.position = "absolute";
  // diviframe.style.top = "50px";
  // diviframe.style.zIndex = "999999999999";
  // diviframe.style.display = "none";

  // Criar botão
  const botaoBarraBusca = document.createElement("button");
  botaoBarraBusca.classList.add("botao-nav-superior-puro");

  // Inserir imagem do ícone no botão
  const iconeBotaoBarraBusca = document.createElement("img");
  iconeBotaoBarraBusca.classList.add("icone-nav-superior-barra-busca");
  iconeBotaoBarraBusca.src = urlIconeBarraBusca;
  iconeBotaoBarraBusca.alt = "icone-pesquisar";
  botaoBarraBusca.append(iconeBotaoBarraBusca);

  // Appends
  formBarraBusca.append(botaoBarraBusca);
  formBarraBusca.append(inputBarraBusca);

  return formBarraBusca;
};

/*
NAV SUPERIOR
*/
const criarNavSuperior = (
  urlIconeAtendimento,
  urlIconeFavoritos,
  urlIconeConta,
  urlIconeCarrinho,
  infoTelefones,
  faleConosco,
  horariosAtendimento,
  envios,
  divBemVindoHTML,
  divMinhasInfosHTML
) => {
  /* 
    Criar barra de navegação superior 
    */
  const navSuperiorConteiner = document.createElement("div");
  navSuperiorConteiner.classList.add("nav-superior-conteiner");

  /* 
    Criar div atendimento 
    */
  const itemAtendimentoNavSuperior = document.createElement("div");
  itemAtendimentoNavSuperior.classList.add("item-nav", "atendimento-item");
  const iconeAtendimentoNavSuperior = document.createElement("img");
  iconeAtendimentoNavSuperior.src = urlIconeAtendimento;
  iconeAtendimentoNavSuperior.classList.add("icone-atendimento-nav");
  iconeAtendimentoNavSuperior.alt = "icone-atendimento";
  const spanAtendimentoNavSuperior = document.createElement("span");
  spanAtendimentoNavSuperior.classList.add("item-atendimento-superior");
  spanAtendimentoNavSuperior.innerHTML = "Atendimento";
  itemAtendimentoNavSuperior.onmouseover = hoverMenuSuperiorAtendimento;
  itemAtendimentoNavSuperior.onmouseleave = hoverOutMenuSuperiorAtendimento;

  // (1) Box hover atendimento
  const boxHoverAtendimento = document.createElement("div");
  boxHoverAtendimento.classList.add("displayNone", "box-atendimento-superior");
  // 2 criar div telefones
  const divTelefones = document.createElement("div");
  divTelefones.innerHTML = infoTelefones;
  // 2 criar div faleConosco
  const divFaleConosco = document.createElement("div");
  divFaleConosco.innerHTML = faleConosco;
  // 2 criar div Horários de atendimento
  const divHorariosAtendimento = document.createElement("div");
  divHorariosAtendimento.innerHTML = horariosAtendimento;
  // 2 criar div envios
  const divEnvios = document.createElement("div");
  divEnvios.innerHTML = envios;
  boxHoverAtendimento.append(divTelefones);
  boxHoverAtendimento.append(divFaleConosco);
  boxHoverAtendimento.append(divHorariosAtendimento);
  boxHoverAtendimento.append(divEnvios);
  spanAtendimentoNavSuperior.append(boxHoverAtendimento);
  // Adicionar icone e texto na div nível um atendimento
  itemAtendimentoNavSuperior.append(iconeAtendimentoNavSuperior);
  itemAtendimentoNavSuperior.append(spanAtendimentoNavSuperior);

  // Adicionar item atendimento na Nav Superior
  navSuperiorConteiner.append(itemAtendimentoNavSuperior);

  /*
    Criar div Favoritos
    */
  const itemFavoritosNavSuperior = document.createElement("div");
  itemFavoritosNavSuperior.classList.add("item-nav", "favoritos-item");
  const iconeFavoritosNavSuperior = document.createElement("img");
  iconeFavoritosNavSuperior.src = urlIconeFavoritos;
  iconeFavoritosNavSuperior.classList.add("icone-Favoritos-nav");
  iconeFavoritosNavSuperior.alt = "icone-Favoritos";
  const spanFavoritosNavSuperior = document.createElement("span");
  spanFavoritosNavSuperior.classList.add("item-Favoritos-superior");
  spanFavoritosNavSuperior.innerHTML =
    "<a href='/conta/favorito/listar'>Favoritos</a>";
  // Adicionar icone e texto na div nível um Favoritos
  itemFavoritosNavSuperior.append(iconeFavoritosNavSuperior);
  itemFavoritosNavSuperior.append(spanFavoritosNavSuperior);
  // Adicionar item Favoritos na Nav Superior
  navSuperiorConteiner.append(itemFavoritosNavSuperior);

  /*
    Criar div Minha Conta
    */
  const itemContaNavSuperior = document.createElement("div");
  itemContaNavSuperior.classList.add("item-nav", "conta-item");
  const iconeContaNavSuperior = document.createElement("img");
  iconeContaNavSuperior.src = urlIconeConta;
  iconeContaNavSuperior.classList.add("icone-Conta-nav");
  iconeContaNavSuperior.alt = "icone-Conta";
  const spanContaNavSuperior = document.createElement("span");
  spanContaNavSuperior.classList.add("item-Conta-superior");
  spanContaNavSuperior.innerHTML = "<a href='/conta/index'>Conta</a>";
  itemContaNavSuperior.onmouseover = hoverMenuSuperiorConta;
  itemContaNavSuperior.onmouseleave = hoverOutMenuSuperiorConta;
  // (1) Minha conta
  const minhaContaConteiner = document.createElement("div");
  minhaContaConteiner.classList.add("box-minha-conta", "displayNone");
  // 2 divBemVindo
  const divBemVindo = document.createElement("div");
  divBemVindo.classList.add("div-bem-vindo");
  divBemVindo.innerHTML = divBemVindoHTML;
  // 2 divMinhasInfos
  const divMinhasInfos = document.createElement("div");
  divMinhasInfos.classList.add("div-minhas-infos");
  divMinhasInfos.innerHTML = divMinhasInfosHTML;
  // 2->1
  minhaContaConteiner.append(divBemVindo);
  minhaContaConteiner.append(divMinhasInfos);
  spanContaNavSuperior.append(minhaContaConteiner);
  // Adicionar icone e texto na div nível um Conta
  itemContaNavSuperior.append(iconeContaNavSuperior);
  itemContaNavSuperior.append(spanContaNavSuperior);
  // Adicionar item Conta na Nav Superior
  navSuperiorConteiner.append(itemContaNavSuperior);

  /*
    Carrinho
    */

  const newcart = document.querySelector(".carrinho");
  newcart.src = urlIconeCarrinho;
  navSuperiorConteiner.append(newcart);

  return navSuperiorConteiner;
};

window.addEventListener("load", () => {
  "strict";
  try {
    if (paginaCheckout()) return;

    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // CABEÇALHO
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // NAV SUPERIOR
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Limpar nav superior
    // Selecionar a div conteudo-topo
    const conteudoTopo = document.getElementsByClassName("conteudo-topo")[0];
    // Limpar Bootstrap antigo
    conteudoTopo.classList.remove("span9");
    // Adicionar barra de busca
    conteudoTopo.append(
      criarBarraBuscaNavSuperior(
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Inserir dados aqui
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        textoSearchBar,
        iconeBuscar
      )
    );
    conteudoTopo.append(
      criarNavSuperior(
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Inserir dados aqui
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        iconeAtendimento,
        iconeFavoritos,
        iconeMinhaConta,
        iconeCarrinho,
        // Atendimentos
        `<p class="small-menu-superior">Atendimentos e televendas</p>
            <strong class="strong-menu-superior">(11) 91789-9515</strong><br>
            <p class="small-menu-superior">Ligações para fixos e celulares</p>`,
        // Fale consco
        `<p class="small-menu-superior">Fale conosco através do e-mail</p>
            <strong class="strong-menu-superior">dalpack@dalpack.com.br</strong>`,
        // Horários
        `<p class="small-menu-superior">Horários de atendimento</p>
            <strong class="strong-menu-superior">Seg a Sex 7h às 17h<br> Sábados 7h as 16h
            </strong>`,
        // Envios
        `<p class="small-menu-superior">Envio</p>
            <strong class="strong-menu-superior">Para todo Brasil</strong>`,
        `<img alt="avatar" src="${imagemAvatar}"></img >
            <h3 class="bem-vindo">Olá,<br>bem-vindo(a)!</h3>
            <a href="/conta/index" class="btn-minha-conta">Minha conta</a>`,
        `<div>
                <strong class="strong-minha-conta cadastroheader"><a href='/conta/index'>Cadastrar</a></strong><br><br>
                <strong class="strong-minha-conta pedidosheader"><a href='/conta/index'>Meus Pedidos</a></strong><br>
            </div>
            <div>
                <strong class="strong-minha-conta rastreioheader">Rastrear pedido</strong><br>
                <form action = "#" class="track-form">
                    <input type="text" id="code" placeholder="Código">

                    <button class="rastreiobutton">
                    </button>
                </form>
                
            </div>`
      )
    );

    // $(".rastreiobutton").click(
    //   function(){
    //     var numerorastreio = document.getElementById("code").value;
    //     // window.open("https://cnweb4.websiteseguro.com/logocn-integrada/correios.php?obj=" + numerorastreio);
    //     var link = 'https://cnweb4.websiteseguro.com/logocn-integrada/correios.php?obj=';

    //     const newfram = document.querySelector(".aqui-link")
    //     newfram.setAttribute("src", link + numerorastreio);

    //     $(".signature").remove;
    //     diviframe.style.display = "block";
    //   }
    // )
  } catch (error) {
    console.log(`Erro encontrado no nav superior -> ${error}`);
  }
});

// const auxVar = '';

// const megaMenuHoverOut = ({ target }) => {
//     const megaMenuConteiner = document.querySelector("#mega-menu");
//     megaMenuConteiner.classList.remove("displayBlock");

//     const megaMenuUm = document.querySelector(".ul-um");
//     const megaMenuDois = document.querySelector(".ul-dois");
//     const megaMenuTres = document.querySelector(".ul-tres");

//     megaMenuUm.innerHTML = '';
//     megaMenuDois.innerHTML = '';
//     megaMenuTres.innerHTML = '';
// }

// const megaMenuHover = ({ target }) => {
//     const megaMenuUm = document.querySelector(".ul-um");
//     const megaMenuDois = document.querySelector(".ul-dois");
//     const megaMenuTres = document.querySelector(".ul-tres");

//     let el = '';
//     if (target.tagName === "LI") {
//         el = target.querySelectorAll(".nivel-dois > li");
//     } else if (target.tagName === "STRONG") {
//         el = target.parentNode.parentNode.querySelectorAll(".nivel-dois > li");
//     } else if (target.tagName === "A") {
//         el = target.parentNode.querySelectorAll(".nivel-dois > li");
//     } else {
//         return;
//     }

//     if (!el) return;

//     if (!megaMenuUm.childElementCount) {
//         for (let i = 0; i < 13; i++) {
//             if (el[i] !== undefined) {
//                 megaMenuUm.append(el[i].cloneNode(true));
//                 megaMenuDois.style.left = `${el[0].offsetLeft}px`;
//             }
//         }
//     }

//     if (!megaMenuDois.childElementCount) {
//         for (let i = 13; i < 26; i++) {
//             if (el[i] !== undefined) {
//                 megaMenuDois.append(el[i].cloneNode(true));
//                 megaMenuDois.style.left = `${el[0].offsetLeft + (200 * 1)}px`;
//             }
//         }
//     }
//     if (!megaMenuTres.childElementCount) {
//         for (let i = 26; i < (el.length % 13) + 26; i++) {
//             if (el[i] !== undefined) {
//                 console.log(el[i]);
//                 megaMenuTres.append(el[i].cloneNode(true));
//                 megaMenuTres.style.left = `${el[0].offsetLeft + (200 * 2)}px`;
//                 console.log(el[0].offsetLeft);
//             }
//         }
//     }

//     const megaMenuConteiner = document.querySelector("#mega-menu");
//     megaMenuConteiner.classList.add("displayBlock");
// }

// const criarMegaMenuConteiners = () => {
//     const conteiner = document.createElement("div");
//     conteiner.style.position = 'absolute';
//     conteiner.id = "mega-menu";

//     const ulUm = document.createElement("ul");
//     ulUm.classList.add("ul-um", 'ul-mega-menu');
//     ulUm.style.position = 'absolute';
//     ulUm.style.top = '50px';
//     conteiner.append(ulUm);

//     const ulDois = document.createElement("ul");
//     ulDois.classList.add("ul-dois", 'ul-mega-menu');
//     ulDois.style.position = 'absolute';
//     ulDois.style.top = '50px';
//     conteiner.append(ulDois);

//     const ulTres = document.createElement("ul");
//     ulTres.classList.add("ul-tres", 'ul-mega-menu');
//     ulTres.style.position = 'absolute';
//     ulTres.style.top = '50px';
//     conteiner.append(ulTres);

//     return conteiner;

// }

// TIRA A CLASSE CONTEINER DO CABECALHO
window.addEventListener("load", () => {
  "strict";
  try {
    if (paginaCheckout()) return;
    // Remover classe conteiner do cabecalho
    let cabecalhoConteiner = document.querySelectorAll(
      "#cabecalho .conteiner"
    )[0];
    cabecalhoConteiner.classList.add("cabecalho-conteiner");

    const cabecalho = document.querySelector("#cabecalho");
    const menuSuperior = document.querySelector(".menu.superior");
    cabecalho.append(menuSuperior);

    const ulNivelDoisFem = document.querySelector(
      "li.categoria-id-17467695 .nivel-dois"
    );
    // const image1 = document.createElement("img");
    // image1.src = "https://cdn.awsli.com.br/2289/2289041/arquivos/Tenis drop 01.png";
    // ulNivelDoisFem.append(image1);
    const link = document.createElement("a");
    link.innerHTML = "Ver todos";
    link.href = "/perfumes";
    link.id = "link-ver-todos";
    ulNivelDoisFem.append(link);

    const ulNivelDoisMasc = document.querySelector(
      "li.categoria-id-17467698 .nivel-dois"
    );
    // const image2 = document.createElement("img");
    // image2.src = "https://cdn.awsli.com.br/2289/2289041/arquivos/sarna.png";
    // ulNivelDoisMasc.append(image2);
    const link2 = document.createElement("a");
    link2.innerHTML = "Ver todos";
    link2.href = "/cabelos";
    link2.id = "link-ver-todos";
    ulNivelDoisMasc.append(link2);
  } catch (error) {
    console.log(`Erro encontrado -> ${error}`);
  }
});

window.addEventListener("load", () => {
  "strict";
  try {
    if (window.screen.width <= 1366) {
      const menu = document.querySelectorAll(".menu.superior > ul > li");

      const metadeMenuLi = Math.ceil(menu.length / 2);

      const menuNivelUm = document.createElement("ul");
      menuNivelUm.setAttribute("class", "nivel-um");

      for (let i = 0; i < metadeMenuLi; i++) {
        menuNivelUm.appendChild(menu[i]);
      }

      document.querySelector(".menu.superior > ul").before(menuNivelUm);
    }
  } catch (error) {
    console.log(`Erro encontrado -> ${error}`);
  }
});

const fecharMenuDois = () => {
  const menuOverlayDois = document.querySelector("#overlay-menu-dois");
  menuOverlayDois.classList.remove("displayBlock");
};
const fecharMenuTres = () => {
  const menuOverlayTres = document.querySelector("#overlay-menu-tres");
  menuOverlayTres.classList.remove("displayBlock");
};

// const criarBotaoVoltar = () => {
//   const liVoltar = document.createElement("li");
//   const a = document.createElement("a");
//   a.innerHTML = "&larr; Voltar";
//   liVoltar.append(a);
//   liVoltar.onclick = fecharMenuTres;
//   return liVoltar;
// }

const criarMidiasMobile = (urlFacebook, urlYoutube, urlInstagram) => {
  const divMidias = document.createElement("div");
  divMidias.classList.add("midias-mobile");
  // 6 linkMidias
  const midiaFacebook = document.createElement("a");
  midiaFacebook.href = urlFacebook;
  midiaFacebook.classList.add("midias-item-mobile");
  // 7 icone facebook
  const iconeFacebook = document.createElement("i");
  iconeFacebook.classList.add("icon-facebook");
  // 7 criar span Facebook
  const spanFacebook = document.createElement("span");
  spanFacebook.textContent = "Facebook";
  // Appends 7->6
  midiaFacebook.append(iconeFacebook);
  midiaFacebook.append(spanFacebook);
  // 6 linkMidias
  const midiaYoutube = document.createElement("a");
  midiaYoutube.href = urlYoutube;
  midiaYoutube.classList.add("midias-item-mobile");
  // 7 icone facebook
  const iconeYoutube = document.createElement("i");
  iconeYoutube.classList.add("icon-youtube-play");
  // 7 criar span Youtube
  const spanYoutube = document.createElement("span");
  spanYoutube.textContent = "Youtube";
  // Appends 7->6
  midiaYoutube.append(iconeYoutube);
  midiaYoutube.append(spanYoutube);
  // 6 linkMidias
  const midiaInstagram = document.createElement("a");
  midiaInstagram.href = urlInstagram;
  midiaInstagram.classList.add("midias-item-mobile");
  // 7 icone facebook
  const iconeInstagram = document.createElement("i");
  iconeInstagram.classList.add("icon-instagram");
  // 7 criar span Instagram
  const spanInstagram = document.createElement("span");
  spanInstagram.textContent = "Instagram";
  // Appends 7->6
  midiaInstagram.append(iconeInstagram);
  midiaInstagram.append(spanInstagram);
  // Appends 6->5
  divMidias.append(midiaFacebook);
  divMidias.append(midiaYoutube);
  divMidias.append(midiaInstagram);

  return divMidias;
};

const criarOverlayMenu = () => {
  // 1 conteiner
  const conteiner = document.createElement("div");
  conteiner.id = "overlay-menu";
  // 2 bg menu
  const bgMenu = document.createElement("div");
  bgMenu.classList.add("bg-menu");
  bgMenu.onclick = abrirMenuMobile;
  // 2 ul nivel um
  const ulNivelUm = document.createElement("ul");
  ulNivelUm.classList.add("nivel-um");
  // 3 li minha conta
  const liMinhaConta = document.createElement("li");
  liMinhaConta.classList.add("minha-conta");
  // 4 link linha conta
  const linkMinhaConta = document.createElement("a");
  linkMinhaConta.href = "/conta/index";
  linkMinhaConta.textContent = "Minha conta";
  // 4->3
  liMinhaConta.append(linkMinhaConta);
  // 3->2
  ulNivelUm.append(liMinhaConta);
  // 2 -> 1
  conteiner.append(bgMenu);
  conteiner.append(ulNivelUm);

  return conteiner;
};

const criarOverlayMenuDois = () => {
  // 1 conteiner
  const conteiner = document.createElement("div");
  conteiner.id = "overlay-menu-dois";
  // 2 bg menu
  const bgMenu = document.createElement("div");
  bgMenu.classList.add("bg-menu-dois");
  bgMenu.onclick = fecharMenuDois;
  // 2 ul nivel um
  const ulNivelDois = document.createElement("ul");
  ulNivelDois.classList.add("nivel-dois");
  // 3 li minha conta
  const liVoltarDois = document.createElement("li");
  liVoltarDois.classList.add("voltar");
  // 4 p linha conta
  const linkVoltar = document.createElement("a");
  linkVoltar.innerHTML = "&larr; Voltar";
  linkVoltar.id = "botaoVoltar";
  // 4->3
  liVoltarDois.append(linkVoltar);
  // 3->2
  ulNivelDois.append(liVoltarDois);
  // 2 -> 1
  conteiner.append(bgMenu);
  conteiner.append(ulNivelDois);

  return conteiner;
};

const criarOverlayMenuTres = () => {
  // 1 conteiner
  const conteiner = document.createElement("div");
  conteiner.id = "overlay-menu-tres";
  // 2 bg menu
  const bgMenu = document.createElement("div");
  bgMenu.classList.add("bg-menu-tres");
  bgMenu.onclick = fecharMenuTres;
  // 2 ul nivel um
  const ulNivelTres = document.createElement("ul");
  ulNivelTres.classList.add("nivel-tres");
  // // 3 li minha conta
  const liVoltarTres = document.createElement("li");
  liVoltarTres.classList.add("voltar");
  // // 4 p linha conta
  const linkVoltar = document.createElement("a");
  linkVoltar.innerHTML = "&larr; Voltar";
  // // 4->3
  liVoltarTres.append(linkVoltar);
  // // 3->2
  ulNivelTres.append(liVoltarTres);
  // 2 -> 1
  conteiner.append(bgMenu);
  conteiner.append(ulNivelTres);
  return conteiner;
};

const abrirMenuMobile = () => {
  const menuOverlay = document.querySelector("#overlay-menu");
  menuOverlay.classList.toggle("displayBlock");

  const body = document.querySelector("body");
  body.classList.toggle("positionFixed");

  const menuOverlayDois = document.querySelector("#overlay-menu-dois");
  if (menuOverlayDois.classList.contains("displayBlock")) {
    menuOverlayDois.classList.remove("displayBlock");
  }
  const menuOverlayTres = document.querySelector("#overlay-menu-tres");
  if (menuOverlayTres.classList.contains("displayBlock")) {
    menuOverlayTres.classList.remove("displayBlock");
  }

  document
    .querySelectorAll("#menu-mobile .top #toggle-mobile span")
    .forEach((e) => e.classList.toggle("d-none"));
};

const capturarMenuNivelTres = (event) => {
  event.preventDefault();
  console.log(event.target.tagName);
  let menuOverlayTres = document.querySelector("#overlay-menu-tres");
  const cabecalho = document.querySelector("#cabecalho");
  if (menuOverlayTres) {
    menuOverlayTres.remove();
    cabecalho.append(criarOverlayMenuTres());
  }
  menuOverlayTres = document.querySelector("#overlay-menu-tres");
  menuOverlayTres.classList.toggle("displayBlock");
  const ulOverlayTres = document.querySelector("#overlay-menu-tres ul");
  if (event.target.tagName === "LI") {
    console.log(event.target);
    const todasLi = event.target.querySelector(".nivel-tres");
    ulOverlayTres.innerHTML += todasLi.innerHTML;
    console.log(event.target.tagName);
  } else if (event.target.tagName === "STRONG") {
    console.log(event.target.tagName);
    const todasLi =
      event.target.parentNode.parentNode.querySelector(".nivel-tres");
    ulOverlayTres.innerHTML += todasLi.innerHTML;
  } else if (event.target.tagName === "A") {
    console.log(event.target.tagName);
    const todasLi = event.target.parentNode.querySelector(".nivel-tres");
    ulOverlayTres.innerHTML += todasLi.innerHTML;
  }

  ulOverlayDois = document.querySelectorAll("#overlay-menu-tres ul > li");
  console.log(ulOverlayDois);
  for (let i = 0; i < ulOverlayDois.length; i++) {
    if (ulOverlayDois[i].classList.contains("voltar")) {
      ulOverlayDois[i].onclick = fecharMenuTres;
    }
  }
}  

const capturarMenuNivelDois = (event) => {
  event.preventDefault();
  let menuOverlayDois = document.querySelector("#overlay-menu-dois");
  const cabecalho = document.querySelector("#cabecalho");
  if (menuOverlayDois) {
    menuOverlayDois.remove();
    cabecalho.append(criarOverlayMenuDois());
  }
  menuOverlayDois = document.querySelector("#overlay-menu-dois");
  menuOverlayDois.classList.toggle("displayBlock");
  let ulOverlayDois = document.querySelector("#overlay-menu-dois ul");
  if (event.target.tagName === "LI") {
    console.log(event.target);
    const todasLi = event.target.querySelector(".nivel-dois");
    ulOverlayDois.innerHTML += todasLi.innerHTML;
  } else if (event.target.tagName === "STRONG") {
    const todasLi =
      event.target.parentNode.parentNode.querySelector(".nivel-dois");
    ulOverlayDois.innerHTML += todasLi.innerHTML;
  } else if (event.target.tagName === "A") {
    const todasLi = event.target.parentNode.querySelector(".nivel-dois");
    ulOverlayDois.innerHTML += todasLi.innerHTML;
  }
  ulOverlayDois = document.querySelectorAll("#overlay-menu-dois ul > li");
  for (let i = 0; i < ulOverlayDois.length; i++) {
    if (ulOverlayDois[i].classList.contains("voltar")) {
      ulOverlayDois[i].onclick = fecharMenuDois;
    } else if (ulOverlayDois[i].classList.contains("com-filho")) {
      ulOverlayDois[i].onclick = capturarMenuNivelTres;
    }
  }
};

const criarHeaderMobile = (
  urlSanduiche,
  urlLogo,
  urlCarrinho,
  urlLupa,
  textoSearchBar
) => {
  // 1 conteiner
  const conteiner = document.createElement("div");
  conteiner.id = "header-mobile";
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  // 2 elementos div
  const elementosDiv = document.createElement("div");
  elementosDiv.className = "elementos-header-mobile";
  // 3 imagem urlSanduiche
  const imagemSanduiche = document.createElement("img");
  imagemSanduiche.src = urlSanduiche;
  imagemSanduiche.alt = "Menu mobile";
  imagemSanduiche.classList.add("sanduiche-header-mobile");
  imagemSanduiche.onclick = abrirMenuMobile;
  // 3 imagem logo
  const linkLogo = document.createElement("a");
  linkLogo.href = "/";
  const imagemLogo = document.createElement("img");
  imagemLogo.src = urlLogo;
  imagemLogo.alt = "Logo Filip Jóias";
  imagemLogo.classList.add("logo-header-mobile");
  linkLogo.append(imagemLogo);
  // 3 imagem logo
  const linkCarrinho = document.createElement("a");
  linkCarrinho.href = "/carrinho/index";
  const imagemCarrinho = document.createElement("img");
  imagemCarrinho.src = urlCarrinho;
  imagemCarrinho.alt = "Carrinho Mosaico Acabamentos";
  imagemCarrinho.classList.add("carrinho-header-mobile");
  linkCarrinho.append(imagemCarrinho);
  // APPENDS 3->2
  elementosDiv.append(imagemSanduiche);
  elementosDiv.append(linkLogo);
  elementosDiv.append(linkCarrinho);
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //2 SearchForm
  const searchForm = document.createElement("form");
  searchForm.id = "form-buscar";
  searchForm.action = "/buscar";
  searchForm.method = "GET";
  // 3 const botaoSearchMobile
  const botaoSearchMobile = document.createElement("button");
  botaoSearchMobile.id = "botao-search-mobile";
  // 4 imagemBuscar
  const iconeBuscar = document.createElement("img");
  iconeBuscar.classList.add("icone-buscar-mobile");
  iconeBuscar.alt = "buscar";
  iconeBuscar.src = urlLupa;
  // 4->3
  botaoSearchMobile.append(iconeBuscar);
  // 3 inputSearchForm
  const inputSearchMobile = document.createElement("input");
  inputSearchMobile.id = "auto-complete";
  inputSearchMobile.type = "text";
  inputSearchMobile.name = "q";
  inputSearchMobile.placeholder = textoSearchBar;
  inputSearchMobile.autocomplete = "off";
  // 3->2
  searchForm.append(botaoSearchMobile);
  searchForm.append(inputSearchMobile);
  // 2->1
  conteiner.append(elementosDiv);
  conteiner.append(searchForm);

  return conteiner;
};

window.addEventListener("load", () => {
  "strict";
  try {
    const cabecalho = document.querySelector("#cabecalho");
    const menuMobile = document.querySelector(".menu.superior ul.nivel-um").innerHTML;
    cabecalho.prepend(
      criarHeaderMobile(
        iconeSanduiche,
        logoCliente,
        iconeCarrinho,
        iconeBuscar,
        textoSearchBar
      )
    );
    cabecalho.append(criarOverlayMenu());
    cabecalho.append(criarOverlayMenuDois());
    cabecalho.append(criarOverlayMenuTres());


    // ADICIONAR MENUS NA OVERLAY PARA O MOBILE
    const ulOverlay = document.querySelector("#overlay-menu ul");
    ulOverlay.innerHTML += menuMobile;
    ulOverlay.append(criarMidiasMobile(facebook, youtube, instagram));
    // Pegar LIs nivel um
    const liNivelUm = document.querySelectorAll(
      "#overlay-menu ul > li.com-filho"
    );
    for (let i = 0; i < liNivelUm.length; i++) {
      liNivelUm[i].onclick = capturarMenuNivelDois;
    }
    const fetchLogin = async () => {
      const botaoLogout = document.querySelector("#botaoLogout");
      const response = await fetch(`${urlSiteCliente}/conta/index`);
      // Transforma pra texto
      const responseText = await response.text();
      // Transforma pra HTML
      const parser = new DOMParser();
      const html = parser.parseFromString(responseText, "text/html");
      // Pega os links com o ID
      let minhaConta = html.querySelector(`.minha-conta`);
      minhaConta
        ? (botaoLogout.style.display = "block")
        : (botaoLogout.style.display = "none");
    };

    const iconesRight = document.querySelectorAll(".icon-chevron-right");

    iconesRight.forEach(icone => icone.classList.remove("fundo-secundario"));

    fetchLogin();
  } catch (erro) {
    console.log(`Erro mobile header encontrado -> ${erro}`);
  }
});

// Criar Full Banner Desktop
const criarFullBannerDesktop = () => {
    // Criar full banner conteiner 
    const fullBannerDesktopConteiner = document.createElement("div");
    fullBannerDesktopConteiner.id = "full-banner";
    fullBannerDesktopConteiner.classList.add("swiper");

    // Criar swiper desktop wrapper
    const fullBannerDesktopWrapper = document.createElement("div");
    fullBannerDesktopWrapper.classList.add("swiper-wrapper");

    // Criar swiper desktop pagination
    const fullBannerDesktopPagination = document.createElement("div");
    fullBannerDesktopPagination.classList.add("swiper-pagination");

    // Criar swiper button prev
    const fullBannerDesktopButtonPrev = document.createElement("div");
    fullBannerDesktopButtonPrev.classList.add("swiper-button-prev");

    // Criar swiper button next
    const fullBannerDesktopButtonNext = document.createElement("div");
    fullBannerDesktopButtonNext.classList.add("swiper-button-next");

    // Fazer os appends no conteiner
    fullBannerDesktopConteiner.append(fullBannerDesktopWrapper);
    fullBannerDesktopConteiner.append(fullBannerDesktopPagination);
    fullBannerDesktopConteiner.append(fullBannerDesktopButtonPrev);
    fullBannerDesktopConteiner.append(fullBannerDesktopButtonNext);

    return fullBannerDesktopConteiner;
}

// Criar Full Banner Mobile
const criarFullBannerMobile = () => {
    // Criar full banner conteiner 
    const fullBannerMobileConteiner = document.createElement("div");
    fullBannerMobileConteiner.id = "full-banner-mobile";
    fullBannerMobileConteiner.classList.add("swiper");

    // Criar swiper Mobile wrapper
    const fullBannerMobileWrapper = document.createElement("div");
    fullBannerMobileWrapper.classList.add("swiper-wrapper");

    // Criar swiper Mobile pagination
    const fullBannerMobilePagination = document.createElement("div");
    fullBannerMobilePagination.classList.add("swiper-pagination");

    // Criar swiper button prev
    const fullBannerMobileButtonPrev = document.createElement("div");
    fullBannerMobileButtonPrev.classList.add("swiper-button-prev");

    // Criar swiper button next
    const fullBannerMobileButtonNext = document.createElement("div");
    fullBannerMobileButtonNext.classList.add("swiper-button-next");

    // Fazer os appends no conteiner
    fullBannerMobileConteiner.append(fullBannerMobileWrapper);
    fullBannerMobileConteiner.append(fullBannerMobilePagination);
    fullBannerMobileConteiner.append(fullBannerMobileButtonPrev);
    fullBannerMobileConteiner.append(fullBannerMobileButtonNext);

    return fullBannerMobileConteiner;
}

// Cria stripe banner
const criarStripeBanner = (
    [urlImagemUm, paragrafoUm, strongUm],
    [urlImagemDois, paragrafoDois, strongDois],
    [urlImagemTres, paragrafoTres, strongTres],
    [urlImagemQuatro, paragrafoQuatro, strongQuatro]) => {

    // Criar stripe conteiner
    const stripeBannerConteiner = document.createElement("div");
    stripeBannerConteiner.id = "stripe-banner";

    // Adicionar divmobile 1
    const divMobile1 = document.createElement("div");
    divMobile1.id = "div-mobile-1";
    // Criar primeiro elemento conteiner
    const elementoUmStripeBannerConteiner = document.createElement("div");
    // Criar imagem elemento um
    const imagemElementoUmStripeBanner = document.createElement("img");
    imagemElementoUmStripeBanner.src = urlImagemUm;
    imagemElementoUmStripeBanner.alt = `${paragrafoUm}${strongUm}`;
    // Criar divs conteiner para os textos
    const elementoUmTextoConteiner = document.createElement("div");
    // Criar paragrafo elemento um
    const paragrafoElementoUmStripe = document.createElement("p");
    paragrafoElementoUmStripe.innerHTML = paragrafoUm;
    // Criar strong elemento um
    const strongElementoUmStripe = document.createElement("strong");
    strongElementoUmStripe.innerHTML = strongUm;
    elementoUmTextoConteiner.append(paragrafoElementoUmStripe);
    elementoUmTextoConteiner.append(strongElementoUmStripe);
    // Appends Elemento UM
    elementoUmStripeBannerConteiner.append(imagemElementoUmStripeBanner);
    elementoUmStripeBannerConteiner.append(elementoUmTextoConteiner);
    divMobile1.append(elementoUmStripeBannerConteiner);
    /* 
    Criar segundo elemento conteiner
    */
    const elementoDoisStripeBannerConteiner = document.createElement("div");
    // Criar imagem elemento um
    const imagemElementoDoisStripeBanner = document.createElement("img");
    imagemElementoDoisStripeBanner.src = urlImagemDois;
    imagemElementoDoisStripeBanner.alt = `${paragrafoDois}${strongDois}`;
    // Criar divs conteiner para os textos
    const elementoDoisTextoConteiner = document.createElement("div");
    // Criar paragrafo elemento um
    const paragrafoElementoDoisStripe = document.createElement("p");
    paragrafoElementoDoisStripe.innerHTML = paragrafoDois;
    // Criar strong elemento um
    const strongElementoDoisStripe = document.createElement("strong");
    strongElementoDoisStripe.innerHTML = strongDois;
    // Appends
    elementoDoisTextoConteiner.append(paragrafoElementoDoisStripe);
    elementoDoisTextoConteiner.append(strongElementoDoisStripe);
    // Appends Elemento Dois
    elementoDoisStripeBannerConteiner.append(imagemElementoDoisStripeBanner);
    elementoDoisStripeBannerConteiner.append(elementoDoisTextoConteiner);
    divMobile1.append(elementoDoisStripeBannerConteiner);

    // Adicionar divmobile 2
    const divMobile2 = document.createElement("div");
    divMobile2.id = "div-mobile-2";
    /* 
    Criar terceiro elemento conteiner
    */
    const elementoTresStripeBannerConteiner = document.createElement("div");
    // Criar imagem elemento um
    const imagemElementoTresStripeBanner = document.createElement("img");
    imagemElementoTresStripeBanner.src = urlImagemTres;
    imagemElementoTresStripeBanner.alt = `${paragrafoTres}${strongTres}`;
    // Criar divs conteiner para os textos
    const elementoTresTextoConteiner = document.createElement("div");
    // Criar paragrafo elemento um
    const paragrafoElementoTresStripe = document.createElement("p");
    paragrafoElementoTresStripe.innerHTML = paragrafoTres;
    // Criar strong elemento um
    const strongElementoTresStripe = document.createElement("strong");
    strongElementoTresStripe.innerHTML = strongTres;
    // Appends
    elementoTresTextoConteiner.append(paragrafoElementoTresStripe);
    elementoTresTextoConteiner.append(strongElementoTresStripe);
    // Appends Elemento Dois
    elementoTresStripeBannerConteiner.append(imagemElementoTresStripeBanner);
    elementoTresStripeBannerConteiner.append(elementoTresTextoConteiner);
    divMobile2.append(elementoTresStripeBannerConteiner);
    /* 
    Criar quarto elemento conteiner
    */
    const elementoQuatroStripeBannerConteiner = document.createElement("div");
    // Criar imagem elemento um
    const imagemElementoQuatroStripeBanner = document.createElement("img");
    imagemElementoQuatroStripeBanner.src = urlImagemQuatro;
    imagemElementoQuatroStripeBanner.alt = `${paragrafoQuatro}${strongQuatro}`;
    // Criar divs conteiner para os textos
    const elementoQuatroTextoConteiner = document.createElement("div");
    // Criar paragrafo elemento um
    const paragrafoElementoQuatroStripe = document.createElement("p");
    paragrafoElementoQuatroStripe.innerHTML = paragrafoQuatro;
    // Criar strong elemento um
    const strongElementoQuatroStripe = document.createElement("strong");
    strongElementoQuatroStripe.innerHTML = strongQuatro;
    // Appends
    elementoQuatroTextoConteiner.append(paragrafoElementoQuatroStripe);
    elementoQuatroTextoConteiner.append(strongElementoQuatroStripe);
    // Appends Elemento Dois
    elementoQuatroStripeBannerConteiner.append(imagemElementoQuatroStripeBanner);
    elementoQuatroStripeBannerConteiner.append(elementoQuatroTextoConteiner);
    divMobile2.append(elementoQuatroStripeBannerConteiner);

    // Append todos os elementos no container principal
    stripeBannerConteiner.append(divMobile1);
    stripeBannerConteiner.append(divMobile2);

    return stripeBannerConteiner;
}
window.addEventListener("load", () => {
  "strict";

  function favoritesFunctionality() {
    let nodeProdutos = document.querySelectorAll(
      "[data-trustvox-product-code]"
    );
    // let nodeProdutos = document.querySelectorAll(".");

    // Icon creation
    let icon = document.createElement("img");
    let iconLink = document.createElement("a");

    // Verificar favoritos existentes
    async function getFavoritesId() {
      let favoritesId = [];
      // Request
      const response = await fetch(
        "/conta/favorito/listar"
      );
      // Transforma pra texto
      const responseText = await response.text();
      // Transforma pra HTML
      const parser = new DOMParser();
      const html = parser.parseFromString(responseText, "text/html");
      // Pega os links com o ID
      let linksArray = html.querySelectorAll(`a[href$='remover']`);
      // Pega os ids dos links e adiciona no array
      for (let i = 0; i < linksArray.length; i++) {
        let href = linksArray[i].getAttribute("href");
        let favoriteId = href.match("[0-9]{9}");
        favoritesId.push(favoriteId[0]);
      }
      return favoritesId;
    }

    // Adicionar icones
    async function insertIcons() {
      let arrayIdFavoritos = await getFavoritesId();
      // Insere icones favoritos nos produtos
      for (let i = 0; i < nodeProdutos.length; i++) {
        let boxProdutoId = nodeProdutos[i].getAttribute(
          "data-trustvox-product-code"
        );
        let divPai = nodeProdutos[i].closest("article");
        let elementoIcon = iconLink.cloneNode(true);
        let elementoImage = icon.cloneNode(true);

        for (let j = 0; j < arrayIdFavoritos.length; j++) {
          if (parseInt(boxProdutoId) === parseInt(arrayIdFavoritos[j])) {
            elementoImage.src =
              "https://cdn.awsli.com.br/2256/2256296/arquivos/icon-favoritos-conta.svg";
            elementoImage.className = "icone-favorito-2";
            elementoIcon.href = `/conta/favorito/${boxProdutoId}/remover`;
            break;
          } else {
            elementoImage.src =
              "https://cdn.awsli.com.br/1595/1595002/arquivos/Icon-heart.svg";
            elementoImage.className = "icone-favorito";
            elementoIcon.href = `/conta/favorito/${boxProdutoId}/adicionar`;
          }
        }
        // Check if user was logged on request
        if (!arrayIdFavoritos.length) {
          elementoImage.src =
            "https://cdn.awsli.com.br/1595/1595002/arquivos/Icon-heart.svg";
          elementoImage.className = "icone-favorito";
          elementoIcon.href = `/conta/favorito/${boxProdutoId}/adicionar`;
        }
        elementoIcon.className = "favorite-conteiner";
        elementoIcon.append(elementoImage);
        divPai.append(elementoIcon);
      }
      iconLink.remove();
      icon.remove();
    }
    // Execução
    insertIcons();
  }
  favoritesFunctionality();
});

const criarModelProductBox = (textoSmallPreco, textoBotaoCTA) => {
  // 1 CRIAR ARTICLE
  const articleProductBox = document.createElement("article");
  articleProductBox.classList.add("product-box");
  articleProductBox.id = "model-product-box";
  // 2 CRIAR LINK
  const linkProductBox = document.createElement("a");
  linkProductBox.href = "";
  // 3 CRIAR SPAN BANDEIRAS-PRODUTO
  const spanBandeirasProduto = document.createElement("span");
  spanBandeirasProduto.classList.add("bandeiras-produto");

  // 3 CRIAR SPAN BOOKMARKS
  const spanBookmarks = document.createElement("span");
  spanBookmarks.classList.add("bookmarks");
  // 3 CRIAR FIGURE
  const figure = document.createElement("figure");
  // 4 CRIAR IMAGEM COVER
  const imagemFigureCover = document.createElement("img");
  imagemFigureCover.src = "";
  imagemFigureCover.classList.add("cover");
  imagemFigureCover.alt = "";
  // 4 CRIAR IMAGEM HOVER
  const imagemFigureHover = document.createElement("img");
  imagemFigureHover.src = "";
  imagemFigureHover.classList.add("hover");
  imagemFigureHover.alt = "";
  // APPEND 4 -> 3
  figure.append(imagemFigureCover);
  figure.append(imagemFigureHover);

  // 2 DIV TITULO
  const divTitulo = document.createElement("div");
  divTitulo.classList.add("product-title");
  // 3 Div stars
  const divStars = document.createElement("div");
  divStars.classList.add("stars");
  // 3 h2 titulo do produto
  const h2Titulo = document.createElement("h2");
  h2Titulo.classList.add("cor-secundaria");
  h2Titulo.textContent = "Título do produto";
  // 3 -> 2 APPENDS
  divTitulo.append(divStars);
  divTitulo.append(h2Titulo);

  // 2 PRODUCT PRICE
  const productPriceDiv = document.createElement("div");
  productPriceDiv.classList.add("product-price");
  // 3 SPAN CONTEINER
  const spanConteiner = document.createElement("span");
  // 4 small preço from do produto
  const pPrecoFromProduto = document.createElement("p");
  pPrecoFromProduto.classList.add("product-original");
  pPrecoFromProduto.textContent = "";
  // 4 h2 preço do produto
  const h2PrecoProduto = document.createElement("h2");
  h2PrecoProduto.textContent = "";
  // 4 criar small
  const smallPrecoProduto = document.createElement("small");
  smallPrecoProduto.textContent = textoSmallPreco;
  // 4 criar strong preco a vista
  const strongPrecoAVista = document.createElement("strong");
  strongPrecoAVista.classList.add("preco-a-vista");
  // Appends 4 -> 3
  spanConteiner.append(pPrecoFromProduto);
  spanConteiner.append(h2PrecoProduto);
  spanConteiner.append(smallPrecoProduto);
  spanConteiner.append(strongPrecoAVista);
  // 3 SPAN 2 CONTEINER
  const spanConteiner2 = document.createElement("span");
  // spanConteiner2.classList.add("show-product");
  // spanConteiner2.innerHTML = "Veja mais";
  // APPENDS 3 -> 2
  productPriceDiv.append(spanConteiner);
  // productPriceDiv.append(spanConteiner2);

  linkProductBox.append(spanBandeirasProduto);
  linkProductBox.append(spanBookmarks);
  linkProductBox.append(figure);
  linkProductBox.append(divTitulo);
  linkProductBox.append(productPriceDiv);

  articleProductBox.append(linkProductBox);

  return articleProductBox;
};

const criarCarrossel = (urlImagemSeta) => {
    // 1 Criar div exterior
    const carrosselConteiner = document.createElement("div");
    carrosselConteiner.id = "product-carousel";

    // 2 Criar div de dentro
    const swiperConteiner = document.createElement("div");
    swiperConteiner.classList.add("conteiner");

    // 3 Criar div Swiper
    const swiperDiv = document.createElement("div");
    swiperDiv.classList.add("swiper", "product-slider");
    // 4 Criar div swiper wrapper
    const swiperWrapper = document.createElement("div");
    swiperWrapper.classList.add("swiper-wrapper");
    // Append 4 -> 3
    swiperDiv.append(swiperWrapper);
    // 3 Criar swiper-button-prev
    const swiperPrev = document.createElement("div");
    swiperPrev.classList.add("swiper-button-prev");
    // 4 Criar imagem arrow-left
    const imagemPrev = document.createElement("img");
    imagemPrev.alt = "Slide Anterior";
    imagemPrev.src = urlImagemSeta;
    // Append 4 -> 3
    swiperPrev.append(imagemPrev);
    // 3 Criar swiper-button-next
    const swiperNext = document.createElement("div");
    swiperNext.classList.add("swiper-button-next");
    // 4 Criar imagem arrow-left
    const imagemNext = document.createElement("img");
    imagemNext.alt = "Próximo Slide";
    imagemNext.src = urlImagemSeta;
    imagemNext.style.transform = "rotate(180deg)";
    // Append 4 -> 3
    swiperNext.append(imagemNext);

    // Appends 3 -> 2
    swiperConteiner.append(swiperDiv);
    swiperConteiner.append(swiperPrev);
    swiperConteiner.append(swiperNext);

    // Appends 2 -> 1
    carrosselConteiner.append(swiperConteiner);

    return carrosselConteiner;
}
// CRIAR BANNER DESTAQUES DESKTOP
const criarBannerDestaquesDesktop = (
  urlElementoUm,
  urlElementoDois,
  urlElementoTres,
  urlElementoQuatro,
  titleElementoUm,
  titleElementoDois,
  titleElementoTres,
  titleElementoQuatro,
  textoBtnElementoUm,
  textoBtnElementoDois,
  textoBtnElementoTres,
  textoBtnElementoQuatro,
  linkBtnElementoUm,
  linkBtnElementoDois,
  linkBtnElementoTres,
  linkBtnElementoQuatro
) => {
  // CRIAR CONTEINER
  const bannerDestaqueDesktopConteiner = document.createElement("div");
  bannerDestaqueDesktopConteiner.id = "banner-destaques";

  // CRIAR PRIMEIRO ELEMENTO
  // -> criar conteiner
  const conteinerUmBannerDestaques = document.createElement("a");
  conteinerUmBannerDestaques.classList.add("destaques-banners");
  // conteinerUmBannerDestaques.href = "/categoria/bonecas-e-acessorios.html";

  // -> criar titulo e btn
  const divBannerUm = document.createElement("div");
  const titleBannerUm = document.createElement("h4");
  const linkTextoBannerUm = document.createElement("a");

  divBannerUm.classList.add("destaques-banners-text");
  titleBannerUm.classList.add("destaques-banners-title");

  if (titleElementoUm.length > 0) {
    titleBannerUm.innerText = titleElementoUm;
    divBannerUm.append(titleBannerUm);
  }

  if (textoBtnElementoUm.length > 0) {
    linkTextoBannerUm.classList.add("destaques-banners-btn");
    linkTextoBannerUm.innerText = textoBtnElementoUm;
    linkTextoBannerUm.href = linkBtnElementoUm;
    divBannerUm.append(linkTextoBannerUm);
  }

  // -> criar imagem um
  const imagemUmBannerDestaques = document.createElement("img");
  imagemUmBannerDestaques.src = urlElementoUm;
  // -> append imagem no conteiner e texto
  conteinerUmBannerDestaques.append(imagemUmBannerDestaques);
  conteinerUmBannerDestaques.append(divBannerUm);

  // CRIAR SEGUNDO ELEMENTO
  // -> criar conteiner
  const conteinerDoisBannerDestaques = document.createElement("a");
  conteinerDoisBannerDestaques.classList.add("destaques-banners");
  // conteinerDoisBannerDestaques.href = "/categoria/decoracao.html";

  // -> criar titulo e btn
  const divBannerDois = document.createElement("div");
  const titleBannerDois = document.createElement("h4");
  const linkTextoBannerDois = document.createElement("a");

  divBannerDois.classList.add("destaques-banners-text");
  titleBannerDois.classList.add("destaques-banners-title");

  if (titleElementoDois.length > 0) {
    titleBannerDois.innerText = titleElementoDois;
    divBannerDois.append(titleBannerDois);
  }

  if (textoBtnElementoDois.length > 0) {
    linkTextoBannerDois.classList.add("destaques-banners-btn");
    linkTextoBannerDois.innerText = textoBtnElementoDois;
    linkTextoBannerDois.href = linkBtnElementoDois;
    divBannerDois.append(linkTextoBannerDois);
  }

  // -> criar imagem
  const imagemDoisBannerDestaques = document.createElement("img");
  imagemDoisBannerDestaques.src = urlElementoDois;
  // -> append imagem no conteiner
  conteinerDoisBannerDestaques.append(imagemDoisBannerDestaques);
  conteinerDoisBannerDestaques.append(divBannerDois);

  // CRIAR TERCEIRO ELEMENTO
  // -> criar conteiner
  const conteinerTresBannerDestaques = document.createElement("a");
  conteinerTresBannerDestaques.classList.add("destaques-banners");
  // conteinerTresBannerDestaques.href = "/jogos-de-tabuleiro";

  // -> criar titulo e btn
  const divBannerTres = document.createElement("div");
  const titleBannerTres = document.createElement("h4");
  const linkTextoBannerTres = document.createElement("a");

  divBannerTres.classList.add("destaques-banners-text");
  titleBannerTres.classList.add("destaques-banners-title");

  if (titleElementoTres.length > 0) {
    titleBannerTres.innerText = titleElementoTres;
    divBannerTres.append(titleBannerTres);
  }

  if (textoBtnElementoTres.length > 0) {
    linkTextoBannerTres.classList.add("destaques-banners-btn");
    linkTextoBannerTres.innerText = textoBtnElementoTres;
    linkTextoBannerTres.href = linkBtnElementoTres;
    divBannerTres.append(linkTextoBannerTres);
  }

  // -> criar imagem
  const imagemTresBannerDestaques = document.createElement("img");
  imagemTresBannerDestaques.src = urlElementoTres;
  // -> append imagem no conteiner
  conteinerTresBannerDestaques.append(imagemTresBannerDestaques);
  conteinerTresBannerDestaques.append(divBannerTres);

  // CRIAR QUARTO ELEMENTO
  // -> criar conteiner
  const conteinerQuatroBannerDestaques = document.createElement("a");
  conteinerQuatroBannerDestaques.classList.add("destaques-banners");
  // conteinerQuatroBannerDestaques.href = "/arte-papelaria-e-armarinho";

  // -> criar titulo e btn
  const divBannerQuatro = document.createElement("div");
  const titleBannerQuatro = document.createElement("h4");
  const linkTextoBannerQuatro = document.createElement("a");

  divBannerQuatro.classList.add("destaques-banners-text");
  titleBannerQuatro.classList.add("destaques-banners-title");

  if (titleElementoQuatro.length > 0) {
    titleBannerQuatro.innerText = titleElementoQuatro;
    divBannerQuatro.append(titleBannerQuatro);
  }

  if (textoBtnElementoQuatro.length > 0) {
    linkTextoBannerQuatro.classList.add("destaques-banners-btn");
    linkTextoBannerQuatro.innerText = textoBtnElementoQuatro;
    linkTextoBannerQuatro.href = linkBtnElementoQuatro;
    divBannerQuatro.append(linkTextoBannerQuatro);
  }

  // -> criar imagem
  const imagemQuatroBannerDestaques = document.createElement("img");
  imagemQuatroBannerDestaques.src = urlElementoQuatro;
  // -> append imagem no conteiner
  conteinerQuatroBannerDestaques.append(imagemQuatroBannerDestaques);
  conteinerQuatroBannerDestaques.append(divBannerQuatro);

  // Append geeral no conteiner
  bannerDestaqueDesktopConteiner.append(conteinerUmBannerDestaques);
  bannerDestaqueDesktopConteiner.append(conteinerDoisBannerDestaques);
  bannerDestaqueDesktopConteiner.append(conteinerTresBannerDestaques);
  bannerDestaqueDesktopConteiner.append(conteinerQuatroBannerDestaques);

  return bannerDestaqueDesktopConteiner;
};

// CRIAR SECAO SAIBA MAIS
const criarSecaoSaibaMais = (textoH2, textoParagrafo, textoBotao, urlImagem) => {
    // CRIAR CONTEINER
    const secaoSaibaMaisConteiner = document.createElement("div");
    secaoSaibaMaisConteiner.id = "secao-saiba-mais";

    // CRIAR CONTEINER INFO
    const secaoSaibaMaisInfoConteiner = document.createElement("div");
    // CRIAR H2
    const secaoSaibaMaisInfoH2 = document.createElement("h2");
    secaoSaibaMaisInfoH2.innerHTML = textoH2;
    // CRIAR PARAGRAFO
    const secaoSaibaMaisInfoParagrafo = document.createElement("p");
    secaoSaibaMaisInfoParagrafo.innerHTML = textoParagrafo;
    // CRIAR BOTAO
    const linkBotao = document.createElement("a");
    linkBotao.href = "/pagina/quem-somos.html";
    const secaoSaibaMaisInfoBotao = document.createElement("button");
    secaoSaibaMaisInfoBotao.innerHTML = textoBotao;
    linkBotao.append(secaoSaibaMaisInfoBotao);
    // APPENDS CONTEINER INFO
    secaoSaibaMaisInfoConteiner.append(secaoSaibaMaisInfoH2);
    secaoSaibaMaisInfoConteiner.append(secaoSaibaMaisInfoParagrafo);
    secaoSaibaMaisInfoConteiner.append(linkBotao);

    // CRIAR DIV 2 DO CONTEINER MAIOR
    const secaoSaibaMaisImagemConteiner = document.createElement("div");
    // CRIAR IMAGEM
    const secaoSaibaMaisImagem = document.createElement("img");
    secaoSaibaMaisImagem.alt = "imagem saiba mais";
    secaoSaibaMaisImagem.src = urlImagem;
    // APPEND IMAGEM
    secaoSaibaMaisImagemConteiner.append(secaoSaibaMaisImagem);

    // APPENDS NO CONTEINER MAIOR
    secaoSaibaMaisConteiner.append(secaoSaibaMaisInfoConteiner);
    secaoSaibaMaisConteiner.append(secaoSaibaMaisImagemConteiner);


    return secaoSaibaMaisConteiner;
}


const criarBannerDestaqueInferior = (
  urlImagemBannerDestaque,
  textoMenor,
  textoMaior,
  textoBotao,
  link
) => {
  // 1 CRIAR CONTEINER
  const bannerDestaqueInferiorContainer = document.createElement("a");
  // bannerDestaqueInferiorContainer.href = '/ofertas'
  bannerDestaqueInferiorContainer.classList.add("banner-destaque-inferior");
  // 2 CRIAR IMAGEM
  const imagemBannerDestaqueInferior = document.createElement("img");
  imagemBannerDestaqueInferior.classList.add("imagem-destaque-inferior");
  imagemBannerDestaqueInferior.src = urlImagemBannerDestaque;
  imagemBannerDestaqueInferior.alt = "banner destaque inferior";
  bannerDestaqueInferiorContainer.href = link;

  // 2 CRIAR DIV PARA TEXTO
  const divTextos = document.createElement("div");
  divTextos.classList.add("div-banner-inferior");

  // // 3 CRIAR PARAGRAFO
  const paragrafo = document.createElement("p");
  paragrafo.classList.add("paragrafo-banner-inferior");
  paragrafo.innerHTML = textoMenor;

  // // 3 CRIAR STRONG
  const strong = document.createElement("strong");
  strong.classList.add("strong-banner-inferior");
  strong.innerHTML = textoMaior;

  // // APPENDS 3->2
  divTextos.append(paragrafo);
  divTextos.append(strong);

  // // 2 CRIAR BOTAO
  const botao = document.createElement("a");
  botao.classList.add("botao-banner-inferior");
  botao.textContent = textoBotao;
  botao.href = link;
  divTextos.append(botao);

  // APPEND 2->1
  bannerDestaqueInferiorContainer.append(imagemBannerDestaqueInferior);
  bannerDestaqueInferiorContainer.append(divTextos);
  // bannerDestaqueInferiorContainer.append(botao);

  return bannerDestaqueInferiorContainer;
};

// const criarBannerDestaqueCategoria = (urlImagemBannerDestaque) => {
//   // 1 CRIAR CONTEINER
//   const bannerDestaqueInferiorCont = document.createElement("div");
//   bannerDestaqueInferiorCont.classList.add("banner-destaque-inferior");
//   // 2 CRIAR IMAGEM
//   const imagemBannerDestaqueInf = document.createElement("img");
//   imagemBannerDestaqueInf.classList.add("imagem-destaque-inferior");
//   imagemBannerDestaqueInf.src = urlImagemBannerDestaque;
//   imagemBannerDestaqueInf.alt = "banner destaque inferior ca";

//   // // 2 CRIAR DIV PARA TEXTO
//   // const divTextos = document.createElement("div");
//   // divTextos.classList.add("div-banner-inferior");
//   // // 3 CRIAR PARAGRAFO
//   // const paragrafo = document.createElement("p");
//   // paragrafo.classList.add("paragrafo-banner-inferior");
//   // paragrafo.innerHTML = textoMenor;
//   // // 3 CRIAR STRONG
//   // const strong = document.createElement("strong");
//   // strong.classList.add("strong-banner-inferior");
//   // strong.innerHTML = textoMaior;
//   // APPENDS 3->2

//   // divTextos.append(paragrafo);
//   // divTextos.append(strong);
//   // 2 CRIAR BOTAO

//   // const botao = document.createElement("button");
//   // botao.classList.add("botao-banner-inferior");
//   // botao.textContent = textoBotao;

//   // APPEND 2->1
//   bannerDestaqueInferiorCont.append(imagemBannerDestaqueInf);

//   return bannerDestaqueInferiorCont;
// };

// const containerImagem = document.querySelector(
//   ".pagina-categoria #listagemProdutos"
// );

// containerImagem.after(criarBannerDestaqueInferior(bannerDestaqueInferior));

const criarModalFaleConosco = () => {
    // 1 conteiner
    const conteiner = document.createElement("div");
    conteiner.id = "fale-conosco-div";
    // 2 form conteiner
    const formConteiner = document.createElement("div");
    formConteiner.id = "form-conteiner";
    // 3 h2 fale conosco
    const h2FaleConosco = document.createElement("h2");
    h2FaleConosco.innerHTML = "Fale Conosco";
    const subtituloFaleConosco = document.createElement("p");
    subtituloFaleConosco.textContent = "Por favor, preencha os dados abaixo."
    // 3 label nome
    const labelNome = document.createElement("p");
    labelNome.textContent = "Nome";
    // 3 input nome
    const inputNome = document.createElement("input");
}
window.addEventListener("load", () => {
  const footerZ = document.querySelector("#footer");
  const whats = document.createElement("a");
  whats.innerHTML = `<img src='https://cdn.awsli.com.br/2289/2289041/arquivos/Icon.svg' alt ="whats" />`;

  // const boxWhats = document.createElement("div");
  // boxWhats.classList.add("box-whats");

  // boxWhats.innerHTML = `<div class="content-whats">
  //     <ul>
  //         <li>
  //             <a href="https://api.whatsapp.com/send?phone=551147570111" target="_blank">
  //               SAC
  //             </a>
  //         </li>
  //         <li>
  //             <a href="https://api.whatsapp.com/send?phone=5511917899204" target="_blank">
  //               Comercial
  //             </a>
  //         </li>
  //         </ul>
  //     </div>`;

  // boxWhats.style.display = "none";

  // whats.addEventListener("click", function () {
  //   if (boxWhats.style.display === "none") {
  //     boxWhats.style.display = "block";
  //   } else {
  //     boxWhats.style.display = "none";
  //   }
  // });

  whats.href = "https://api.whatsapp.com/send?phone=5511917899515";
  whats.id = "whats";
  whats.target = "_blank";
  footerZ.append(whats);
  whats.after(boxWhats);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJzY3JpcHRzLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gVXJsIHNpdGUgY2xpZW50ZVxyXG5jb25zdCB1cmxTaXRlQ2xpZW50ZSA9IFwiaHR0cHM6Ly9kYWxwYWNrLWVtYmFsYWdlbnMubG9qYWludGVncmFkYS5jb20uYnIvXCI7XHJcbmNvbnN0IGZhY2Vib29rID0gXCJodHRwczovL3d3dy5mYWNlYm9vay5jb20vI1wiO1xyXG5jb25zdCBpbnN0YWdyYW0gPSBcImh0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vI1wiO1xyXG5jb25zdCB5b3V0dWJlID0gXCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tLyNcIjtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBOdW1lcmFjw6NvIGRhcyBpbWFnZW5zIGRvIHBhaW5lbFxyXG5jb25zdCBudW1QYWluZWwgPSBcIjIyNTYvMjI1NjI5NlwiO1xyXG4vLyAtLVNldGFzXHJcbmNvbnN0IHVybFNldGEgPSBgaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzIyNTYvMjI1NjI5Ni9hcnF1aXZvcy9pY29uczgtbGVzcy10aGFuLTMyLnBuZ2A7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gVXNlcmJhY2tcclxuY29uc3QgYXBpVG9rZW4gPVxyXG4gIFwiNzYwM3w3MjM4OXxZNkhzc1JPY3N2ekVtUjBhZ1NRUGVWQ0FkWTNuYzdmdUcxRkI2UmZnZG1ZdzQ5QkRRNFwiO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIExvZ29zXHJcbmNvbnN0IGxvZ29DbGllbnRlTmVnYXRpdmEgPVxyXG4gIFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzIxNjEvMjE2MTM3OC9hcnF1aXZvcy9sb2dvLnBuZ1wiO1xyXG5jb25zdCBsb2dvTG9qYUludGVncmFkYSA9XHJcbiAgXCJodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL2xvZ28tZm9vdGVyLWxvamEtaW50ZWdyYWRhLWRlc2t0b3Auc3ZnXCI7XHJcbmNvbnN0IGxvZ29NZW50b3JlcyA9XHJcbiAgXCJodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL2xvZ28tZm9vdGVyLW1lbnRvcmVzLWRlc2t0b3Auc3ZnXCI7XHJcbmNvbnN0IGxvZ29DbGllbnRlID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvTG9nbyAtIFB1cm8ucG5nXCI7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gTGlua3MgcmVkZXMgc29jaWFpc1xyXG5jb25zdCBsaW5rQ2xpZW50ZUZhY2Vib29rID0gXCJodHRwczovL3d3dy5mYWNlYm9vay5jb20vZGFscGFja2VtYmFsYWdlbnMvXCI7XHJcbmNvbnN0IGxpbmtDbGllbnRlSW5zdGFncmFtID0gXCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL2RhbHBhY2tlbWJhbGFnZW5zL1wiO1xyXG5jb25zdCBsaW5rQ2xpZW50ZVlvdXR1YmUgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL0BEYWxwYWNrRW1iYWxhZ2Vuc1wiO1xyXG5jb25zdCBsaW5rQ2xpZW50ZVRpa1RvayA9IFwiaHR0cHM6Ly93d3cudGlrdG9rLmNvbS9AZGFscGFja2VtYmFsYWdlbVwiO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIEluZm9ybWHDp8O1ZXMgY2xpZW50ZVxyXG5jb25zdCB0ZWxlZm9uZUNsaWVudGUgPSBcIigxMSkgOTE3ODktOTUxNVwiO1xyXG5jb25zdCBob3JhcmlvRnVuY2lvbmFtZW50byA9IFwiU2VnIGEgU2V4IC0gZGFzIDdoIMOgcyAxN2hcIjtcclxuY29uc3QgcmF6YW9Tb2NpYWwgPSBcIkRhbHBhY2sgQ29tZXJjaW8gRWxldHJvbmljbyBMVERBXCI7XHJcbmNvbnN0IGNucGpFbmRlcmVjbyA9XHJcbiAgXCJDTlBKOiA0Mi40NTguNTAxLzAwMDEtNjY8YnI+IEVzdHJhZGEgTXVyaWxvIGRlIEFsbWVpZGEgUGFzc29zLCA5ODAgLSBHYWxww6NvIDU8YnI+IC0gRS1jb21tZXJjZSBEYWxwYWNrLCBWaWxhIEluZHVzdHJpYWwsIDxicj5Cb20gSmVzdXMgZG9zIFBlcmTDtWVzLCBTUCAtIDEyOTU1LTAwMFwiO1xyXG5jb25zdCBkZXNjcml0aXZvTmVnb2NpbyA9XHJcbiAgXCJBIERhbHBhY2sgw6kgdW1hIGVtcHJlc2EgcXVlIGZhYnJpY2EgZSB2ZW5kZSBlbWJhbGFnZW5zLiBFbSBjb25zdGFudGUgY3Jlc2NpbWVudG8gcHJvY3VyYSBhZ29yYSBzZSBhbG9jYXIgbm9zIG1hcmtldHBsYWNlcyBlIEUtQ29tbWVyY2UgZSB2ZW5kZXIgYWluZGEgbWFpcyBvbi1saW5lIVwiO1xyXG5jb25zdCBkZXNjcml0aXZvSW5mZXJpb3IgPVxyXG4gIFwiRGFscGFjayBDb21lcmNpbyBFbGV0cm9uaWNvIExUREEgfCBDTlBKOiA0Mi40NTguNTAxLzAwMDEtNjY8YnI+IEVuZGVyZcOnbzogRXN0cmFkYSBNdXJpbG8gZGUgQWxtZWlkYSBQYXNzb3MsIDk4MCAtIEdhbHDDo28gNSA8YnI+RS1jb21tZXJjZSBEYWxwYWNrLCBWaWxhIEluZHVzdHJpYWwsIEJvbSBKZXN1cyBkb3MgUGVyZMO1ZXMsIFNQIC0gMTI5NTUtMDAwXCI7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gQmFuZGVpcmFzIGNhcnTDo29cclxuY29uc3QgYmFuZGVpcmFBbWV4ID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvcGd0by1hbWVyaWNhbmV4cHJlc3MucG5nXCI7XHJcbmNvbnN0IGJhbmRlaXJhRGluZXJzID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvcGd0by1kaW5lcnMucG5nXCI7XHJcbmNvbnN0IGJhbmRlaXJhRWxvID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvcGd0by1lbG8ucG5nXCI7XHJcbmNvbnN0IGFuZGVpcmFIaXBlcmNhcmQgPVxyXG4gIFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzIyNTYvMjI1NjI5Ni9hcnF1aXZvcy9wZ3RvLWhpcGVyY2FyZC1wYi5wbmdcIjtcclxuY29uc3QgYmFuZGVpcmFNYXN0ZXJjYXJkID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvcGd0by1NYXN0ZXJjYXJkLnBuZ1wiO1xyXG5jb25zdCBiYW5kZWlyYVZpc2EgPVxyXG4gIFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzIyNTYvMjI1NjI5Ni9hcnF1aXZvcy9wZ3RvLXZpc2EucG5nXCI7XHJcbmNvbnN0IGJhbmRlaXJhQm9sZXRvID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvcGd0by1jb2RlLnBuZ1wiO1xyXG5jb25zdCBiYW5kZWlyYURpbmhlaXJvID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvcGd0by1tb25leS5wbmdcIjtcclxuY29uc3QgYmFuZGVpcmFQaXggPVxyXG4gIFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzIyNTYvMjI1NjI5Ni9hcnF1aXZvcy9wZ3RvLXBpeC1wYi5wbmdcIjtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBTZWxvIGNvbXByYSBzZWd1cmFcclxuY29uc3Qgc2Vsb0NvbXByYVNlZ3VyYSA9XHJcbiAgXCJodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL3NlbG8tY29tcHJhc2VndXJhLnN2Z1wiO1xyXG5jb25zdCBzZWxvR29vZ2xlID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3Mvc2Vsby1nb29nbGUtc2FmZS1icm93c2luZy5zdmdcIjtcclxuY29uc3Qgc2Vsb01lcmNhZG9saXZyZSA9XHJcbiAgXCJodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL3NlbG8tbWVyY2Fkb2xpdnJlLW5vdm8ucG5nXCI7XHJcbmNvbnN0IHNlbG9Db3JyZWlvcyA9XHJcbiAgXCJodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL3NlbG8tY29ycmVpb3Muc3ZnXCI7XHJcbmNvbnN0IHNlbG9PcGluaW9lcyA9XHJcbiAgXCJodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL3NlbG8tb3BpbmlvZXMtbm92by5wbmdcIjtcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIFNlbG9zIGhlYWRlciBjaGVja291dFxyXG5jb25zdCBzZWxvQ29tcHJhU2VndXJhQ2hlY2tvdXQgPVxyXG4gIFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzIyNTYvMjI1NjI5Ni9hcnF1aXZvcy9zZWxvLWNvbXByYXNlZ3VyYS1jaGVja291dC5zdmdcIjtcclxuY29uc3Qgc2Vsb0dvb2dsZUNoZWNrb3V0ID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3Mvc2Vsby1nb29nbGUtc2FmZS1icm93c2luZy1jaGVja291dC5zdmdcIjtcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIC0tTmF2YmFyIGUgw41jb25lc1xyXG5jb25zdCBpY29uZUF0ZW5kaW1lbnRvID0gYGh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8ke251bVBhaW5lbH0vYXJxdWl2b3MvY2hhdC5zdmdgO1xyXG5jb25zdCBpY29uZUZhdm9yaXRvcyA9IGBodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvJHtudW1QYWluZWx9L2FycXVpdm9zL2hlYXJ0LnN2Z2A7XHJcbmNvbnN0IGljb25lTWluaGFDb250YSA9IGBodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvJHtudW1QYWluZWx9L2FycXVpdm9zL3VzZXIuc3ZnYDtcclxuY29uc3QgaWNvbmVDYXJyaW5obyA9IGBodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvJHtudW1QYWluZWx9L2FycXVpdm9zL2ljb24tY2FycmluaG8uc3ZnYDtcclxuY29uc3QgaWNvbmVTYW5kdWljaGUgPVxyXG4gIFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzIyNTYvMjI1NjI5Ni9hcnF1aXZvcy9idXR0b24tbWVudS5zdmdcIjtcclxuY29uc3QgaWNvbmVCdXNjYXIgPSBgaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLyR7bnVtUGFpbmVsfS9hcnF1aXZvcy9pY29uLXNlYXJjaC5zdmdgO1xyXG5jb25zdCB0ZXh0b1NlYXJjaEJhciA9IFwiRmHDp2Egc3VhIHBlc3F1aXNhIGFxdWlfXCI7XHJcbmNvbnN0IGljb25lUGxheVZpZGVvID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8xNTk1LzE1OTUwMDIvYXJxdWl2b3MvYnV0dG9uLXBsYXkucG5nXCI7XHJcbmNvbnN0IGljb25lTG9nb3V0ID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8xNTk1LzE1OTUwMDIvYXJxdWl2b3MvaWNvbi1leGl0LnN2Z1wiO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIC0tU2xvZ2FuXHJcbmNvbnN0IGljb25lU2xvZ2FuID0gXCJcIjtcclxuLy8gY29uc3QgbWVuc2FnZW1TbG9nYW4gPSBcIlN1cGVyIHByb21vw6fDo28gZGUgTGFuw6dhbWVudG8gQ2xpcXVlIGFxdWkgZSBjb25maXJhXCI7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gQ29sb2NhciBjb2RpZ28gbm8gcGFpbmVsIGNvbSBvIG5vbWUgLSBtaWRCYW5uZXJzLUNvbmZpZ3MgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBCYW5uZXIgRGVzdGFxdWVzIERlc2t0b3BcclxuLy8gY29uc3QgYmFubmVyRGVzdGFxdWVVbSA9IGBodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL21pZC1iYW5uZXItMS1kZXNrdG9wLnBuZ2A7XHJcbi8vIGNvbnN0IGJhbm5lckRlc3RhcXVlRG9pcyA9IGBodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL21pZC1iYW5uZXItMi1kZXNrdG9wLnBuZ2A7XHJcbi8vIGNvbnN0IGJhbm5lckRlc3RhcXVlVHJlcyA9IGBodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI1Ni8yMjU2Mjk2L2FycXVpdm9zL21pZC1iYW5uZXItMy1kZXNrdG9wLnBuZ2A7XHJcbi8vIGNvbnN0IGJhbm5lckRlc3RhcXVlUXVhdHJvID0gYGh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvbWlkLWJhbm5lci00LWRlc2t0b3AucG5nYDtcclxuXHJcbi8vIGNvbnN0IHRpdGxlRWxlbWVudG9VbSA9IFwiXCI7XHJcbi8vIGNvbnN0IHRpdGxlRWxlbWVudG9Eb2lzID0gXCJcIjtcclxuLy8gY29uc3QgdGl0bGVFbGVtZW50b1RyZXMgPSBcIlwiO1xyXG4vLyBjb25zdCB0aXRsZUVsZW1lbnRvUXVhdHJvID0gXCJcIjtcclxuLy8gY29uc3QgdGV4dG9CdG5FbGVtZW50b1VtID0gXCJcIjtcclxuLy8gY29uc3QgdGV4dG9CdG5FbGVtZW50b0RvaXMgPSBcIlwiO1xyXG4vLyBjb25zdCB0ZXh0b0J0bkVsZW1lbnRvVHJlcyA9IFwiXCI7XHJcbi8vIGNvbnN0IHRleHRvQnRuRWxlbWVudG9RdWF0cm8gPSBcIlwiO1xyXG4vLyBjb25zdCBsaW5rQnRuRWxlbWVudG9VbSA9IFwiL3N1cGVybWVyY2Fkby1wYWRhcmlhL3BhcGVsLWFjb3BsYWRvXCI7XHJcbi8vIGNvbnN0IGxpbmtCdG5FbGVtZW50b0RvaXMgPSBcIi9zYWNvcy1wYXJhLXRhbGhlclwiO1xyXG4vLyBjb25zdCBsaW5rQnRuRWxlbWVudG9UcmVzID0gXCIvc2Fjby1rcmFmdC1wYW8tbm9zc29cIjtcclxuLy8gY29uc3QgbGlua0J0bkVsZW1lbnRvUXVhdHJvID0gXCIvc2Fjb2xhcy1rcmFmdC1zb3NcIjtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBTZWNhbyBTYWliYU1haXNcclxuY29uc3QgaDJTZWNhb1NhaWJhTWFpcyA9IFwiTsOzcyBzb21vcyBhIERhbHBhY2tcIjtcclxuY29uc3QgcGFyYWdyYWZvU2VjYW9TYWliYU1haXMgPVxyXG4gIFwiQSBEYWxwYWNrIMOpIHVtYSBlbXByZXNhIHF1ZSBmYWJyaWNhIGUgdmVuZGUgZW1iYWxhZ2Vucy4gRW0gY29uc3RhbnRlIGNyZXNjaW1lbnRvIHByb2N1cmEgYWdvcmEgc2UgYWxvY2FyIG5vcyBtYXJrZXRwbGFjZXMgZSBFLUNvbW1lcmNlIGUgdmVuZGVyIGFpbmRhIG1haXMgb24tbGluZSEgUG9yIHNlciB1bWEgZW1wcmVzYSBmYWJyaWNhbnRlIGNvbnRhIGNvbSBhbGd1bnMgZG9zIG1lbGhvcmVzIHByZcOnb3MgZW0gc2V1cyBwcm9kdXRvcyBlIGNvbSBxdWFsaWRhZGUgaW1wZWPDoXZlbC4gQWzDqW0gZG8gc2l0ZSBwcsOzcHJpbywgasOhIHNvbW9zIHN1Y2Vzc28gZW0gb3V0cm9zIG1hcmtlcGxhY2VzLCBjb21vLCBBbWVyaWNhbmFzLCBNYWdhemluZSBMdWl6YSwgTWVyY2FkbyBMaXZyZSwgU2hvcGVlLCBlbnRyZSBvdXRyb3MsIHBvc3NpYmlsaXRhbmRvIGFzIG1lbGhvcmVzIHBvc3NpYmlsaWRhZGVzIGRlIGNvbXByYSBlIGVudHJlZ2EgcGFyYSBub3Nzb3MgY2xpZW50ZXMuXCI7XHJcbmNvbnN0IHRleHRvQm90YW9TYWliYU1haXMgPSBcIlNhaWJhIG1haXNcIjtcclxuY29uc3QgaW1hZ2VtU2VjYW9TYWliYU1haXMgPSBgaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLyR7bnVtUGFpbmVsfS9hcnF1aXZvcy9pbWFnZW0tYWJvdXQtZGVza3RvcC5wbmdgO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIFNlY2FvIFN0cmlwZSBCYW5uZXJzIGh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvSWNvbiBmZWF0aGVyLXBhY2thZ2Uuc3ZnXHJcbmNvbnN0IHVybEljb25lVW1TdHJpcGUgPSBgaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLyR7bnVtUGFpbmVsfS9hcnF1aXZvcy9JY29uIGZlYXRoZXItcGFja2FnZS5zdmdgO1xyXG5jb25zdCBwYXJhZ3JhZm9VbVN0cmlwZSA9IFwiUHJvZHV0b3MgYVwiO1xyXG5jb25zdCBzdHJvbmdVbVN0cmlwZSA9IFwicHJvbnRhIGVudHJlZ2FcIjtcclxuLy9cclxuY29uc3QgdXJsSWNvbmVEb2lzU3RyaXBlID0gYGh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8ke251bVBhaW5lbH0vYXJxdWl2b3MvSWNvbiBtZXRyby1zdGFyLWVtcHR5LnN2Z2A7XHJcbmNvbnN0IHBhcmFncmFmb0RvaXNTdHJpcGUgPSBcIlBlcnNvbmFsaXphw6fDo29cIjtcclxuY29uc3Qgc3Ryb25nRG9pc1N0cmlwZSA9IFwiZGEgZW1iYWxhZ2VtXCI7XHJcbi8vXHJcbmNvbnN0IHVybEljb25lVHJlc1N0cmlwZSA9IGBodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvJHtudW1QYWluZWx9L2FycXVpdm9zL2ljb24tZGVzdGFxdWUtMDMtZGVza3RvcC5zdmdgO1xyXG5jb25zdCBwYXJhZ3JhZm9UcmVzU3RyaXBlID0gXCJFbnZpbyBwYXJhXCI7XHJcbmNvbnN0IHN0cm9uZ1RyZXNTdHJpcGUgPSBcInRvZG8gbyBCcmFzaWxcIjtcclxuLy9cclxuY29uc3QgdXJsSWNvbmVRdWF0cm9TdHJpcGUgPSBgaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLyR7bnVtUGFpbmVsfS9hcnF1aXZvcy9pY29uLXZhbnRhZ2VtLTQuc3ZnYDtcclxuY29uc3QgcGFyYWdyYWZvUXVhdHJvU3RyaXBlID0gXCJDZXJ0aWZpY2FkbyBTU0xcIjtcclxuY29uc3Qgc3Ryb25nUXVhdHJvU3RyaXBlID0gXCIxMDAlIHNlZ3Vyb1wiO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gQmFubmVyIERlc3RhcXVlIEluZmVyaW9yIC0gQ29sb2NhciBlc3NhcyB2YXJpYXZlaXMgbm8gcGFpbmVsIGRhIGxvamEgaW50ZWdyYWRhLiBOb21lIGRvIGFycXVpdm8gYmFubmVyRm9vdGVyLUNvbmZpZ3MvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIGNvbnN0IGJhbm5lckRlc3RhcXVlSW5mZXJpb3IgPSBgaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLyR7bnVtUGFpbmVsfS9hcnF1aXZvcy9iYW5uZXItYm90dG9tLWRlc2t0b3AucG5nYDtcclxuLy8gY29uc3QgYmFubmVyRGVzdGFxdWVJbmZlcmlvck1vYmlsZSA9IGBodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvJHtudW1QYWluZWx9L2FycXVpdm9zL2Jhbm5lci1ib3R0b20tbW9iaWxlQDJ4LnBuZ2A7XHJcbi8vIGNvbnN0IHRleHRvQmFubmVyRGVzdGFxdWVJbmZlcmlvciA9IFwiQ29uaGXDp2EgRGlzY28gRWx5c2l1bTtcIjtcclxuLy8gY29uc3QgcG9yY2VudEJhbm5lckRlc3RhcXVlSW5mZXJpb3IgPSBcIlRoZSBGaW5hbCBDdXQhXCI7XHJcbi8vIGNvbnN0IGN0YUJhbm5lckRlc3RhcXVlSW5mZXJpb3IgPSBcIkNvbXByYXIgYWdvcmFcIjtcclxuLy8gY29uc3QgbGlua0Jhbm5lckRlc3RhcXVlSW5mZXJpb3IgPSBcIi9vZmVydGFcIjtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBQw6FnaW5hIExvZ2luXHJcbmNvbnN0IGltYWdlbURpcmVpdGEgPSBcIlwiO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIFDDoWdpbmEgQ2FkYXN0cm9cclxuY29uc3QgYm90YW9DYWRhc3RyYXJFbmRlcmVjbyA9IGBbaHJlZj0nJHt1cmxTaXRlQ2xpZW50ZX1jb250YS9lbmRlcmVjby9jcmlhciddYDtcclxuY29uc3QgaW1hZ2VtQXZhdGFyID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvYXZhdGFyLWNhYmVjYWxoby11c2VyLWRlc2t0b3AucG5nXCI7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gUMOhZ2luYSBRdWVtLXNvbW9zXHJcbmNvbnN0IHF1ZW1Tb21vc0Jhbm5lciA9XHJcbiAgXCJodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjE2MS8yMTYxMzc4L2FycXVpdm9zL3F1ZW0tc29tb3MucG5nXCI7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gUMOhZ2luYSBQZXJndW50YXMgRnJlcXVlbnRlc1xyXG5jb25zdCBwZXJndW50YXNGcmVxdWVudGVzQmFubmVyID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMTYxLzIxNjEzNzgvYXJxdWl2b3MvcGVyZ3VudGFzLWZyZXF1ZW50ZXMucG5nXCI7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gUMOhZ2luYSBQcml2YWNpZGFkZSBlIFNlZ3VyYW7Dp2FcclxuY29uc3Qgc2VndXJhbmNhRVByaXZhY2lkYWRlQmFubmVyID1cclxuICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMTYxLzIxNjEzNzgvYXJxdWl2b3Mvc2VndXJhbmMtYS1lLXByaXZhY2lkYWRlLnBuZ1wiO1xyXG5cbi8vIFZlcmlmaWNhIHNlIHRlbSBhIGNsYXNzZVxyXG5mdW5jdGlvbiB0ZW1DbGFzc2Uoc2VsZWN0b3IsIGNsYXNzTmFtZSkge1xyXG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcclxufVxyXG5cclxuLy8gSW1wcmltZSB1bSBpdGVtXHJcbmZ1bmN0aW9uIHByaW50KGl0ZW0pIHtcclxuICBjb25zb2xlLmxvZyhpdGVtKTtcclxufVxyXG5cclxuLy8gQ29udmVydGUgdGV4dG8gZW0gSFRNTFxyXG5jb25zdCBzdHJpbmdUb0hUTUwgPSAoc3RyKSA9PiB7XHJcbiAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG4gIGNvbnN0IGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoc3RyLCBcInRleHQvaHRtbFwiKTtcclxuICByZXR1cm4gZG9jLmJvZHk7XHJcbn07XHJcblxyXG4vLyBWZXJpZmljYSBww6FnaW5hc1xyXG5mdW5jdGlvbiBwYWdpbmFQcm9kdXRvKCkge1xyXG4gIHJldHVybiB0ZW1DbGFzc2UoXCJib2R5XCIsIFwicGFnaW5hLXByb2R1dG9cIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZ2luYUNvbnRldWRvKCkge1xyXG4gIHJldHVybiB0ZW1DbGFzc2UoXCJib2R5XCIsIFwicGFnaW5hLXBhZ2luYVwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hSW5pY2lhbCgpIHtcclxuICByZXR1cm4gdGVtQ2xhc3NlKFwiYm9keVwiLCBcInBhZ2luYS1pbmljaWFsXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdpbmFDYWRhc3RybygpIHtcclxuICByZXR1cm4gdGVtQ2xhc3NlKFwiYm9keVwiLCBcInBhZ2luYS1jYWRhc3Ryb1wiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hSW5zdGl0dWNpb25hbCgpIHtcclxuICByZXR1cm4gdGVtQ2xhc3NlKFwiYm9keVwiLCBcInBhZ2luYS1wYWdpbmFcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZ2luYUNhdGVnb3JpYSgpIHtcclxuICByZXR1cm4gdGVtQ2xhc3NlKFwiYm9keVwiLCBcInBhZ2luYS1jYXRlZ29yaWFcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZ2luYUJ1c2NhKCkge1xyXG4gIHJldHVybiB0ZW1DbGFzc2UoXCJib2R5XCIsIFwicGFnaW5hLWJ1c2NhXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdpbmFMb2dpbigpIHtcclxuICByZXR1cm4gdGVtQ2xhc3NlKFwiYm9keVwiLCBcInBhZ2luYS1sb2dpblwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hQ2FycmluaG8oKSB7XHJcbiAgcmV0dXJuIChcclxuICAgIHRlbUNsYXNzZShcImJvZHlcIiwgXCJwYWdpbmEtY2FycmluaG9cIikgJiZcclxuICAgICF0ZW1DbGFzc2UoXCJib2R5XCIsIFwiY2FycmluaG8tY2hlY2tvdXRcIilcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdpbmFDaGVja291dCgpIHtcclxuICByZXR1cm4gdGVtQ2xhc3NlKFwiYm9keVwiLCBcImNhcnJpbmhvLWNoZWNrb3V0XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc1BhZ2luYXNEYUNvbnRhKCkge1xyXG4gIHZhciB0ZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiLnBhZ2luYS1jb250YSwgLnBhZ2luYS1wZWRpZG8tbGlzdGFyLCAucGFnaW5hLWZhdm9yaXRvLWxpc3RhciwgLnBhZ2luYS1wZWRpZG8sIC5wYWdpbmEtY29udGEtZW5kZXJlY29cIlxyXG4gICk7XHJcbiAgcmV0dXJuICEhdGVtcDtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hQ29udGEoKSB7XHJcbiAgcmV0dXJuIHRlbUNsYXNzZShcImJvZHlcIiwgXCJwYWdpbmEtY29udGFcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZ2luYVBlZGlkb0FiZXJ0bygpIHtcclxuICByZXR1cm4gdGVtQ2xhc3NlKFwiYm9keVwiLCBcInBhZ2luYS1wZWRpZG9cIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZ2luYU1pbmhhQ29udGEoKSB7XHJcbiAgcmV0dXJuIChcclxuICAgIHRlbUNsYXNzZShcImJvZHlcIiwgXCJwYWdpbmEtY29udGFcIikgJiZcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PSBcIi9jb250YS9pbmRleFwiXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hRWRpdGFyRW5kZXJlY28oKSB7XHJcbiAgcmV0dXJuIChcclxuICAgIHRlbUNsYXNzZShcImJvZHlcIiwgXCJwYWdpbmEtY29udGEtZW5kZXJlY29cIikgJiZcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PSBcIi9jb250YS9lbmRlcmVjby9jcmlhclwiXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hRWRpdGFyTWluaGFDb250YSgpIHtcclxuICByZXR1cm4gKFxyXG4gICAgdGVtQ2xhc3NlKFwiYm9keVwiLCBcInBhZ2luYS1jb250YVwiKSAmJlxyXG4gICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09IFwiL2NvbnRhL2VkaXRhclwiXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hQWx0ZXJhclNlbmhhKCkge1xyXG4gIHJldHVybiAoXHJcbiAgICB0ZW1DbGFzc2UoXCJib2R5XCIsIFwicGFnaW5hLWNvbnRhXCIpICYmXHJcbiAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT0gXCIvY29udGEvYWx0ZXJhcl9zZW5oYVwiXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hUGVkaWRvTGlzdGFyKCkge1xyXG4gIHJldHVybiAoXHJcbiAgICB0ZW1DbGFzc2UoXCJib2R5XCIsIFwicGFnaW5hLXBlZGlkby1saXN0YXJcIikgJiZcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PSBcIi9jb250YS9wZWRpZG8vbGlzdGFyXCJcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdpbmFMaXN0YURlc2Vqb3MoKSB7XHJcbiAgcmV0dXJuIChcclxuICAgIHRlbUNsYXNzZShcImJvZHlcIiwgXCJwYWdpbmEtZmF2b3JpdG8tbGlzdGFyXCIpICYmXHJcbiAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT0gXCIvY29udGEvZmF2b3JpdG8vbGlzdGFyXCJcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdpbmFBbHRlcmFyU2VuaGEoKSB7XHJcbiAgdmFyIGFsdGVyYXJTZW5oYVJlZ2V4ID0gL2FsdGVyYXJfc2VuaGEvO1xyXG5cclxuICByZXR1cm4gYWx0ZXJhclNlbmhhUmVnZXgudGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZ2luYUVkaXRhck1pbmhhQ29udGEoKSB7XHJcbiAgdmFyIGVkaXRhck1pbmhhQ29udGFSZWdleCA9IC9jb250YVxcL2VkaXRhci87XHJcbiAgcmV0dXJuIGVkaXRhck1pbmhhQ29udGFSZWdleC50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxufVxyXG5cclxuLy8gVGVybWluYSBmdW7Dp8O1ZXMgZGUgcMOhZ2luYXNcclxuXHJcbmZ1bmN0aW9uIHJlbW92ZXJUdWRvKHNlbGVjdG9yKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikuZm9yRWFjaCgoZSkgPT4gZS5yZW1vdmUoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92YVNlRXhpc3RpcihzZWxlY3Rvcikge1xyXG4gIHZhciBpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcblxyXG4gIGlmICghIWl0ZW0pIHtcclxuICAgIGl0ZW0ucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGljaW9uYUxpbmtPdmVybGF5TWVudSh0aXR1bG8sIGxpbmssIGNsYXNzZSkge1xyXG4gIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG5cclxuICBpZiAoY2xhc3NlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIGxpLmNsYXNzTGlzdC5hZGQoY2xhc3NlKTtcclxuICB9XHJcblxyXG4gIGEuaHJlZiA9IGxpbms7XHJcbiAgYS5pbm5lckhUTUwgPSB0aXR1bG87XHJcblxyXG4gIGxpLmFwcGVuZChhKTtcclxuXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LW1lbnUgPnVsLm5pdmVsLXVtXCIpLmFwcGVuZChsaSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbnRlbnRMb2FkZWQoZnVuYykge1xyXG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIikge1xyXG4gICAgZnVuYygpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIFwic3RyaWN0XCI7XHJcbiAgICAgIGZ1bmMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ3JpYXIgU3dpcGVyXHJcbmZ1bmN0aW9uIGNyZWF0ZVN3aXBlcihhcHBlbmRTZWxlY3RvciwgZXh0cmFDbGFzcykge1xyXG4gIHZhciBzd2lwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHN3aXBlci5jbGFzc0xpc3QuYWRkKFwic3dpcGVyXCIpO1xyXG5cclxuICBpZiAoZXh0cmFDbGFzcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBzd2lwZXIuY2xhc3NMaXN0LmFkZChleHRyYUNsYXNzKTtcclxuICB9XHJcblxyXG4gIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItd3JhcHBlclwiKTtcclxuICBzd2lwZXIuYXBwZW5kKHdyYXBwZXIpO1xyXG5cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFwcGVuZFNlbGVjdG9yKS5hcHBlbmQoc3dpcGVyKTtcclxuXHJcbiAgcmV0dXJuIHN3aXBlcjtcclxufVxyXG5cclxuLy8gQWRpY2lvbmEgU3dpcGVyU2xpZGVcclxuZnVuY3Rpb24gYWRkU3dpcGVyU2xpZGVMUFMoc3dpcGVyU2VsZWN0b3IsIGltZ1NyYywgdGl0bGUsIGxpbmspIHtcclxuICB2YXIgc3dpcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihzd2lwZXJTZWxlY3Rvcik7XHJcbiAgdmFyIHdyYXBwZXIgPSBzd2lwZXIucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItd3JhcHBlclwiKTtcclxuICB2YXIgc2xpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcblxyXG4gIHZhciBwcm9kdWN0SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIHZhciBhcnJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgdmFyIHByb2R1Y3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcclxuXHJcbiAgc2xpZGUuY2xhc3NMaXN0LmFkZChcInN3aXBlci1zbGlkZVwiKTtcclxuICBwcm9kdWN0SW1hZ2UuY2xhc3NMaXN0LmFkZChcImxwcy1wcm9kdWN0LWltZ1wiKTtcclxuICBhcnJvdy5jbGFzc0xpc3QuYWRkKFwibHBzLWFycm93XCIpO1xyXG4gIHByb2R1Y3RUaXRsZS5jbGFzc0xpc3QuYWRkKFwibHBzLXByb2R1Y3QtdGl0bGVcIik7XHJcblxyXG4gIHByb2R1Y3RJbWFnZS5zcmMgPSBpbWdTcmM7XHJcbiAgYXJyb3cuc3JjID0gdXJsU2V0YTtcclxuICBwcm9kdWN0VGl0bGUuaW5uZXJIVE1MID0gdGl0bGU7XHJcbiAgYS5ocmVmID0gbGluaztcclxuXHJcbiAgYS5hcHBlbmQocHJvZHVjdEltYWdlKTtcclxuICBhLmFwcGVuZChhcnJvdyk7XHJcbiAgYS5hcHBlbmQocHJvZHVjdFRpdGxlKTtcclxuXHJcbiAgc2xpZGUuYXBwZW5kKGEpO1xyXG5cclxuICB3cmFwcGVyLmFwcGVuZChzbGlkZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEZ1bGxCYW5uZXJzTFBTKGxpbmtEZXNrdG9wLCBsaW5rTW9iaWxlKSB7XHJcbiAgdmFyIGJhbm5lckRlc2t0b3BMUFMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIHZhciBiYW5uZXJNb2JpbGVMUFMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG5cclxuICBiYW5uZXJEZXNrdG9wTFBTLmNsYXNzTGlzdC5hZGQoXCJmdWxsLWJhbm5lci1kZXNrdG9wLWxwc1wiKTtcclxuICBiYW5uZXJNb2JpbGVMUFMuY2xhc3NMaXN0LmFkZChcImZ1bGwtYmFubmVyLW1vYmlsZS1scHNcIik7XHJcblxyXG4gIGJhbm5lckRlc2t0b3BMUFMuc3JjID0gbGlua0Rlc2t0b3A7XHJcbiAgYmFubmVyTW9iaWxlTFBTLnNyYyA9IGxpbmtNb2JpbGU7XHJcblxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29ycG9cIikucHJlcGVuZChiYW5uZXJEZXNrdG9wTFBTKTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvcnBvXCIpLnByZXBlbmQoYmFubmVyTW9iaWxlTFBTKTtcclxufVxyXG5cclxuLy8gQWRpY2lvbmEgYm90w7VlcyBkZSBTV0lQRVJcclxuZnVuY3Rpb24gc2V0U3dpcGVyQnV0dG9ucyhjYXJvdXNlbCkge1xyXG4gIHZhciBidXR0b25OZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBidXR0b25OZXh0LmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItYnV0dG9uLW5leHRcIik7XHJcblxyXG4gIHZhciBidXR0b25QcmV2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBidXR0b25QcmV2LmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItYnV0dG9uLXByZXZcIik7XHJcblxyXG4gIGRvY3VtZW50XHJcbiAgICAucXVlcnlTZWxlY3RvcihjYXJvdXNlbCArIFwiKy5wcm9kdXRvcy1jYXJyb3NzZWwgLnN3aXBlclwiKVxyXG4gICAgLmFmdGVyKGJ1dHRvbk5leHQpO1xyXG4gIGRvY3VtZW50XHJcbiAgICAucXVlcnlTZWxlY3RvcihcclxuICAgICAgY2Fyb3VzZWwgKyBcIisucHJvZHV0b3MtY2Fycm9zc2VsIC5zd2lwZXIgKyAuc3dpcGVyLWJ1dHRvbi1uZXh0XCJcclxuICAgIClcclxuICAgIC5hZnRlcihidXR0b25QcmV2KTtcclxufVxyXG5cclxuLy8gQWRpY2lvbmEgcGFnaW5hw6fDo28gbm8gY2Fycm9zc2VsXHJcbmZ1bmN0aW9uIHNldFBhZ2luYXRpb24oY2Fyb3VzZWwpIHtcclxuICB2YXIgcGFnaW5hdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgcGFnaW5hdGlvbi5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXBhZ2luYXRpb25cIik7XHJcbiAgZG9jdW1lbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKGNhcm91c2VsICsgXCIrLnByb2R1dG9zLWNhcnJvc3NlbCAuc3dpcGVyXCIpXHJcbiAgICAuYXBwZW5kKHBhZ2luYXRpb24pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRDYXJvdXNlbExQUyh0aXRsZSwgYXBwZW5kU2VsZWN0b3IsIGV4dHJhQ2xhc3MpIHtcclxuICB2YXIgZGVzdGluYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFwcGVuZFNlbGVjdG9yKTtcclxuICB2YXIgaDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XHJcbiAgaDIuY2xhc3NMaXN0LmFkZChcImNhcm91c2VsLXRpdGxlXCIpO1xyXG4gIGgyLmlubmVySFRNTCA9IHRpdGxlO1xyXG5cclxuICBkZXN0aW5hdGlvbi5hcHBlbmQoaDIpO1xyXG5cclxuICB2YXIgc3dpcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBzd2lwZXIuY2xhc3NMaXN0LmFkZChcInN3aXBlclwiKTtcclxuXHJcbiAgaWYgKGV4dHJhQ2xhc3MgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgc3dpcGVyLmNsYXNzTGlzdC5hZGQoZXh0cmFDbGFzcyk7XHJcbiAgfVxyXG5cclxuICB2YXIgcGFnaW5hdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgcGFnaW5hdGlvbi5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXBhZ2luYXRpb25cIik7XHJcbiAgc3dpcGVyLmFwcGVuZChwYWdpbmF0aW9uKTtcclxuXHJcbiAgc3dpcGVyLmNsYXNzTGlzdC5hZGQoXCJjYXJvdXNlbC1scHNcIik7XHJcblxyXG4gIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItd3JhcHBlclwiKTtcclxuICBzd2lwZXIuYXBwZW5kKHdyYXBwZXIpO1xyXG5cclxuICBkZXN0aW5hdGlvbi5hcHBlbmQoc3dpcGVyKTtcclxuXHJcbiAgdmFyIGJ1dHRvbk5leHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGJ1dHRvbk5leHQuY2xhc3NMaXN0LmFkZChcInN3aXBlci1idXR0b24tbmV4dFwiKTtcclxuXHJcbiAgdmFyIGJ1dHRvblByZXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGJ1dHRvblByZXYuY2xhc3NMaXN0LmFkZChcInN3aXBlci1idXR0b24tcHJldlwiKTtcclxuXHJcbiAgc3dpcGVyLmFwcGVuZChidXR0b25OZXh0KTtcclxuICBzd2lwZXIuYXBwZW5kKGJ1dHRvblByZXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydFN3aXBlcihzd2lwZXJTZWxlY3Rvciwgc2xpZGVzUGVyVmlld0Rlc2t0b3ApIHtcclxuICB2YXIgc3dpcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihzd2lwZXJTZWxlY3Rvcik7XHJcblxyXG4gIG5ldyBTd2lwZXIoc3dpcGVyLCB7XHJcbiAgICBsb29wOiBmYWxzZSxcclxuICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICBzcGFjZUJldHdlZW46IDEwLFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNDAwOiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICBzcGFjZUJldHdlZW46IDUsXHJcbiAgICAgIH0sXHJcbiAgICAgIDcwMDoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiA1LFxyXG4gICAgICB9LFxyXG4gICAgICA5OTI6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiBzbGlkZXNQZXJWaWV3RGVza3RvcCxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi5zd2lwZXItYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi5zd2lwZXItYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxyXG4gICAgICBjbGlja2FibGU6IHRydWUsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRDYXJvdXNlbChjYXJvdXNlbCkge1xyXG4gIHZhciBwcm9kdWN0Q2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgY2Fyb3VzZWwgKyBcIisucHJvZHV0b3MtY2Fycm9zc2VsIGxpID4gZGl2ID4gdWwgPiBsaVwiXHJcbiAgKTtcclxuXHJcbiAgdmFyIHN3ID0gY3JlYXRlU3dpcGVyKGNhcm91c2VsICsgXCIrLnByb2R1dG9zLWNhcnJvc3NlbFwiKTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9kdWN0Q2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgIHZhciBpdGVtID0gcHJvZHVjdENhcmRzW2ldO1xyXG4gICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXNsaWRlXCIpO1xyXG4gICAgZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoY2Fyb3VzZWwgKyBcIisucHJvZHV0b3MtY2Fycm9zc2VsIC5zd2lwZXIgLnN3aXBlci13cmFwcGVyXCIpXHJcbiAgICAgIC5hcHBlbmQoaXRlbSk7XHJcbiAgfVxyXG5cclxuICBzZXRTd2lwZXJCdXR0b25zKGNhcm91c2VsKTtcclxuXHJcbiAgc2V0UGFnaW5hdGlvbihjYXJvdXNlbCk7XHJcblxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2Fyb3VzZWwgKyBcIisucHJvZHV0b3MtY2Fycm9zc2VsID4gbGlcIikucmVtb3ZlKCk7XHJcblxyXG4gIG5ldyBTd2lwZXIoc3csIHtcclxuICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogMTAsXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA0MDA6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogNSxcclxuICAgICAgfSxcclxuICAgICAgNzAwOiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICBzcGFjZUJldHdlZW46IDUsXHJcbiAgICAgIH0sXHJcbiAgICAgIDk5Mjoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogc3cubmV4dEVsZW1lbnRTaWJsaW5nLFxyXG4gICAgICBwcmV2RWw6IHN3Lm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIuc3dpcGVyLXBhZ2luYXRpb25cIixcclxuICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgfSxcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWluaUJhbm5lcnNMUFMoYXBwZW5kU2VsZWN0b3IsIHNyY0ltZzEsIHNyY0ltZzIsIGhyZWYxLCBocmVmMikge1xyXG4gIHZhciBkZXN0aW5hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXBwZW5kU2VsZWN0b3IpO1xyXG5cclxuICB2YXIgdGl0bGUgPSBcIkVzY29saGEgcG9yIGFtYmllbnRlXCI7XHJcbiAgdmFyIGgyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xyXG4gIGgyLmNsYXNzTGlzdC5hZGQoXCJjYXJvdXNlbC10aXRsZVwiKTtcclxuICBoMi5pbm5lckhUTUwgPSB0aXRsZTtcclxuXHJcbiAgZGVzdGluYXRpb24uYXBwZW5kKGgyKTtcclxuXHJcbiAgdmFyIGNvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gIGNvbnRlaW5lci5jbGFzc0xpc3QuYWRkKFwibWluaWJhbm5lcnMtY29udGVpbmVyLWxwc1wiKTtcclxuXHJcbiAgdmFyIGExID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgdmFyIGEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcblxyXG4gIHZhciBpbWFnZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIHZhciBpbWFnZTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG5cclxuICBpbWFnZTEuc3JjID0gc3JjSW1nMTtcclxuICBpbWFnZTIuc3JjID0gc3JjSW1nMjtcclxuXHJcbiAgYTEuYXBwZW5kKGltYWdlMSk7XHJcbiAgYTIuYXBwZW5kKGltYWdlMik7XHJcblxyXG4gIGExLmhyZWYgPSBocmVmMTtcclxuICBhMi5ocmVmID0gaHJlZjI7XHJcblxyXG4gIGNvbnRlaW5lci5hcHBlbmQoYTEpO1xyXG4gIGNvbnRlaW5lci5hcHBlbmQoYTIpO1xyXG5cclxuICBkZXN0aW5hdGlvbi5hcHBlbmQoY29udGVpbmVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbXVkYXJUaXR1bG9Cb3Rhb0NvbXByYUNhcnJpbmhvKHRpdHVsbykge1xyXG4gIHZhciBib3RhbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIi5wYWdpbmEtY2FycmluaG8gLmZpbmFsaXphci1jb21wcmEgLmFjYW8tZWRpdGFyIC5ib3Rhby5wcmluY2lwYWwuZ3JhbmRlXCJcclxuICApO1xyXG5cclxuICBpZiAoISFib3Rhbykge1xyXG4gICAgYm90YW8uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGJvdGFvLmlubmVySFRNTCA9IFwiPGkgY2xhc3M9J2ljb24tb2snPjwvaT5cIiArIHRpdHVsbztcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VyZUNhcnJpbmhvQm90YW9Db21wcmFQcm9kdXRvKCkge1xyXG4gIHZhciBib3RhbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIi5wYWdpbmEtcHJvZHV0byAucHJpbmNpcGFsIC5jb21wcmFyIC5ib3Rhby1jb21wcmFyXCJcclxuICApO1xyXG5cclxuICB2YXIgdGFnSWNvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcclxuICB0YWdJY29uZS5pZCA9IFwidGFnSWNvbmVDb21wcmFyXCI7XHJcbiAgdGFnSWNvbmUuY2xhc3NMaXN0LmFkZChcImljb25lLWNhcnJpbmhvLWNvbXByYXJcIik7XHJcblxyXG4gIGlmICghIWJvdGFvKSB7XHJcbiAgICBib3Rhby5wcmVwZW5kKHRhZ0ljb25lKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGFnSWNvbmUucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJzdGl0dWlyU2t1UG9yQ29kaWdvKCkge1xyXG4gIHZhciBza3VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgIFwiLnRhYmVsYS1jYXJyaW5obyAucHJvZHV0by1pbmZvIHVsIGxpOmZpcnN0LWNoaWxkIHNwYW4gc3Ryb25nXCJcclxuICApO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHNrdXMubGVuZ3RoOyBpKyspIHtcclxuICAgIHZhciBza3VIVE1MID0gc2t1c1tpXS5vdXRlckhUTUw7XHJcblxyXG4gICAgdmFyIHBhcmVudFNrdSA9IHNrdXNbaV0ucGFyZW50RWxlbWVudDtcclxuXHJcbiAgICBwYXJlbnRTa3UuaW5uZXJIVE1MID0gXCJDw7NkaWdvIDpcIiArIHNrdUhUTUw7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwcm9kdXRvSW5kaXNwb25pdmVsKCkge1xyXG4gIHJldHVybiAhIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWNvZXMtcHJvZHV0by5pbmRpc3Bvbml2ZWxcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkaWNpb25hckNsYXNzZUFvQm9keShjbGFzc1RvQWRkKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuY2xhc3NMaXN0LmFkZChjbGFzc1RvQWRkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFnaW5hUXVlbVNvbW9zKCkge1xyXG4gIGlmIChwYWdpbmFDb250ZXVkbygpKSB7XHJcbiAgICB2YXIgdGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcXVlbS1zb21vc1wiKTtcclxuICAgIHJldHVybiAhIXRlbXA7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZ2luYVNlZ3VyYW5jYVByaXZhY2lkYWRlKCkge1xyXG4gIGlmIChwYWdpbmFDb250ZXVkbygpKSB7XHJcbiAgICB2YXIgdGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2VndXJhbmNhLWUtcHJpdmFjaWRhZGVcIik7XHJcbiAgICByZXR1cm4gISF0ZW1wO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdpbmFUZXJtb3NEZVVzbygpIHtcclxuICBpZiAocGFnaW5hQ29udGV1ZG8oKSkge1xyXG4gICAgdmFyIHRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rlcm1vcy1kZS11c29cIik7XHJcbiAgICByZXR1cm4gISF0ZW1wO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdpbmFGQVEoKSB7XHJcbiAgaWYgKHBhZ2luYUNvbnRldWRvKCkpIHtcclxuICAgIHZhciB0ZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmYXFcIik7XHJcbiAgICByZXR1cm4gISF0ZW1wO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwYWdpbmFUcm9jYXNEZXZvbHVjb2VzKCkge1xyXG4gIGlmIChwYWdpbmFDb250ZXVkbygpKSB7XHJcbiAgICB2YXIgdGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdHJvY2FzLWUtZGV2b2x1Y29lc1wiKTtcclxuICAgIHJldHVybiAhIXRlbXA7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUJhbm5lcihmdWxsQmFubmVyLCBpbWFnZXMsIHNlY3Rpb25CYW5uZXIpIHtcclxuICBpZiAoISFmdWxsQmFubmVyKSB7XHJcbiAgICBjb25zdCB3cmFwcGVyID0gZnVsbEJhbm5lci5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci13cmFwcGVyXCIpO1xyXG5cclxuICAgIC8vIE1vdW50IFNsaWRlIFdyYXBwZXJcclxuICAgIGltYWdlcy5tYXAoKGltYWdlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuXHJcbiAgICAgIHNlY3Rpb25CYW5uZXIuYXBwZW5kKGZ1bGxCYW5uZXIpO1xyXG5cclxuICAgICAgaW1nLnNyYyA9IGltYWdlLnNyYztcclxuICAgICAgaW1nLmFsdCA9IGltYWdlLmFsdDtcclxuXHJcbiAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItc2xpZGVcIik7XHJcbiAgICAgIHNsaWRlLmFwcGVuZENoaWxkKGltZyk7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgVGl0bGVcclxuXHJcbiAgICAgIGNvbnN0IGRpdlRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgZGl2VGl0bGUuY2xhc3NMaXN0LmFkZChcInN3aXBlci1zbGlkZS10ZXh0XCIpO1xyXG4gICAgICBjb25zdCB2ZXJNYWlzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcblxyXG4gICAgICBpZiAoaW1hZ2UudGl0bGUpIHtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcclxuICAgICAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGl0bGVcIik7XHJcbiAgICAgICAgdGl0bGUuaW5uZXJUZXh0ID0gaW1hZ2UudGl0bGUudG9TdHJpbmcoKS5zcGxpdChcInx8XCIpWzBdLnRyaW0oKTtcclxuXHJcbiAgICAgICAgZGl2VGl0bGUuYXBwZW5kKHRpdGxlKTtcclxuXHJcbiAgICAgICAgaWYgKGltYWdlLnRpdGxlLnRvU3RyaW5nKCkuc3BsaXQoXCJ8fFwiKVsxXSkge1xyXG4gICAgICAgICAgdmVyTWFpcy5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXNsaWRlLWJ0blwiKTtcclxuICAgICAgICAgIHZlck1haXMuaHJlZiA9IGltYWdlLmxpbms7XHJcbiAgICAgICAgICB2ZXJNYWlzLmlubmVyVGV4dCA9IGltYWdlLnRpdGxlLnRvU3RyaW5nKCkuc3BsaXQoXCJ8fFwiKVsxXS50cmltKCk7XHJcbiAgICAgICAgICBkaXZUaXRsZS5hcHBlbmRDaGlsZCh2ZXJNYWlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNsaWRlLmFwcGVuZENoaWxkKGRpdlRpdGxlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcclxuICAgICAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGl0bGVcIik7XHJcbiAgICAgICAgZGl2VGl0bGUuYXBwZW5kKHRpdGxlKTtcclxuICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZChkaXZUaXRsZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpbWFnZS5saW5rKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIEJ1dHRvblxyXG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICBhLmNsYXNzTGlzdC5hZGQoXCJidG4tYmxhY2tcIik7XHJcbiAgICAgICAgYS5ocmVmID0gaW1hZ2UubGluaztcclxuICAgICAgICBhLmFwcGVuZChpbWcpO1xyXG4gICAgICAgIHNsaWRlLmFwcGVuZChhKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQXBwZW5kXHJcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2xpZGUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU3dpcGVyXHJcbiAgICBuZXcgU3dpcGVyKGZ1bGxCYW5uZXIsIHtcclxuICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxyXG4gICAgICBwYWdpbmF0aW9uOiB7IGVsOiBmdWxsQmFubmVyLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXBhZ2luYXRpb25cIikgfSxcclxuICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgIG5leHRFbDogZnVsbEJhbm5lci5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1idXR0b24tbmV4dFwiKSxcclxuICAgICAgICBwcmV2RWw6IGZ1bGxCYW5uZXIucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItYnV0dG9uLXByZXZcIiksXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvc2ljaW9uYUZpbHRybygpIHtcclxuICB2YXIgZmlsdHJvc0FwbGljYWRvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubS1maWx0cm9zLWFwbGljYWRvc1wiKTtcclxuICB2YXIgdGl0dWxvUGFnaW5hQ2F0ZWdvcmlhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgxLnRpdHVsb1wiKTtcclxuICB2YXIgb3JkZW5hckxpc3RhZ2VtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vcmRlbmFyLWxpc3RhZ2VtLnRvcG9cIik7XHJcbiAgaWYgKCEhZmlsdHJvc0FwbGljYWRvcyAmJiAhIXRpdHVsb1BhZ2luYUNhdGVnb3JpYSAmJiAhIW9yZGVuYXJMaXN0YWdlbSkge1xyXG4gICAgdGl0dWxvUGFnaW5hQ2F0ZWdvcmlhLmFmdGVyKGZpbHRyb3NBcGxpY2Fkb3MpO1xyXG4gICAgZmlsdHJvc0FwbGljYWRvcy5hZnRlcihvcmRlbmFyTGlzdGFnZW0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZW1vdmFTZUV4aXN0aXIoXCIubS1maWx0cm9zLWFwbGljYWRvc1wiKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpbHRlckl0ZW0oZmlsdHJvKSB7XHJcbiAgdmFyIG5vbWVGaWx0cm8gPSBmaWx0cm8uaW5uZXJIVE1MO1xyXG5cclxuICB2YXIgbUZpbHRybyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgbUZpbHRyby5jbGFzc0xpc3QuYWRkKFwibS1maWx0cm9cIik7XHJcblxyXG4gIHZhciBtRmlsdHJvRGVzY3JpY2FvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgbUZpbHRyb0Rlc2NyaWNhby5jbGFzc0xpc3QuYWRkKFwibS1maWx0cm8tZGVzY3JpY2FvXCIpO1xyXG5cclxuICB2YXIgbUZpbHRyb1JlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIG1GaWx0cm9SZW1vdmUuY2xhc3NMaXN0LmFkZChcIm0tZmlsdHJvLXJlbW92ZVwiKTtcclxuXHJcbiAgdmFyIHBhaUZpbHRybyA9IGZpbHRyby5jbG9zZXN0KFwiLmZpbHRyb1wiKTtcclxuICBtRmlsdHJvUmVtb3ZlLmhyZWYgPSBwYWlGaWx0cm8ucXVlcnlTZWxlY3RvcihcImEubGltcGFyXCIpLmhyZWY7XHJcblxyXG4gIHZhciBtSWNvblJlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xyXG4gIG1JY29uUmVtb3ZlLmNsYXNzTGlzdC5hZGQoXCJpY29uLXJlbW92ZVwiKTtcclxuXHJcbiAgbUZpbHRyb0Rlc2NyaWNhby5pbm5lckhUTUwgPSBub21lRmlsdHJvO1xyXG4gIG1GaWx0cm8uYXBwZW5kKG1GaWx0cm9EZXNjcmljYW8pO1xyXG5cclxuICBtRmlsdHJvUmVtb3ZlLmFwcGVuZChtSWNvblJlbW92ZSk7XHJcbiAgbUZpbHRyby5hcHBlbmQobUZpbHRyb1JlbW92ZSk7XHJcblxyXG4gIHZhciBmaWx0cm9zQXBsaWNhZG9zQm94SXRlbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIubS1maWx0cm9zLWFwbGljYWRvcyAubS1maWx0cm9zLWFwbGljYWRvcy1ib3gtaXRlbnNcIlxyXG4gICk7XHJcblxyXG4gIGlmICghIWZpbHRyb3NBcGxpY2Fkb3NCb3hJdGVucykge1xyXG4gICAgZmlsdHJvc0FwbGljYWRvc0JveEl0ZW5zLmFwcGVuZChtRmlsdHJvKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVRvZG9zT3NGaWxob3Moc2VsZXRvcikge1xyXG4gIHZhciBpdGVucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZXRvciArIFwiID4gKlwiKTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVucy5sZW5ndGg7IGkrKykge1xyXG4gICAgaXRlbnNbaV0ucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRIZWFkZXJDYXJyaW5ob0NoZWNrb3V0KCkge1xyXG4gIHJlbW92ZVRvZG9zT3NGaWxob3MoXCIjY2FiZWNhbGhvXCIpO1xyXG4gIHZhciBoZWFkZXJDYXJyaW5ob0NoZWNrb3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiLmhlYWRlci1jYXJyaW5oby1jaGVja291dFwiXHJcbiAgKTtcclxuXHJcbiAgaWYgKCEhaGVhZGVyQ2FycmluaG9DaGVja291dCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYWJlY2FsaG9cIikuYXBwZW5kKGhlYWRlckNhcnJpbmhvQ2hlY2tvdXQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UXVhbnRpZGFkZVBhZ2luYUNhcnJpbmhvKCkge1xyXG4gIHZhciBxdWFudGlkYWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFtuYW1lPSdxdWFudGlkYWRlJ11cIik7XHJcbiAgdmFyIHRvdGFsID0gMDtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWFudGlkYWRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgdG90YWwgKz0gcGFyc2VJbnQocXVhbnRpZGFkZXNbaV0udmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRvdGFsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRRdWFudGlkYWRlUGFnaW5hQ2hlY2tvdXQoKSB7XHJcbiAgLy8gLmNvbnRlaW5lci1xdGQgPiBkaXZcclxuXHJcbiAgdmFyIHF1YW50aWRhZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250ZWluZXItcXRkID4gZGl2XCIpO1xyXG4gIHZhciB0b3RhbCA9IDA7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcXVhbnRpZGFkZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIHRvdGFsICs9IHBhcnNlSW50KHF1YW50aWRhZGVzW2ldLmlubmVySFRNTCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdG90YWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFRpdHVsb1BhZ2luYUNoZWNrb3V0KCkge1xyXG4gIGxldCBub3ZvVGl0dWxvID0gXCJDaGVja291dFwiO1xyXG5cclxuICBsZXQgdGl0dWxvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgxLnRpdHVsb1wiKTtcclxuICBsZXQgdGl0dWxvU21hbGwgPSB0aXR1bG8ucXVlcnlTZWxlY3RvcihcInNtYWxsXCIpLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgbGV0IHF0ZGUgPSBnZXRRdWFudGlkYWRlUGFnaW5hQ2hlY2tvdXQoKTtcclxuXHJcbiAgdGl0dWxvLmlubmVySFRNTCA9XHJcbiAgICBub3ZvVGl0dWxvICsgXCIgPHNwYW4gY2xhc3M9J3RpdHVsby1xdGRlLWNhcnJpbmhvJz4oXCIgKyBxdGRlICsgXCIpPC9zcGFuPlwiO1xyXG5cclxuICB0aXR1bG8uYXBwZW5kKHRpdHVsb1NtYWxsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0VGl0dWxvUGFnaW5hQ2FycmluaG8oKSB7XHJcbiAgbGV0IHRpdHVsbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMS50aXR1bG9cIik7XHJcblxyXG4gIGlmICghIXRpdHVsbykge1xyXG4gICAgbGV0IHNtYWxsVGl0dWxvID0gdGl0dWxvLnF1ZXJ5U2VsZWN0b3IoXCJzbWFsbFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgdmFyIHF0ZGUgPSBnZXRRdWFudGlkYWRlUGFnaW5hQ2FycmluaG8oKTtcclxuXHJcbiAgICB0aXR1bG8uaW5uZXJIVE1MID1cclxuICAgICAgXCJDYXJyaW5obyA8c3BhbiBjbGFzcz0ndGl0dWxvLXF0ZGUtY2FycmluaG8nPihcIiArIHF0ZGUgKyBcIik8L3NwYW4+XCI7XHJcblxyXG4gICAgdGl0dWxvLmFwcGVuZChzbWFsbFRpdHVsbyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVTdWJ0b3RhbFBhZ2luYUNhcnJpbmhvKCkge1xyXG4gIHZhciBzdWJ0b3RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VidG90YWxcIik7XHJcblxyXG4gIGlmICghIXN1YnRvdGFsKSB7XHJcbiAgICB2YXIgcm93U3VidG90YWwgPSBzdWJ0b3RhbC5jbG9zZXN0KFwidHJcIik7XHJcblxyXG4gICAgaWYgKCEhcm93U3VidG90YWwpIHtcclxuICAgICAgcm93U3VidG90YWwucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRRdGRlKGVsZW0pIHtcclxuICB2YXIgdmFsdWUgPSBwYXJzZUludChlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudmFsdWUpO1xyXG5cclxuICB2YWx1ZSArPSAxO1xyXG5cclxuICBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgdmFyIGFjb2VzUHJvZHV0byA9IGVsZW0uY2xvc2VzdChcIi5hY29lcy1wcm9kdXRvXCIpO1xyXG5cclxuICB2YXIgcHJvZHV0b0lkID0gYWNvZXNQcm9kdXRvLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvZHV0by1pZFwiKTtcclxuXHJcbiAgYWNvZXNQcm9kdXRvLnF1ZXJ5U2VsZWN0b3IoXCIuYm90YW8tY29tcHJhclwiKS5ocmVmID1cclxuICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xyXG4gICAgXCIvY2FycmluaG8vcHJvZHV0by9cIiArXHJcbiAgICBwcm9kdXRvSWQgK1xyXG4gICAgXCIvYWRpY2lvbmFyL1wiICtcclxuICAgIHZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJRdGRlKGVsZW0pIHtcclxuICB2YXIgdmFsdWUgPSBwYXJzZUludChlbGVtLm5leHRFbGVtZW50U2libGluZy52YWx1ZSk7XHJcblxyXG4gIGlmICh2YWx1ZSAhPSAxKSB7XHJcbiAgICB2YWx1ZSAtPSAxO1xyXG4gICAgZWxlbS5uZXh0RWxlbWVudFNpYmxpbmcudmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICB2YXIgYWNvZXNQcm9kdXRvID0gZWxlbS5jbG9zZXN0KFwiLmFjb2VzLXByb2R1dG9cIik7XHJcblxyXG4gICAgdmFyIHByb2R1dG9JZCA9IGFjb2VzUHJvZHV0by5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2R1dG8taWRcIik7XHJcblxyXG4gICAgYWNvZXNQcm9kdXRvLnF1ZXJ5U2VsZWN0b3IoXCIuYm90YW8tY29tcHJhclwiKS5ocmVmID1cclxuICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXHJcbiAgICAgIFwiL2NhcnJpbmhvL3Byb2R1dG8vXCIgK1xyXG4gICAgICBwcm9kdXRvSWQgK1xyXG4gICAgICBcIi9hZGljaW9uYXIvXCIgK1xyXG4gICAgICB2YWx1ZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVRvZGFzQXNDbGFzc2VzKHNlbGV0b3IpIHtcclxuICBsZXQgZWxlbWVudG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGV0b3IpO1xyXG5cclxuICBpZiAoISFlbGVtZW50bykge1xyXG4gICAgZWxlbWVudG8uY2xhc3NOYW1lID0gXCJcIjtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGFkZExpbmtMb2dvdXQgPSAoKSA9PiB7XHJcbiAgbGV0IGh0bWxJbnNlcnQgPSBgPGxpPlxyXG4gICAgPGEgaHJlZj1cIi9jb250YS9sb2dvdXRcIj5cclxuPGkgY2xhc3M9XCJpY29uLWxvZ291dCBjb3Itc2VjdW5kYXJpYVwiPlxyXG5cclxuPC9pPiBcclxuU2FpclxyXG4gICAgPC9hPlxyXG48bGkgY2xhc3M9XCJkaXZpc29yIGJvcmRhLWFscGhhXCI+PC9saT5cclxuICAgXHJcbjwvbGk+YDtcclxuXHJcbiAgZG9jdW1lbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtc2ltcGxlc1wiKVxyXG4gICAgLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBodG1sSW5zZXJ0KTtcclxufTtcclxuXHJcbi8vIGFkaWNpb25hIHRleHRvcyBlIGJ0biBub3MgbWluaUJhbm5lcnNcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICBjb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgXCIubWluaS1iYW5uZXIgPiBkaXYuc3BhbjQgPiBkaXYuZmxleHNsaWRlciA+IHVsLnNsaWRlcyA+IGxpID4gYSA+IGltZ1wiXHJcbiAgKTtcclxuICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICBcIi5taW5pLWJhbm5lciA+IGRpdi5zcGFuNCA+IGRpdi5mbGV4c2xpZGVyID4gdWwuc2xpZGVzID4gbGkgPiBhXCJcclxuICApO1xyXG4gIGNvbnN0IG9ubHlpbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICBcIi5taW5pLWJhbm5lciA+IGRpdi5zcGFuNCA+IGRpdi5mbGV4c2xpZGVyID4gdWwuc2xpZGVzID4gbGkgPiBpbWdcIlxyXG4gICk7XHJcbiAgaW1hZ2VzLmZvckVhY2goKGVsZW0sIGluZGV4KSA9PiB7XHJcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgY29uc3QgaDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDRcIik7XHJcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcblxyXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJtaWRCYW5uZXItdGV4dFwiKTtcclxuICAgIGg0LmNsYXNzTGlzdC5hZGQoXCJtaWRCYW5uZXItdGV4dC10aXRsZVwiKTtcclxuICAgIGEuY2xhc3NMaXN0LmFkZChcIm1pZEJhbm5lci10ZXh0LWFcIik7XHJcblxyXG4gICAgaWYgKGxpbmtzW2luZGV4XS5ocmVmKSB7XHJcbiAgICAgIGg0LmlubmVyVGV4dCA9IGVsZW0uYWx0LnNwbGl0KFwifHxcIilbMF07XHJcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChoNCk7XHJcblxyXG4gICAgICBhLmhyZWYgPSBsaW5rc1tpbmRleF0uaHJlZjtcclxuICAgICAgYS5pbm5lclRleHQgPSBlbGVtLmFsdC5zcGxpdChcInx8XCIpWzFdICYmIGVsZW0uYWx0LnNwbGl0KFwifHxcIilbMV07XHJcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChhKTtcclxuICAgIH1cclxuXHJcbiAgICBlbGVtLnBhcmVudE5vZGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gIH0pO1xyXG5cclxuICBvbmx5aW1hZ2UuZm9yRWFjaCgoZWxlbSwgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBjb25zdCBoNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcclxuXHJcbiAgICBkaXYuY2xhc3NMaXN0LmFkZChcIm1pZEJhbm5lci10ZXh0XCIpO1xyXG4gICAgaDQuY2xhc3NMaXN0LmFkZChcIm1pZEJhbm5lci10ZXh0LXRpdGxlXCIpO1xyXG5cclxuICAgIGlmIChvbmx5aW1hZ2VbaW5kZXhdKSB7XHJcbiAgICAgIGg0LmlubmVyVGV4dCA9IGVsZW0uYWx0LnNwbGl0KFwifHxcIilbMF07XHJcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChoNCk7XHJcbiAgICB9XHJcblxyXG4gICAgZWxlbS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgfSk7XHJcblxyXG4gIC8vIGxpbmtzLmZvckVhY2goKGVsZW0pID0+IHtcclxuICAvLyAgIGVsZW0uaHJlZiA9IFwiXCI7XHJcbiAgLy8gfSk7XHJcbn0pO1xyXG5cbi8vIEVzY29uZGUgbyBzaXRlIGF0w6kgcXVlIGNhcnJlZ2UgdG90YWxtZW50ZVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAnc3RyaWN0J1xyXG4gICAgY29uc3QgY29ycG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcclxuICAgIGNvcnBvLmNsYXNzTGlzdC5hZGQoXCJtb3N0cmFyLXBhZ2luYVwiKTtcclxufSk7XHJcblxuLy8gd2luZG93LlVzZXJiYWNrID0gd2luZG93LlVzZXJiYWNrIHx8IHt9O1xyXG4vLyBVc2VyYmFjay5hY2Nlc3NfdG9rZW4gPVxyXG4vLyAgIFwiNzYwM3w3MjM4OXxZNkhzc1JPY3N2ekVtUjBhZ1NRUGVWQ0FkWTNuYzdmdUcxRkI2UmZnZG1ZdzQ5QkRRNFwiO1xyXG4vLyAoZnVuY3Rpb24gKGQpIHtcclxuLy8gICB2YXIgcyA9IGQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuLy8gICBzLmFzeW5jID0gdHJ1ZTtcclxuLy8gICBzLnNyYyA9IFwiaHR0cHM6Ly9zdGF0aWMudXNlcmJhY2suaW8vd2lkZ2V0L3YxLmpzXCI7XHJcbi8vICAgKGQuaGVhZCB8fCBkLmJvZHkpLmFwcGVuZENoaWxkKHMpO1xyXG4vLyB9KShkb2N1bWVudCk7XHJcblxuaWYgKHBhZ2luYUluaWNpYWwpIHtcbiAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGNvbnN0IGZ1bGxCYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Z1bGwtYmFubmVyXCIpO1xuICAgIGZ1bGxCYW5uZXIucXVlcnlTZWxlY3RvcihcIi5zd2lwZXItYnV0dG9uLW5leHRcIikuY2xpY2soKTtcbiAgfSwgNTAwMCk7XG59XG5cbmNvbnN0IGNyaWFyQnJlYWRjcnVtYnMgPSAoKSA9PiB7XHJcbiAgICAvLyAxIENSSUFSIENPTlRFSU5FUlxyXG4gICAgY29uc3QgZGl2QnJlYWRjcnVtYnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZGl2QnJlYWRjcnVtYnMuaWQgPSBcImJyZWFkY3J1bWJzXCI7XHJcbiAgICAvLyAyIENSSUFSIE9SREVSRUQgTElTVCBcclxuICAgIGNvbnN0IG9yZGVyZWRMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9sXCIpO1xyXG4gICAgb3JkZXJlZExpc3Qudm9jYWIgPSBcImh0dHBzOi8vc2NoZW1hLm9yZy9cIjtcclxuICAgIG9yZGVyZWRMaXN0LnR5cGVvZiA9IFwiQnJlYWRjcnVtYkxpc3RcIjtcclxuICAgIC8vIDMgQ1JJQVIgTElcclxuICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgbGlzdEl0ZW0ucHJvcGVydHkgPSBcIml0ZW1MaXN0RWxlbWVudFwiO1xyXG4gICAgbGlzdEl0ZW0udHlwZW9mID0gXCJMaXN0SXRlbVwiO1xyXG4gICAgLy8gNCBDUklBUiBicmVhZGNydW1iIGxpbmtcclxuICAgIGNvbnN0IGxpbmtCcmVhZGNydW1iID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICBsaW5rQnJlYWRjcnVtYi5ocmVmID0gXCIvXCI7XHJcbiAgICBsaW5rQnJlYWRjcnVtYi5wcm9wZXJ0eSA9IFwiaXRlbVwiO1xyXG4gICAgbGlua0JyZWFkY3J1bWIudHlwZW9mID0gXCJXZWJQYWdlXCI7XHJcbiAgICBsaW5rQnJlYWRjcnVtYi50ZXh0Q29udGVudCA9IFwiUMOhZ2luYSBpbmljaWFsXCI7XHJcbiAgICAvLyA0IENSSUFSIE1FVEEgXHJcbiAgICBjb25zdCBtZXRhQnJlYWRjcnVtYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJtZXRhXCIpO1xyXG4gICAgbWV0YUJyZWFkY3J1bWIucHJvcGVydHkgPSBcInBvc2l0aW9uXCI7XHJcbiAgICBtZXRhQnJlYWRjcnVtYi5jb250ZW50ID0gXCIxXCI7XHJcbiAgICAvLyBBUFBFTkRTIDQtPjNcclxuICAgIGxpc3RJdGVtLmFwcGVuZChsaW5rQnJlYWRjcnVtYik7XHJcbiAgICBsaXN0SXRlbS5hcHBlbmQobWV0YUJyZWFkY3J1bWIpO1xyXG4gICAgLy8gQVBQRU5EUyAzLT4yXHJcbiAgICBvcmRlcmVkTGlzdC5hcHBlbmQobGlzdEl0ZW0pO1xyXG4gICAgLy8gQVBQRU5EIDItPjFcclxuICAgIGRpdkJyZWFkY3J1bWJzLmFwcGVuZChvcmRlcmVkTGlzdCk7XHJcblxyXG4gICAgcmV0dXJuIGRpdkJyZWFkY3J1bWJzO1xyXG59XHJcblxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAnc3RyaWN0J1xyXG5cclxuICAgIHRyeSB7XHJcblxyXG5cclxuICAgICAgICAvLyBDUklBUiBCUkVBRENSVU1CIENVU1RPTUlaQURPXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuYXBwZW5kKGNyaWFyQnJlYWRjcnVtYnMoKSk7XHJcblxyXG4gICAgICAgIC8qKiBDdXN0b20gbGlzdCAqKi9cclxuICAgICAgICBjb25zdCBuZXdMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JyZWFkY3J1bWJzJyk7XHJcblxyXG4gICAgICAgIC8qKiBFeGNsdWRlIGhvbWUgcGFnZSAqKi9cclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnLycpIHtcclxuICAgICAgICAgICAgbmV3TGlzdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYnJlYWRjcnVtYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnJlYWRjcnVtYnMnKTtcclxuICAgICAgICBpZiAoYnJlYWRjcnVtYnMpIHtcclxuICAgICAgICAgICAgY29uc3QgdWwgPSBicmVhZGNydW1icy5xdWVyeVNlbGVjdG9yKCd1bCcpO1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IHVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EsIGxpID4gc3Ryb25nJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sID0gbmV3TGlzdC5xdWVyeVNlbGVjdG9yKCdvbCcpO1xyXG5cclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiogSW5zZXJ0IFNjaGVtYSBNYXJrdXAgaW4gYnJlYWRjcnVtYnMgKiovXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZSgncHJvcGVydHknLCAnaXRlbUxpc3RFbGVtZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCd0eXBlb2YnLCAnTGlzdEl0ZW0nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgncHJvcGVydHknLCAnaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCd0eXBlb2YnLCAnV2ViUGFnZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGEuc2V0QXR0cmlidXRlKCdwcm9wZXJ0eScsICdwb3NpdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGEuc2V0QXR0cmlidXRlKCdjb250ZW50JywgaW5kZXggKyAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqIFNldCBkYXRhIHRvIGxpbmsgKi9cclxuICAgICAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBpdGVtLmhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluay5pbm5lclRleHQgPSBpdGVtLmlubmVyVGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGkuYXBwZW5kKGxpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFwcGVuZChtZXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBvbC5hcHBlbmQobGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG5ld0xpc3QuYXBwZW5kKG9sKTtcclxuICAgICAgICAgICAgYnJlYWRjcnVtYnMucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAvKiogQ2hhbmdlIHBvc2l0aW9uIGJyZWFkY3J1bWIgKiovXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvcnBvID4gLmNvbnRlaW5lcicpO1xyXG4gICAgICAgICAgICBwcm9kdWN0Qm9keS5wcmVwZW5kKG5ld0xpc3QpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdMaXN0LnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEVycm8gZW5jb250cmFkbyAtPiAke2Vycm99YCk7XHJcbiAgICB9XHJcbn0pO1xuY29uc3QgY3JpYXJGb290ZXIgPSAoXHJcbiAgdXJsTG9nb0Zvb3RlcixcclxuICB1cmxGYWNlYm9vayxcclxuICB1cmxZb3V0dWJlLFxyXG4gIHVybFRpa1RvayxcclxuICB1cmxJbnN0YWdyYW0sXHJcbiAgbnVtQ29udGF0byxcclxuICBob3JhcmlvQXRlbmRpbWVudG8sXHJcbiAgbm9tZUVtcHJlc2FyaWFsLFxyXG4gIGVuZGVyZWNvRW1wcmVzYXJpYWwsXHJcbiAgc29icmVFbXByZXNhLFxyXG4gIHVybFNlbG9BbWV4LFxyXG4gIHVybFNlbG9EaW5lcnMsXHJcbiAgdXJsU2Vsb0VsbyxcclxuICB1cmxTZWxvSGlwZXJjYXJkLFxyXG4gIHVybFNlbG9NYXN0ZXJjYXJkLFxyXG4gIHVybFNlbG9WaXNhLFxyXG4gIHVybFNlbG9Cb2xldG8sXHJcbiAgdXJsU2Vsb0RpbmhlaXJvLFxyXG4gIHVybFNlbG9QaXgsXHJcbiAgdXJsU2V0YVZvbHRhclRvcG8sXHJcbiAgdXJsU2Vsb0NvbXByYVNlZ3VyYSxcclxuICB1cmxTZWxvR29vZ2xlU2FmZSxcclxuICB1cmxTZWxvTWVyY2Fkb0xpdnJlLFxyXG4gIHVybFNlbG9Db3JyZWlvcyxcclxuICB1cmxTZWxvT3BpbmlvZXNSZWFpcyxcclxuICBpbmZvTG9qYVBsdXMsXHJcbiAgdXJsSW1hZ2VtTG9nb0xvamEsXHJcbiAgdXJsTG9nb01lbnRvcmVzXHJcbikgPT4ge1xyXG4gIC8vIDEgQ1JJQVIgRk9PVEVSXHJcbiAgY29uc3QgZm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBmb290ZXIuaWQgPSBcImZvb3RlclwiO1xyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vIDIgQ1JJQVIgQ09OVEVJTkVSXHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgY29uc3QgZm9vdGVyQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBmb290ZXJDb250ZWluZXIuY2xhc3NMaXN0LmFkZChcImNvbnRlaW5lclwiKTtcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyAzIENSSUFSIERJViBMT0dPIEUgTUVESUFcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICBjb25zdCBkaXZMb2dvTWlkaWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdkxvZ29NaWRpYS5pZCA9IFwibG9nby1lLW1pZGlhXCI7XHJcbiAgLy8gNCBkaXYgbG9nbyBlIG1pZGlhIGJveFxyXG4gIGNvbnN0IGJveExvZ29NaWRpYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgYm94TG9nb01pZGlhLmNsYXNzTGlzdC5hZGQoXCJsb2dvLWUtbWlkaWEtYm94XCIpO1xyXG4gIC8vIDUgbGluayBsb2dvIGZvb3RlclxyXG4gIGNvbnN0IGxpbmtMb2dvRm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgbGlua0xvZ29Gb290ZXIuY2xhc3NMaXN0LmFkZChcImxvZ28tZm9vdGVyXCIpO1xyXG4gIGxpbmtMb2dvRm9vdGVyLmhyZWYgPSBcIi9cIjtcclxuICAvLyA2IGltYWdlbSBsb2dvXHJcbiAgY29uc3QgaW1hZ2VtTG9nb0Zvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1hZ2VtTG9nb0Zvb3Rlci5pZCA9IFwibG9nby1mb290ZXItaW1nXCI7XHJcbiAgaW1hZ2VtTG9nb0Zvb3Rlci5zcmMgPSB1cmxMb2dvRm9vdGVyO1xyXG4gIC8vIEFQUEVORFMgIDYtPjVcclxuICBsaW5rTG9nb0Zvb3Rlci5hcHBlbmQoaW1hZ2VtTG9nb0Zvb3Rlcik7XHJcbiAgLy8gNSBkaXYgbWlkaWFzXHJcbiAgY29uc3QgZGl2TWlkaWFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZNaWRpYXMuY2xhc3NMaXN0LmFkZChcIm1pZGlhc1wiKTtcclxuICAvLyA2IGxpbmtNaWRpYXNcclxuICBjb25zdCBtaWRpYUZhY2Vib29rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgbWlkaWFGYWNlYm9vay5ocmVmID0gdXJsRmFjZWJvb2s7XHJcbiAgbWlkaWFGYWNlYm9vay50YXJnZXQgPSBcIl9ibGFua1wiO1xyXG4gIG1pZGlhRmFjZWJvb2suY2xhc3NMaXN0LmFkZChcIm1pZGlhcy1pdGVtXCIpO1xyXG4gIC8vIDcgaWNvbmUgZmFjZWJvb2tcclxuICBjb25zdCBpY29uZUZhY2Vib29rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XHJcbiAgaWNvbmVGYWNlYm9vay5jbGFzc0xpc3QuYWRkKFwiaWNvbi1mYWNlYm9va1wiKTtcclxuICAvLyA3IGNyaWFyIHNwYW4gRmFjZWJvb2tcclxuICBjb25zdCBzcGFuRmFjZWJvb2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICBzcGFuRmFjZWJvb2sudGV4dENvbnRlbnQgPSBcIkZhY2Vib29rXCI7XHJcbiAgLy8gQXBwZW5kcyA3LT42XHJcbiAgbWlkaWFGYWNlYm9vay5hcHBlbmQoaWNvbmVGYWNlYm9vayk7XHJcbiAgbWlkaWFGYWNlYm9vay5hcHBlbmQoc3BhbkZhY2Vib29rKTtcclxuICAvLyA2IGxpbmtNaWRpYXNcclxuICBjb25zdCBtaWRpYVlvdXR1YmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBtaWRpYVlvdXR1YmUuaHJlZiA9IHVybFlvdXR1YmU7XHJcbiAgbWlkaWFZb3V0dWJlLnRhcmdldCA9IFwiX2JsYW5rXCI7XHJcbiAgbWlkaWFZb3V0dWJlLmNsYXNzTGlzdC5hZGQoXCJtaWRpYXMtaXRlbVwiKTtcclxuICAvLyA3IGljb25lIGZhY2Vib29rXHJcbiAgY29uc3QgaWNvbmVZb3V0dWJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XHJcbiAgaWNvbmVZb3V0dWJlLmNsYXNzTGlzdC5hZGQoXCJpY29uLXlvdXR1YmUtcGxheVwiKTtcclxuICAvLyA3IGNyaWFyIHNwYW4gWW91dHViZVxyXG4gIGNvbnN0IHNwYW5Zb3V0dWJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgc3BhbllvdXR1YmUudGV4dENvbnRlbnQgPSBcIllvdXR1YmVcIjtcclxuICAvLyBBcHBlbmRzIDctPjZcclxuICBtaWRpYVlvdXR1YmUuYXBwZW5kKGljb25lWW91dHViZSk7XHJcbiAgbWlkaWFZb3V0dWJlLmFwcGVuZChzcGFuWW91dHViZSk7XHJcbiAgXHJcbiAgY29uc3QgbWlkaWFUaWtUb2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBtaWRpYVRpa1Rvay5ocmVmID0gdXJsVGlrVG9rO1xyXG4gIG1pZGlhVGlrVG9rLnRhcmdldCA9IFwiX2JsYW5rXCI7XHJcbiAgbWlkaWFUaWtUb2suY2xhc3NMaXN0LmFkZChcIm1pZGlhcy1pdGVtXCIpO1xyXG4gIC8vIDcgaWNvbmUgZmFjZWJvb2tcclxuICBjb25zdCBpY29uZVRpa1RvayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xyXG4gIGljb25lVGlrVG9rLmNsYXNzTGlzdC5hZGQoXCJpY29uLXRpa3Rva1wiKTtcclxuICAvLyA3IGNyaWFyIHNwYW4gVGlrVG9rXHJcbiAgY29uc3Qgc3BhblRpa1RvayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gIHNwYW5UaWtUb2sudGV4dENvbnRlbnQgPSBcIlRpa1Rva1wiO1xyXG4gIC8vIEFwcGVuZHMgNy0+NlxyXG4gIG1pZGlhVGlrVG9rLmFwcGVuZChpY29uZVRpa1Rvayk7XHJcbiAgbWlkaWFUaWtUb2suYXBwZW5kKHNwYW5UaWtUb2spO1xyXG4gIC8vIDYgbGlua01pZGlhc1xyXG4gIGNvbnN0IG1pZGlhSW5zdGFncmFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgbWlkaWFJbnN0YWdyYW0uaHJlZiA9IHVybEluc3RhZ3JhbTtcclxuICBtaWRpYUluc3RhZ3JhbS50YXJnZXQgPSBcIl9ibGFua1wiO1xyXG4gIG1pZGlhSW5zdGFncmFtLmNsYXNzTGlzdC5hZGQoXCJtaWRpYXMtaXRlbVwiKTtcclxuICAvLyA3IGljb25lIGZhY2Vib29rXHJcbiAgY29uc3QgaWNvbmVJbnN0YWdyYW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcclxuICBpY29uZUluc3RhZ3JhbS5jbGFzc0xpc3QuYWRkKFwiaWNvbi1pbnN0YWdyYW1cIik7XHJcbiAgLy8gNyBjcmlhciBzcGFuIEluc3RhZ3JhbVxyXG4gIGNvbnN0IHNwYW5JbnN0YWdyYW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICBzcGFuSW5zdGFncmFtLnRleHRDb250ZW50ID0gXCJJbnN0YWdyYW1cIjtcclxuICAvLyBBcHBlbmRzIDctPjZcclxuICBtaWRpYUluc3RhZ3JhbS5hcHBlbmQoaWNvbmVJbnN0YWdyYW0pO1xyXG4gIG1pZGlhSW5zdGFncmFtLmFwcGVuZChzcGFuSW5zdGFncmFtKTtcclxuICAvLyBBcHBlbmRzIDYtPjVcclxuICBkaXZNaWRpYXMuYXBwZW5kKG1pZGlhRmFjZWJvb2spO1xyXG4gIGRpdk1pZGlhcy5hcHBlbmQobWlkaWFZb3V0dWJlKTtcclxuICBkaXZNaWRpYXMuYXBwZW5kKG1pZGlhVGlrVG9rKTtcclxuICBkaXZNaWRpYXMuYXBwZW5kKG1pZGlhSW5zdGFncmFtKTtcclxuICAvLyBBcHBlbmRzIDUtPjRcclxuICBib3hMb2dvTWlkaWEuYXBwZW5kKGxpbmtMb2dvRm9vdGVyKTtcclxuICBib3hMb2dvTWlkaWEuYXBwZW5kKGRpdk1pZGlhcyk7XHJcbiAgLy8gQXBwZW5kIDQtPjNcclxuICBkaXZMb2dvTWlkaWEuYXBwZW5kKGJveExvZ29NaWRpYSk7XHJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgLy8gRklNIFNFQ0FPIExPR08gRSBNSURJQVxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyAzIENSSUFSIERJViBNRU5VU1xyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIGNvbnN0IG1lbnVzQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBtZW51c0NvbnRlaW5lci5pZCA9IFwibWVudXNcIjtcclxuICAvLyA0IENSSUFSIERJViBNRU5VUyBBTlRFRElNRU5UTyBFIE5FV1NMRVRURVJcclxuICBjb25zdCBtZW51c0F0ZW5kaW1lbnRvTmV3c2xldHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgbWVudXNBdGVuZGltZW50b05ld3NsZXR0ZXIuY2xhc3NMaXN0LmFkZChcIm1lbnVzLWF0ZW5kaW1lbnRvLWUtbmV3c2xldHRlclwiKTtcclxuICAvLyA1IENSSUFSIERJViBBVEVORElNRU5UT1xyXG4gIGNvbnN0IGRpdkF0ZW5kaW1lbnRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZBdGVuZGltZW50by5jbGFzc0xpc3QuYWRkKFwiYXRlbmRpbWVudG9cIik7XHJcbiAgLy8gNiBDUklBUiBINCBOVU0gQ09OVEFUTyBFIEhPUkFSSU8gQVRFTkRJTUVOVE9cclxuICBjb25zdCBoNEF0ZW5kaW1lbnRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImg0XCIpO1xyXG4gIGg0QXRlbmRpbWVudG8udGV4dENvbnRlbnQgPSBcIkF0ZW5kaW1lbnRvXCI7XHJcbiAgLy8gNiBDUklBUiBESVYgTlVNIENPTlRBVE9cclxuICBjb25zdCBkaXZOdW1Db250YXRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZOdW1Db250YXRvLmNsYXNzTGlzdC5hZGQoXCJudW0tY29udGF0b1wiKTtcclxuICBkaXZOdW1Db250YXRvLmlubmVySFRNTCA9IG51bUNvbnRhdG87XHJcbiAgLy8gNiBDUklBUiBQQVJBR1JBRk8gSE9SQVJJTyBBVEVORElNRU5UT1xyXG4gIGNvbnN0IHBIb3JhcmlvQXRlbmRpbWVudG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICBwSG9yYXJpb0F0ZW5kaW1lbnRvLmlubmVySFRNTCA9IGhvcmFyaW9BdGVuZGltZW50bztcclxuXHJcbiAgLy8gQVBQRU5EIDYtPjVcclxuICBkaXZBdGVuZGltZW50by5hcHBlbmQoaDRBdGVuZGltZW50byk7XHJcbiAgZGl2QXRlbmRpbWVudG8uYXBwZW5kKGRpdk51bUNvbnRhdG8pO1xyXG4gIGRpdkF0ZW5kaW1lbnRvLmFwcGVuZChwSG9yYXJpb0F0ZW5kaW1lbnRvKTtcclxuXHJcbiAgLy8gNSBDUklBUiBGT09URVIgTkVXU0xFVFRFUlxyXG4gIGNvbnN0IGZvb3Rlck5ld3NsZXR0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGZvb3Rlck5ld3NsZXR0ZXIuY2xhc3NMaXN0LmFkZChcImZvb3Rlci1uZXdzbGV0dGVyXCIpO1xyXG4gIC8vIDYgQ1JJQVIgaDQgTmV3c2xldHRlclxyXG4gIGNvbnN0IGg0TmV3c2xldHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcclxuICBoNE5ld3NsZXR0ZXIudGV4dENvbnRlbnQgPSBcIk5ld3NsZXR0ZXJcIjtcclxuICAvLyA2IENSSUFSIFAgTkVXU0xFVFRFUlxyXG4gIGNvbnN0IHBOZXdzbGV0dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgcE5ld3NsZXR0ZXIuaW5uZXJIVE1MID0gXCJDb2xvcXVlIHNldSBlLW1haWwgcGFyYSA8YnI+ZGVzY29udG9zIEVYQ0xVU0lWT1MhXCI7XHJcbiAgLy8gNiBDUklBUiBCT1RBTyBOUkVXU0xFVFRFUlxyXG4gIGNvbnN0IGJvdGFvTmV3c2xldHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYm90YW9OZXdzbGV0dGVyLmNsYXNzTGlzdC5hZGQoXCJmb290ZXItbmV3c2xldHRlci1idXR0b25cIik7XHJcbiAgYm90YW9OZXdzbGV0dGVyLmlubmVySFRNTCA9IFwiQ2FkYXN0cmFyXCI7XHJcbiAgXHJcbiAgLy8gQVBQRU5EUyA2LT41XHJcbiAgZm9vdGVyTmV3c2xldHRlci5hcHBlbmQoaDROZXdzbGV0dGVyKTtcclxuICBmb290ZXJOZXdzbGV0dGVyLmFwcGVuZChwTmV3c2xldHRlcik7XHJcbiAgZm9vdGVyTmV3c2xldHRlci5hcHBlbmQoYm90YW9OZXdzbGV0dGVyKTtcclxuXHJcbiAgLy8gQVBQRU5EIDUtPjRcclxuICBtZW51c0F0ZW5kaW1lbnRvTmV3c2xldHRlci5hcHBlbmQoZGl2QXRlbmRpbWVudG8pO1xyXG4gIG1lbnVzQXRlbmRpbWVudG9OZXdzbGV0dGVyLmFwcGVuZChmb290ZXJOZXdzbGV0dGVyKTtcclxuICAvLyBiYW5uZXIuYWZ0ZXIoZm9vdGVyTmV3c2xldHRlcik7XHJcblxyXG4gIC8vIDQgTUVOVVMgSU5GTyBMT0pBXHJcbiAgY29uc3QgZGl2TWVudXNJbmZvTG9qYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2TWVudXNJbmZvTG9qYS5jbGFzc0xpc3QuYWRkKFwibWVudXMtaW5mby1sb2phXCIpO1xyXG4gIC8vIDUgQ1JJQVIgaDRcclxuICBjb25zdCBoNE1lbnVzSW5mb0xvamEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDRcIik7XHJcbiAgaDRNZW51c0luZm9Mb2phLnRleHRDb250ZW50ID0gbm9tZUVtcHJlc2FyaWFsO1xyXG4gIC8vIDUgQ1JJQVIgcFxyXG4gIGNvbnN0IHBNZW51c0luZm9Mb2phID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgcE1lbnVzSW5mb0xvamEuaW5uZXJIVE1MID0gZW5kZXJlY29FbXByZXNhcmlhbDtcclxuICAvLyBBUFBFTkRTIDUtPjRcclxuICBkaXZNZW51c0luZm9Mb2phLmFwcGVuZChoNE1lbnVzSW5mb0xvamEpO1xyXG4gIGRpdk1lbnVzSW5mb0xvamEuYXBwZW5kKHBNZW51c0luZm9Mb2phKTtcclxuXHJcbiAgLy8gNCBNRU5VUy1TT0JSRVxyXG4gIGNvbnN0IGRpdk1lbnVzU29icmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdk1lbnVzU29icmUuY2xhc3NMaXN0LmFkZChcIm1lbnVzLXNvYnJlXCIpO1xyXG4gIC8vIDUgQ1JJQVIgaDRcclxuICBjb25zdCBoNE1lbnVzU29icmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDRcIik7XHJcbiAgaDRNZW51c1NvYnJlLnRleHRDb250ZW50ID0gXCJTb2JyZVwiO1xyXG4gIC8vIDUgQ1JJQVIgcFxyXG4gIGNvbnN0IHBNZW51c1NvYnJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgcE1lbnVzU29icmUuaW5uZXJIVE1MID0gc29icmVFbXByZXNhO1xyXG4gIC8vIEFQUEVORFMgNS0+NFxyXG4gIGRpdk1lbnVzU29icmUuYXBwZW5kKGg0TWVudXNTb2JyZSk7XHJcbiAgZGl2TWVudXNTb2JyZS5hcHBlbmQocE1lbnVzU29icmUpO1xyXG5cclxuICAvLyA0IENSSUFSIE1FTlVTLUlOU1RJVFVDSU9OQUxcclxuICBjb25zdCBtZW51c0luc3RpdHVjaW9uYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIG1lbnVzSW5zdGl0dWNpb25hbC5jbGFzc0xpc3QuYWRkKFwibWVudXMtaW5zdGl0dWNpb25hbFwiKTtcclxuICAvLyA1IGg0XHJcbiAgY29uc3QgaDRNZW51c0luc3RpdHVjaW9uYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDRcIik7XHJcbiAgaDRNZW51c0luc3RpdHVjaW9uYWwudGV4dENvbnRlbnQgPSBcIkluc3RpdHVjaW9uYWxcIjtcclxuICAvLyBBUFBFTkQgNS0+NFxyXG4gIG1lbnVzSW5zdGl0dWNpb25hbC5hcHBlbmQoaDRNZW51c0luc3RpdHVjaW9uYWwpO1xyXG5cclxuICAvLyBBUFBFTkQgNC0+IDNcclxuICBtZW51c0NvbnRlaW5lci5hcHBlbmQobWVudXNBdGVuZGltZW50b05ld3NsZXR0ZXIpO1xyXG4gIG1lbnVzQ29udGVpbmVyLmFwcGVuZChkaXZNZW51c0luZm9Mb2phKTtcclxuICBtZW51c0NvbnRlaW5lci5hcHBlbmQoZGl2TWVudXNTb2JyZSk7XHJcbiAgbWVudXNDb250ZWluZXIuYXBwZW5kKG1lbnVzSW5zdGl0dWNpb25hbCk7XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIC8vIDMgQ1JJQVIgRElWIFNFTE9TIEUgTUFJU1xyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gIGNvbnN0IHNlbG9zRU1haXNDb250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHNlbG9zRU1haXNDb250ZWluZXIuaWQgPSBcInNlbG9zLWUtbWFpc1wiO1xyXG4gIC8vIDQgQ1JJQVJJIFBBR1VFIENPTSBFIFNFVEFcclxuICBjb25zdCBkaXZQYWd1ZUNvbUVTZXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZQYWd1ZUNvbUVTZXRhLmNsYXNzTGlzdC5hZGQoXCJwYWd1ZS1jb20tZS1zZXRhXCIpO1xyXG4gIC8vIDUgQ1JJQVIgRElWIFBBR1VFIENPTVxyXG4gIGNvbnN0IGRpdlBhZ3VlQ29tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZQYWd1ZUNvbS5jbGFzc0xpc3QuYWRkKFwicGFndWUtY29tXCIpO1xyXG4gIC8vIDYgY3JpYXIgaDRcclxuICBjb25zdCBoNFBhZ3VlQ29tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImg0XCIpO1xyXG4gIGg0UGFndWVDb20udGV4dENvbnRlbnQgPSBcIlBhZ3VlIGNvbVwiO1xyXG4gIC8vIDYgY3JpYXIgZGl2IHBhZ3VlIGNvbSBzZWxvc1xyXG4gIGNvbnN0IGRpdlBhZ3VlQ29tU2Vsb3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdlBhZ3VlQ29tU2Vsb3MuY2xhc3NMaXN0LmFkZChcInBhZ3VlLWNvbS1zZWxvcy1ib3hcIik7XHJcbiAgLy8gNyBDUklBUiBJTUcgcGFndWUgY29tIHNlbG8gQW1leFxyXG4gIGNvbnN0IGltYWdlbVBhZ3VlQ29tQW1leCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1hZ2VtUGFndWVDb21BbWV4LmNsYXNzTGlzdC5hZGQoXCJwYWd1ZS1jb20tc2Vsby1pbWdcIik7XHJcbiAgaW1hZ2VtUGFndWVDb21BbWV4LnNyYyA9IHVybFNlbG9BbWV4O1xyXG4gIGltYWdlbVBhZ3VlQ29tQW1leC5hbHQgPSBgUGFndWUgY29tIEFtZXhgO1xyXG4gIC8vIDcgQ1JJQVIgSU1HIHBhZ3VlIGNvbSBzZWxvIERpbmVyc1xyXG4gIGNvbnN0IGltYWdlbVBhZ3VlQ29tRGluZXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1QYWd1ZUNvbURpbmVycy5jbGFzc0xpc3QuYWRkKFwicGFndWUtY29tLXNlbG8taW1nXCIpO1xyXG4gIGltYWdlbVBhZ3VlQ29tRGluZXJzLnNyYyA9IHVybFNlbG9EaW5lcnM7XHJcbiAgaW1hZ2VtUGFndWVDb21EaW5lcnMuYWx0ID0gYFBhZ3VlIGNvbSBEaW5lcnNgO1xyXG4gIC8vIDcgQ1JJQVIgSU1HIHBhZ3VlIGNvbSBzZWxvIEVsb1xyXG4gIGNvbnN0IGltYWdlbVBhZ3VlQ29tRWxvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1QYWd1ZUNvbUVsby5jbGFzc0xpc3QuYWRkKFwicGFndWUtY29tLXNlbG8taW1nXCIpO1xyXG4gIGltYWdlbVBhZ3VlQ29tRWxvLnNyYyA9IHVybFNlbG9FbG87XHJcbiAgaW1hZ2VtUGFndWVDb21FbG8uYWx0ID0gYFBhZ3VlIGNvbSBFbG9gO1xyXG4gIC8vIDcgQ1JJQVIgSU1HIHBhZ3VlIGNvbSBzZWxvIEhpcGVyY2FyZFxyXG4gIGNvbnN0IGltYWdlbVBhZ3VlQ29tSGlwZXJjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1QYWd1ZUNvbUhpcGVyY2FyZC5jbGFzc0xpc3QuYWRkKFwicGFndWUtY29tLXNlbG8taW1nXCIpO1xyXG4gIGltYWdlbVBhZ3VlQ29tSGlwZXJjYXJkLnNyYyA9IHVybFNlbG9IaXBlcmNhcmQ7XHJcbiAgaW1hZ2VtUGFndWVDb21IaXBlcmNhcmQuYWx0ID0gYFBhZ3VlIGNvbSBIaXBlcmNhcmRgO1xyXG4gIC8vIDcgQ1JJQVIgSU1HIHBhZ3VlIGNvbSBzZWxvIE1hc3RlcmNhcmRcclxuICBjb25zdCBpbWFnZW1QYWd1ZUNvbU1hc3RlcmNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGltYWdlbVBhZ3VlQ29tTWFzdGVyY2FyZC5jbGFzc0xpc3QuYWRkKFwicGFndWUtY29tLXNlbG8taW1nXCIpO1xyXG4gIGltYWdlbVBhZ3VlQ29tTWFzdGVyY2FyZC5zcmMgPSB1cmxTZWxvTWFzdGVyY2FyZDtcclxuICBpbWFnZW1QYWd1ZUNvbU1hc3RlcmNhcmQuYWx0ID0gYFBhZ3VlIGNvbSBNYXN0ZXJjYXJkYDtcclxuICAvLyA3IENSSUFSIElNRyBwYWd1ZSBjb20gc2VsbyBWaXNhXHJcbiAgY29uc3QgaW1hZ2VtUGFndWVDb21WaXNhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1QYWd1ZUNvbVZpc2EuY2xhc3NMaXN0LmFkZChcInBhZ3VlLWNvbS1zZWxvLWltZ1wiKTtcclxuICBpbWFnZW1QYWd1ZUNvbVZpc2Euc3JjID0gdXJsU2Vsb1Zpc2E7XHJcbiAgaW1hZ2VtUGFndWVDb21WaXNhLmFsdCA9IGBQYWd1ZSBjb20gVmlzYWA7XHJcbiAgLy8gNyBDUklBUiBJTUcgcGFndWUgY29tIHNlbG8gQm9sZXRvXHJcbiAgY29uc3QgaW1hZ2VtUGFndWVDb21Cb2xldG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGltYWdlbVBhZ3VlQ29tQm9sZXRvLmNsYXNzTGlzdC5hZGQoXCJwYWd1ZS1jb20tc2Vsby1pbWdcIik7XHJcbiAgaW1hZ2VtUGFndWVDb21Cb2xldG8uc3JjID0gdXJsU2Vsb0JvbGV0bztcclxuICBpbWFnZW1QYWd1ZUNvbUJvbGV0by5hbHQgPSBgUGFndWUgY29tIEJvbGV0b2A7XHJcbiAgLy8gNyBDUklBUiBJTUcgcGFndWUgY29tIHNlbG8gRGluaGVpcm9cclxuICBjb25zdCBpbWFnZW1QYWd1ZUNvbURpbmhlaXJvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1QYWd1ZUNvbURpbmhlaXJvLmNsYXNzTGlzdC5hZGQoXCJwYWd1ZS1jb20tc2Vsby1pbWdcIik7XHJcbiAgaW1hZ2VtUGFndWVDb21EaW5oZWlyby5zcmMgPSB1cmxTZWxvRGluaGVpcm87XHJcbiAgaW1hZ2VtUGFndWVDb21EaW5oZWlyby5hbHQgPSBgUGFndWUgY29tIERpbmhlaXJvYDtcclxuXHJcbiAgLy8gOCBDUklBUiBJTUcgcGFndWUgY29tIHNlbG8gUGl4XHJcbiAgY29uc3QgaW1hZ2VtUGFndWVDb21QaXggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGltYWdlbVBhZ3VlQ29tUGl4LmNsYXNzTGlzdC5hZGQoXCJwYWd1ZS1jb20tc2Vsby1pbWdcIik7XHJcbiAgaW1hZ2VtUGFndWVDb21QaXguc3JjID0gdXJsU2Vsb1BpeDtcclxuICBpbWFnZW1QYWd1ZUNvbVBpeC5hbHQgPSBgUGFndWUgY29tIFBpeGA7XHJcblxyXG4gIC8vIEFQUEVORFMgNy0+NlxyXG4gIGRpdlBhZ3VlQ29tU2Vsb3MuYXBwZW5kKGltYWdlbVBhZ3VlQ29tQW1leCk7XHJcbiAgZGl2UGFndWVDb21TZWxvcy5hcHBlbmQoaW1hZ2VtUGFndWVDb21EaW5lcnMpO1xyXG4gIGRpdlBhZ3VlQ29tU2Vsb3MuYXBwZW5kKGltYWdlbVBhZ3VlQ29tRWxvKTtcclxuICBkaXZQYWd1ZUNvbVNlbG9zLmFwcGVuZChpbWFnZW1QYWd1ZUNvbUhpcGVyY2FyZCk7XHJcbiAgZGl2UGFndWVDb21TZWxvcy5hcHBlbmQoaW1hZ2VtUGFndWVDb21NYXN0ZXJjYXJkKTtcclxuICBkaXZQYWd1ZUNvbVNlbG9zLmFwcGVuZChpbWFnZW1QYWd1ZUNvbVZpc2EpO1xyXG4gIGRpdlBhZ3VlQ29tU2Vsb3MuYXBwZW5kKGltYWdlbVBhZ3VlQ29tQm9sZXRvKTtcclxuICBkaXZQYWd1ZUNvbVNlbG9zLmFwcGVuZChpbWFnZW1QYWd1ZUNvbURpbmhlaXJvKTtcclxuICBkaXZQYWd1ZUNvbVNlbG9zLmFwcGVuZChpbWFnZW1QYWd1ZUNvbVBpeCk7XHJcblxyXG4gIC8vIEFQUEVORFMgNi0+NVxyXG4gIGRpdlBhZ3VlQ29tLmFwcGVuZChoNFBhZ3VlQ29tKTtcclxuICBkaXZQYWd1ZUNvbS5hcHBlbmQoZGl2UGFndWVDb21TZWxvcyk7XHJcblxyXG4gIC8vIDUgQ1JJQVIgU0VUQSBRVUUgVk9MVEEgQU8gVE9QT1xyXG4gIGNvbnN0IGxpbmtTZXRhVm9sdGFyVG9wbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIGxpbmtTZXRhVm9sdGFyVG9wby5jbGFzc0xpc3QuYWRkKFwic2V0YS12b2x0YXItdG9wb1wiKTtcclxuICBsaW5rU2V0YVZvbHRhclRvcG8uaHJlZiA9IFwiI3RvcFwiO1xyXG4gIC8vIDYgSU1BR0VNIFNFVEEgVk9MVEFSIFRPUE9cclxuICBjb25zdCBpbWFnZW1TZXRhVm9sdGFyVG9wbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1hZ2VtU2V0YVZvbHRhclRvcG8uY2xhc3NMaXN0LmFkZChcInNldGEtdm9sdGFyLXRvcG8taW1nXCIpO1xyXG4gIGltYWdlbVNldGFWb2x0YXJUb3BvLnNyYyA9IHVybFNldGFWb2x0YXJUb3BvO1xyXG4gIC8vIEFQUEVORCA2LT41XHJcbiAgbGlua1NldGFWb2x0YXJUb3BvLmFwcGVuZChpbWFnZW1TZXRhVm9sdGFyVG9wbyk7XHJcblxyXG4gIC8vIEFQUEVORFMgNS0+NFxyXG4gIGRpdlBhZ3VlQ29tRVNldGEuYXBwZW5kKGRpdlBhZ3VlQ29tKTtcclxuICBkaXZQYWd1ZUNvbUVTZXRhLmFwcGVuZChsaW5rU2V0YVZvbHRhclRvcG8pO1xyXG5cclxuICAvLyA0IENSSUFSIFNFTE9TIEUgSU5GT1xyXG4gIGNvbnN0IGRpdlNlbG9zRUluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdlNlbG9zRUluZm8uY2xhc3NMaXN0LmFkZChcInNlbG9zLWUtaW5mb1wiKTtcclxuICAvLyA1IERJViBTRUxPU1xyXG4gIGNvbnN0IGRpdlNlbG9zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZTZWxvcy5jbGFzc0xpc3QuYWRkKFwic2Vsb3NcIik7XHJcbiAgLy8gNiBoNCBTZWxvc1xyXG4gIGNvbnN0IGg0U2Vsb3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDRcIik7XHJcbiAgaDRTZWxvcy50ZXh0Q29udGVudCA9IFwiU2Vsb3NcIjtcclxuICAvLyA2IENSSUFSIFNFTE9TIEJPWFxyXG4gIGNvbnN0IHNlbG9zQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBzZWxvc0JveC5jbGFzc0xpc3QuYWRkKFwic2Vsb3MtYm94XCIpO1xyXG4gIC8vIDcgQ1JJQVIgSU1BR0VNIENvbXByYVNlZ3VyYVxyXG4gIGNvbnN0IGltYWdlbVNlbG9Db21wcmFTZWd1cmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGltYWdlbVNlbG9Db21wcmFTZWd1cmEuY2xhc3NMaXN0LmFkZChcInNlbG8taW1nXCIpO1xyXG4gIGltYWdlbVNlbG9Db21wcmFTZWd1cmEuc3JjID0gdXJsU2Vsb0NvbXByYVNlZ3VyYTtcclxuICBpbWFnZW1TZWxvQ29tcHJhU2VndXJhLmFsdCA9IFwiQ29tcHJhU2VndXJhXCI7XHJcbiAgLy8gNyBDUklBUiBJTUFHRU0gR29vZ2xlU2FmZVxyXG4gIGNvbnN0IGltYWdlbVNlbG9Hb29nbGVTYWZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1TZWxvR29vZ2xlU2FmZS5jbGFzc0xpc3QuYWRkKFwic2Vsby1pbWdcIik7XHJcbiAgaW1hZ2VtU2Vsb0dvb2dsZVNhZmUuc3JjID0gdXJsU2Vsb0dvb2dsZVNhZmU7XHJcbiAgaW1hZ2VtU2Vsb0dvb2dsZVNhZmUuYWx0ID0gXCJHb29nbGVTYWZlXCI7XHJcbiAgLy8gNyBDUklBUiBJTUFHRU0gTWVyY2Fkb0xpdnJlXHJcbiAgY29uc3QgaW1hZ2VtU2Vsb01lcmNhZG9MaXZyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1hZ2VtU2Vsb01lcmNhZG9MaXZyZS5jbGFzc0xpc3QuYWRkKFwic2Vsby1pbWdcIik7XHJcbiAgaW1hZ2VtU2Vsb01lcmNhZG9MaXZyZS5zcmMgPSB1cmxTZWxvTWVyY2Fkb0xpdnJlO1xyXG4gIGltYWdlbVNlbG9NZXJjYWRvTGl2cmUuYWx0ID0gXCJNZXJjYWRvTGl2cmVcIjtcclxuICAvLyA3IENSSUFSIElNQUdFTSBDb3JyZWlvc1xyXG4gIGNvbnN0IGltYWdlbVNlbG9Db3JyZWlvcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1hZ2VtU2Vsb0NvcnJlaW9zLmNsYXNzTGlzdC5hZGQoXCJzZWxvLWltZ1wiKTtcclxuICBpbWFnZW1TZWxvQ29ycmVpb3Muc3JjID0gdXJsU2Vsb0NvcnJlaW9zO1xyXG4gIGltYWdlbVNlbG9Db3JyZWlvcy5hbHQgPSBcIkNvcnJlaW9zXCI7XHJcbiAgLy8gNyBDUklBUiBJTUFHRU0gT3BpbmlvZXNSZWFpc1xyXG4gIGNvbnN0IGltYWdlbVNlbG9PcGluaW9lc1JlYWlzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1TZWxvT3BpbmlvZXNSZWFpcy5jbGFzc0xpc3QuYWRkKFwic2Vsby1pbWdcIik7XHJcbiAgaW1hZ2VtU2Vsb09waW5pb2VzUmVhaXMuc3JjID0gdXJsU2Vsb09waW5pb2VzUmVhaXM7XHJcbiAgaW1hZ2VtU2Vsb09waW5pb2VzUmVhaXMuYWx0ID0gXCJPcGluaW9lc1JlYWlzXCI7XHJcblxyXG4gIC8vIEFQUEVORFMgNy0+NlxyXG4gIHNlbG9zQm94LmFwcGVuZChpbWFnZW1TZWxvQ29tcHJhU2VndXJhKTtcclxuICBzZWxvc0JveC5hcHBlbmQoaW1hZ2VtU2Vsb0dvb2dsZVNhZmUpO1xyXG4gIHNlbG9zQm94LmFwcGVuZChpbWFnZW1TZWxvTWVyY2Fkb0xpdnJlKTtcclxuICBzZWxvc0JveC5hcHBlbmQoaW1hZ2VtU2Vsb0NvcnJlaW9zKTtcclxuICBzZWxvc0JveC5hcHBlbmQoaW1hZ2VtU2Vsb09waW5pb2VzUmVhaXMpO1xyXG5cclxuICAvLyBBUFBFTkRTIDYtPjVcclxuICBkaXZTZWxvcy5hcHBlbmQoaDRTZWxvcyk7XHJcbiAgZGl2U2Vsb3MuYXBwZW5kKHNlbG9zQm94KTtcclxuXHJcbiAgLy8gNSBESVYgSU5GTyBMT0pBIFBMVVNTXHJcbiAgY29uc3QgaW5mb0xvamFQbHVzQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBpbmZvTG9qYVBsdXNDb250ZWluZXIuY2xhc3NMaXN0LmFkZChcImluZi1sb2phLXBsdXNcIik7XHJcbiAgLy8gNiBQQVJBR1JBRk8gbmZvIGxvamFcclxuICBjb25zdCBwSW5mb0xvamEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICBwSW5mb0xvamEuaW5uZXJIVE1MID0gaW5mb0xvamFQbHVzO1xyXG4gIC8vIEFQUEVORFMgNi0+NVxyXG4gIGluZm9Mb2phUGx1c0NvbnRlaW5lci5hcHBlbmQocEluZm9Mb2phKTtcclxuICAvLyBBUFBFTkRTIDUtPjRcclxuICBkaXZTZWxvc0VJbmZvLmFwcGVuZChkaXZTZWxvcyk7XHJcbiAgZGl2U2Vsb3NFSW5mby5hcHBlbmQoaW5mb0xvamFQbHVzQ29udGVpbmVyKTtcclxuXHJcbiAgLy8gQVBQRU5EUyA0LT4zXHJcbiAgc2Vsb3NFTWFpc0NvbnRlaW5lci5hcHBlbmQoZGl2UGFndWVDb21FU2V0YSk7XHJcbiAgc2Vsb3NFTWFpc0NvbnRlaW5lci5hcHBlbmQoZGl2U2Vsb3NFSW5mbyk7XHJcbiAgc2Vsb3NFTWFpc0NvbnRlaW5lci5hcHBlbmQoZGl2U2Vsb3NFSW5mbyk7XHJcblxyXG4gIC8vIEFQUEVORFMgMy0+MlxyXG4gIGZvb3RlckNvbnRlaW5lci5hcHBlbmQoZGl2TG9nb01pZGlhKTtcclxuICBmb290ZXJDb250ZWluZXIuYXBwZW5kKG1lbnVzQ29udGVpbmVyKTtcclxuICBmb290ZXJDb250ZWluZXIuYXBwZW5kKHNlbG9zRU1haXNDb250ZWluZXIpO1xyXG5cclxuICAvLyAyIENPUFlSSUdIVFMgQ09OVEVJTkVSXHJcbiAgY29uc3QgY29weXJpZ2h0c0NvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgY29weXJpZ2h0c0NvbnRlaW5lci5pZCA9IFwiY29weXJpZ2h0c1wiO1xyXG4gIC8vIDMgQ1JJQVIgSVRFTlMgQ09QWVxyXG4gIGNvbnN0IGNvcHlyaWdodHNJdGVtcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgY29weXJpZ2h0c0l0ZW1zLmNsYXNzTGlzdC5hZGQoXCJpdGVucy1jb3B5cmlnaHRzXCIpO1xyXG4gIC8vIDQgQ1JJQVIgVEVSTU9TIEUgUFJJVkFDSURBREVcclxuICBjb25zdCB0ZXJtb3NFUHJpdmFjaWRhZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHRlcm1vc0VQcml2YWNpZGFkZS5jbGFzc0xpc3QuYWRkKFwidGVybW9zLWUtcHJpdmFjaWRhZGVcIik7XHJcbiAgLy8gNSBQQVJBR1JBRk9cclxuICBjb25zdCBwYXJhZ3JhZm9UZXJtb3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAvLyA2IExJTktTIFRFUk1PU1xyXG4gIC8vIGNvbnN0IGxpbmtUZXJtb3NEZVVzbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIC8vIGxpbmtUZXJtb3NEZVVzby5ocmVmID0gXCIvcGFnaW5hL3Rlcm1vcy1kZS11c28uaHRtbFwiO1xyXG4gIC8vIGxpbmtUZXJtb3NEZVVzby5pbm5lckhUTUwgPSBcIlRlcm1vcyBkZSB1c28gZSBcIjtcclxuICAvLyA2IExJTktTIFRFUk1PU1xyXG4gIGNvbnN0IGxpbmtTZWd1cmFuY2FFUHJpdmFjaWRhZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBsaW5rU2VndXJhbmNhRVByaXZhY2lkYWRlLmhyZWYgPSBcIi9wYWdpbmEvc2VndXJhbmNhLWUtcHJpdmFjaWRhZGUuaHRtbFwiO1xyXG4gIGxpbmtTZWd1cmFuY2FFUHJpdmFjaWRhZGUuaW5uZXJIVE1MID0gXCJQb2zDrXRpY2EgZGUgcHJpdmFjaWRhZGVcIjtcclxuXHJcbiAgLy8gQVBQRU5EUyA2LT41XHJcbiAgLy8gcGFyYWdyYWZvVGVybW9zLmFwcGVuZChsaW5rVGVybW9zRGVVc28pO1xyXG4gIHBhcmFncmFmb1Rlcm1vcy5hcHBlbmQobGlua1NlZ3VyYW5jYUVQcml2YWNpZGFkZSk7XHJcbiAgLy8gQVBQRU5EUyA1LT40XHJcbiAgdGVybW9zRVByaXZhY2lkYWRlLmFwcGVuZChwYXJhZ3JhZm9UZXJtb3MpO1xyXG5cclxuICAvLyA0IGxvZ28gbG9qYSBpbnRlZ3JhZGFcclxuICBjb25zdCBsb2dvTG9qYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgbG9nb0xvamEuY2xhc3NMaXN0LmFkZChcImxvZ28tbG9qYS1pbnRlZ3JhZGFcIik7XHJcbiAgLy8gNSBpbWFnZW0gbG9nb1xyXG4gIGNvbnN0IGltYWdlbUxvZ29Mb2phID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1Mb2dvTG9qYS5jbGFzc0xpc3QuYWRkKFwibG9nby1sb2phLWludGVncmFkYS1pbWdcIik7XHJcbiAgaW1hZ2VtTG9nb0xvamEuc3JjID0gdXJsSW1hZ2VtTG9nb0xvamE7XHJcbiAgaW1hZ2VtTG9nb0xvamEuYWx0ID0gXCJJbWFnZW0gbG9nbyBsb2phXCI7XHJcbiAgLy8gQVBQRU5EIDUtPjRcclxuICBsb2dvTG9qYS5hcHBlbmQoaW1hZ2VtTG9nb0xvamEpO1xyXG4gIC8vIDQgRElWIE1FTlRPUkVTXHJcbiAgY29uc3QgZGl2TWVudG9yZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdk1lbnRvcmVzLmNsYXNzTGlzdC5hZGQoXCJtZW50b3Jlc1wiKTtcclxuICAvLyA1IFBBUkFHUkFGTyBNRU5UT1JFU1xyXG4gIGNvbnN0IHBNZW50b3JlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIHBNZW50b3Jlcy50ZXh0Q29udGVudCA9IFwiRGVzZW52b2x2aWRvIG5vIEJyYXNpbCBwZWxhIFwiO1xyXG4gIC8vIDUgTElOSyBNRU5UT1JFU1xyXG4gIGNvbnN0IGxpbmtNZW50b3JlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIGxpbmtNZW50b3Jlcy5jbGFzc0xpc3QuYWRkKFwibG9nby1tZW50b3Jlc1wiKTtcclxuICBsaW5rTWVudG9yZXMudGFyZ2V0ID0gXCJfYmxhbmtcIjtcclxuICBsaW5rTWVudG9yZXMuaHJlZiA9IFwiaHR0cHM6Ly9tZW50b3Jlcy5jb20uYnIvbG9qYS1pbnRlZ3JhZGEvXCI7XHJcbiAgLy8gNiBJTUFHRU0gTE9HTyBNRU5UT1JFU1xyXG4gIC8vIGNvbnN0IGltYWdlbUxvZ29NZW50b3JlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgLy8gaW1hZ2VtTG9nb01lbnRvcmVzLmNsYXNzTGlzdC5hZGQoXCJsb2dvLW1lbnRvcmVzLWltZ1wiKTtcclxuICAvLyBpbWFnZW1Mb2dvTWVudG9yZXMuc3JjID0gdXJsTG9nb01lbnRvcmVzO1xyXG4gIGNvbnN0IGltYWdlbUxvZ29NZW50b3JlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIGltYWdlbUxvZ29NZW50b3Jlcy50ZXh0Q29udGVudCA9IFwiTWVudG9yZXMgbG9qYSBpbnRlZ3JhZGEgbGF5b3V0XCI7XHJcblxyXG4gIC8vIEFQUEVORFMgNi0+NVxyXG4gIGxpbmtNZW50b3Jlcy5hcHBlbmQoaW1hZ2VtTG9nb01lbnRvcmVzKTtcclxuICAvLyBBUFBFTkRTIDUtPjRcclxuICBkaXZNZW50b3Jlcy5hcHBlbmQocE1lbnRvcmVzKTtcclxuICBkaXZNZW50b3Jlcy5hcHBlbmQobGlua01lbnRvcmVzKTtcclxuXHJcbiAgLy8gQVBQRU5EUyA0LT4zXHJcbiAgY29weXJpZ2h0c0l0ZW1zLmFwcGVuZCh0ZXJtb3NFUHJpdmFjaWRhZGUpO1xyXG4gIGNvcHlyaWdodHNJdGVtcy5hcHBlbmQobG9nb0xvamEpO1xyXG4gIGNvcHlyaWdodHNJdGVtcy5hcHBlbmQoZGl2TWVudG9yZXMpO1xyXG5cclxuICAvLyBBUFBFTkRTIDMtPjJcclxuICBjb3B5cmlnaHRzQ29udGVpbmVyLmFwcGVuZChjb3B5cmlnaHRzSXRlbXMpO1xyXG5cclxuICAvLyBBUFBFTkRTIDItPjFcclxuICBmb290ZXIuYXBwZW5kKGZvb3RlckNvbnRlaW5lcik7XHJcbiAgZm9vdGVyLmFwcGVuZChjb3B5cmlnaHRzQ29udGVpbmVyKTtcclxuICByZXR1cm4gZm9vdGVyO1xyXG59O1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBGT09URVJcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5jb25zdCBmb290ZXJMaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcm9kYXBlXCIpO1xyXG5mb290ZXJMaS5hcHBlbmQoXHJcbiAgY3JpYXJGb290ZXIoXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gSW5zZXJpciBkYWRvcyBhcXVpXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgbG9nb0NsaWVudGVOZWdhdGl2YSxcclxuICAgIGxpbmtDbGllbnRlRmFjZWJvb2ssXHJcbiAgICBsaW5rQ2xpZW50ZVlvdXR1YmUsXHJcbiAgICBsaW5rQ2xpZW50ZVRpa1RvayxcclxuICAgIGxpbmtDbGllbnRlSW5zdGFncmFtLFxyXG4gICAgdGVsZWZvbmVDbGllbnRlLFxyXG4gICAgaG9yYXJpb0Z1bmNpb25hbWVudG8sXHJcbiAgICByYXphb1NvY2lhbCxcclxuICAgIGNucGpFbmRlcmVjbyxcclxuICAgIGRlc2NyaXRpdm9OZWdvY2lvLFxyXG4gICAgYmFuZGVpcmFBbWV4LFxyXG4gICAgYmFuZGVpcmFEaW5lcnMsXHJcbiAgICBiYW5kZWlyYUVsbyxcclxuICAgIGFuZGVpcmFIaXBlcmNhcmQsXHJcbiAgICBiYW5kZWlyYU1hc3RlcmNhcmQsXHJcbiAgICBiYW5kZWlyYVZpc2EsXHJcbiAgICBiYW5kZWlyYUJvbGV0byxcclxuICAgIGJhbmRlaXJhRGluaGVpcm8sXHJcbiAgICBiYW5kZWlyYVBpeCxcclxuICAgIHVybFNldGEsXHJcbiAgICBzZWxvQ29tcHJhU2VndXJhLFxyXG4gICAgc2Vsb0dvb2dsZSxcclxuICAgIHNlbG9NZXJjYWRvbGl2cmUsXHJcbiAgICBzZWxvQ29ycmVpb3MsXHJcbiAgICBzZWxvT3BpbmlvZXMsXHJcbiAgICBkZXNjcml0aXZvSW5mZXJpb3IsXHJcbiAgICBsb2dvTG9qYUludGVncmFkYSxcclxuICAgIGxvZ29NZW50b3Jlc1xyXG4gIClcclxuKTtcclxuY29uc3QgZm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb290ZXJcIik7XHJcbmlmIChmb290ZXJMaSkge1xyXG4gIGlmIChmb290ZXIpIHtcclxuICAgIC8vIG5ld3NsZXR0ZXJcclxuICAgIHZhciBuZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXdzbGV0dGVyIC5pbnRlcm5vIC5pbnRlcm5vLWNvbnRldWRvXCIpO1xyXG4gICAgdmFyIG5ld3NGb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlci1uZXdzbGV0dGVyXCIpO1xyXG4gICAgbmV3c0Zvb3Rlci5hcHBlbmQobmV3cyk7XHJcbiAgICAvL3ZhciBzb3VyY2VBYm91dCA9IGZvb3RlckxpLnF1ZXJ5U2VsZWN0b3IoJy5zb2JyZS1sb2phLXJvZGFwZSBwJyk7XHJcbiAgICB2YXIgc291cmNlTWVudSA9IGZvb3RlckxpLnF1ZXJ5U2VsZWN0b3IoXCIubGlua3Mtcm9kYXBlLXBhZ2luYXMgdWxcIik7XHJcbiAgICBpZiAoIXNvdXJjZU1lbnUpIHtcclxuICAgICAgdmFyIHVybCA9IHVybFNpdGVDbGllbnRlO1xyXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgIHhoci5vcGVuKFwiR0VUXCIsIHVybCwgdHJ1ZSk7XHJcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBcImRvY3VtZW50XCI7XHJcbiAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBkb2MgPSBlLnRhcmdldC5yZXNwb25zZVhNTDtcclxuICAgICAgICBzb3VyY2VNZW51ID0gZG9jLnF1ZXJ5U2VsZWN0b3IoXCIubGlua3Mtcm9kYXBlLXBhZ2luYXMgdWxcIik7XHJcbiAgICAgICAgZm9vdGVyLnF1ZXJ5U2VsZWN0b3IoXCIjbWVudXMgLm1lbnVzLWluc3RpdHVjaW9uYWxcIikuYXBwZW5kKHNvdXJjZU1lbnUpO1xyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgbWVudUluc3RpdHVjaW9uYWwgPSBmb290ZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiNtZW51cyAubWVudXMtaW5zdGl0dWNpb25hbFwiXHJcbiAgICAgICk7XHJcbiAgICAgIHNvdXJjZU1lbnUgJiYgbWVudUluc3RpdHVjaW9uYWwgJiYgbWVudUluc3RpdHVjaW9uYWwuYXBwZW5kKHNvdXJjZU1lbnUpO1xyXG4gICAgfVxyXG4gICAgZm9vdGVyTGkuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGZvb3RlckxpLmFwcGVuZChmb290ZXIpO1xyXG4gIH1cclxufVxyXG5cbmNvbnN0IGJhbmRlaXJhc1Byb2R1dG9DYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gIFwiLmJhbmRlaXJhcy1wcm9kdXRvIHNwYW5cIlxuKTtcblxuYmFuZGVpcmFzUHJvZHV0b0NhcmRzLmZvckVhY2goKGVsZW0pID0+IHtcbiAgZWxlbS5pbm5lclRleHQgPSBlbGVtLmlubmVyVGV4dC5zcGxpdChcIiBcIilbMF0gKyBcIiBPRkZcIjtcbn0pO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zdCBhZGRCYW5kZWlyYXNDb250ZXVkbyA9XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJhbmRlaXJhcy1wcm9kdXRvXCIpO1xuICAgIGFkZEJhbmRlaXJhc0NvbnRldWRvLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgIGlmIChlbGVtLmlubmVyVGV4dCAhPT0gXCJcIiAmJiBlbGVtLmlubmVyVGV4dCAhPT0gXCJQUk9EVVRPIE9GRlwiKSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcImNvbnRldWRvXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCAxKTtcbn0pO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gIFwic3RyaWN0XCI7XHJcblxyXG4gIC8vIFNDUklQVCBQw4FHSU5BIElOSUNJQUxcclxuICB0cnkge1xyXG4gICAgaWYgKHBhZ2luYUluaWNpYWwoKSkge1xyXG4gICAgICBcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAvLyBDQUJFw4dBTEhPXHJcbiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgLy8gQkFSUkEgSU5JQ0lBTFxyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgIC8vIEluc2VyaXIgdGV4dG8gZSB1cmxcclxuICAgICAgY29uc3QgYmFycmFJbmljaWFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJhcnJhLWluaWNpYWxcIilbMF07XHJcbiAgICAgIGJhcnJhSW5pY2lhbC5hcHBlbmRDaGlsZChcclxuICAgICAgICBjcmlhckNvbnRldWRvQmFycmFJbmljaWFsKG1lbnNhZ2VtU2xvZ2FuLCBpY29uZVNsb2dhbilcclxuICAgICAgKTtcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAvLyBTRcOHw4NPIEZVTEwgQkFOTkVSU1xyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgIGNvbnN0IHNlY3Rpb25CYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlY2FvLWJhbm5lcnNcIik7XHJcbiAgICAgIC8vIEFwcGVuZCBzZcOnw7VlcyBCYW5uZXJzXHJcbiAgICAgIHNlY3Rpb25CYW5uZXIuYXBwZW5kKGNyaWFyRnVsbEJhbm5lckRlc2t0b3AoKSk7XHJcbiAgICAgIHNlY3Rpb25CYW5uZXIuYXBwZW5kKGNyaWFyRnVsbEJhbm5lck1vYmlsZSgpKTtcclxuICAgICAgaWYgKHNlY3Rpb25CYW5uZXIpIHtcclxuICAgICAgICBjb25zdCBpbWFnZXNEZXNrdG9wID0gW107XHJcbiAgICAgICAgY29uc3QgaW1hZ2VzTW9iaWxlID0gW107XHJcbiAgICAgICAgY29uc3Qgc2xpZGVzID0gc2VjdGlvbkJhbm5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlcyBsaVwiKTtcclxuICAgICAgICBzbGlkZXMuZm9yRWFjaCgoX3NsaWRlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB0aXRsZSA9IF9zbGlkZS5xdWVyeVNlbGVjdG9yKFwiLnRpdHVsb1wiKTtcclxuICAgICAgICAgIGNvbnN0IGxpbmsgPSBfc2xpZGUucXVlcnlTZWxlY3RvcihcImFcIik7XHJcbiAgICAgICAgICBjb25zdCBpbWcgPSBfc2xpZGUucXVlcnlTZWxlY3RvcihcImltZ1wiKTtcclxuICAgICAgICAgIHZhciBzcGxpdEFsdCA9IGltZy5hbHQudHJpbSgpLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJfXCIpOyAvLyBTZXBhcmEgcGVsbyBcIl9cIlxyXG4gICAgICAgICAgdmFyIGRldmljZVR5cGUgPSBzcGxpdEFsdFtzcGxpdEFsdC5sZW5ndGggLSAxXTtcclxuICAgICAgICAgIGlmIChkZXZpY2VUeXBlID09IFwiZGVza3RvcFwiKSB7XHJcbiAgICAgICAgICAgIGltYWdlc0Rlc2t0b3AucHVzaCh7XHJcbiAgICAgICAgICAgICAgc3JjOiBpbWcuc3JjLFxyXG4gICAgICAgICAgICAgIGFsdDogaW1nLmFsdCxcclxuICAgICAgICAgICAgICBsaW5rOiBsaW5rID8gbGluay5ocmVmIDogbnVsbCxcclxuICAgICAgICAgICAgICB0aXRsZTogdGl0bGUgPyB0aXRsZS5pbm5lckhUTUwgOiBudWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoZGV2aWNlVHlwZSA9PSBcIm1vYmlsZVwiKSB7XHJcbiAgICAgICAgICAgIGltYWdlc01vYmlsZS5wdXNoKHtcclxuICAgICAgICAgICAgICBzcmM6IGltZy5zcmMsXHJcbiAgICAgICAgICAgICAgYWx0OiBpbWcuYWx0LFxyXG4gICAgICAgICAgICAgIGxpbms6IGxpbmsgPyBsaW5rLmhyZWYgOiBudWxsLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSA/IHRpdGxlLmlubmVySFRNTCA6IG51bGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW1hZ2VzRGVza3RvcC5wdXNoKHtcclxuICAgICAgICAgICAgICBzcmM6IGltZy5zcmMsXHJcbiAgICAgICAgICAgICAgYWx0OiBpbWcuYWx0LFxyXG4gICAgICAgICAgICAgIGxpbms6IGxpbmsgPyBsaW5rLmhyZWYgOiBudWxsLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSA/IHRpdGxlLmlubmVySFRNTCA6IG51bGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpbWFnZXNNb2JpbGUucHVzaCh7XHJcbiAgICAgICAgICAgICAgc3JjOiBpbWcuc3JjLFxyXG4gICAgICAgICAgICAgIGFsdDogaW1nLmFsdCxcclxuICAgICAgICAgICAgICBsaW5rOiBsaW5rID8gbGluay5ocmVmIDogbnVsbCxcclxuICAgICAgICAgICAgICB0aXRsZTogdGl0bGUgPyB0aXRsZS5pbm5lckhUTUwgOiBudWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBmdWxsQmFubmVyRGVza3RvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZnVsbC1iYW5uZXJcIik7XHJcbiAgICAgICAgY29uc3QgZnVsbEJhbm5lck1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZnVsbC1iYW5uZXItbW9iaWxlXCIpO1xyXG4gICAgICAgIHNlY3Rpb25CYW5uZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBjcmVhdGVCYW5uZXIoZnVsbEJhbm5lckRlc2t0b3AsIGltYWdlc0Rlc2t0b3AsIHNlY3Rpb25CYW5uZXIpO1xyXG4gICAgICAgIGNyZWF0ZUJhbm5lcihmdWxsQmFubmVyTW9iaWxlLCBpbWFnZXNNb2JpbGUsIHNlY3Rpb25CYW5uZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgLy8gU0XDh8ODTyBCQU5ORVIgREVTVEFRVUVTIERFU0tUT1BcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICBjb25zdCBzZWNhb0xpc3RhZ2VtUHJvZHV0b3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiLnNlY2FvLXByaW5jaXBhbCAjbGlzdGFnZW1Qcm9kdXRvcyB1bFwiXHJcbiAgICAgICk7XHJcbiAgICAgIHNlY2FvTGlzdGFnZW1Qcm9kdXRvcy5hZnRlcihcclxuICAgICAgICBjcmlhckJhbm5lckRlc3RhcXVlc0Rlc2t0b3AoXHJcbiAgICAgICAgICBiYW5uZXJEZXN0YXF1ZVVtLFxyXG4gICAgICAgICAgYmFubmVyRGVzdGFxdWVEb2lzLFxyXG4gICAgICAgICAgYmFubmVyRGVzdGFxdWVUcmVzLFxyXG4gICAgICAgICAgYmFubmVyRGVzdGFxdWVRdWF0cm8sXHJcbiAgICAgICAgICB0aXRsZUVsZW1lbnRvVW0sXHJcbiAgICAgICAgICB0aXRsZUVsZW1lbnRvRG9pcyxcclxuICAgICAgICAgIHRpdGxlRWxlbWVudG9UcmVzLFxyXG4gICAgICAgICAgdGl0bGVFbGVtZW50b1F1YXRybyxcclxuICAgICAgICAgIHRleHRvQnRuRWxlbWVudG9VbSxcclxuICAgICAgICAgIHRleHRvQnRuRWxlbWVudG9Eb2lzLFxyXG4gICAgICAgICAgdGV4dG9CdG5FbGVtZW50b1RyZXMsXHJcbiAgICAgICAgICB0ZXh0b0J0bkVsZW1lbnRvUXVhdHJvLFxyXG4gICAgICAgICAgbGlua0J0bkVsZW1lbnRvVW0sXHJcbiAgICAgICAgICBsaW5rQnRuRWxlbWVudG9Eb2lzLFxyXG4gICAgICAgICAgbGlua0J0bkVsZW1lbnRvVHJlcyxcclxuICAgICAgICAgIGxpbmtCdG5FbGVtZW50b1F1YXRyb1xyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAvLyBTRcOHw4NPIFNBSUJBIE1BSVNcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICBjb25zdCBzZWNhb1NhaWJhTWFpcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgXCIuc2VjYW8tcHJpbmNpcGFsICNsaXN0YWdlbVByb2R1dG9zIHVsXCJcclxuICAgICAgKS5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgc2VjYW9TYWliYU1haXMuYWZ0ZXIoXHJcbiAgICAgICAgY3JpYXJTZWNhb1NhaWJhTWFpcyhcclxuICAgICAgICAgIGgyU2VjYW9TYWliYU1haXMsXHJcbiAgICAgICAgICBwYXJhZ3JhZm9TZWNhb1NhaWJhTWFpcyxcclxuICAgICAgICAgIHRleHRvQm90YW9TYWliYU1haXMsXHJcbiAgICAgICAgICBpbWFnZW1TZWNhb1NhaWJhTWFpc1xyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAvLyBTRUNBTyBTVFJJUEUgQkFOTkVSU1xyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgIGNvbnN0IHNlY3Rpb25TdHJpcGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlY2FvLWJhbm5lcnNcIik7XHJcbiAgICAgIGlmIChzZWN0aW9uU3RyaXBlKSB7XHJcbiAgICAgICAgc2VjdGlvblN0cmlwZS5hZnRlcihcclxuICAgICAgICAgIGNyaWFyU3RyaXBlQmFubmVyKFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgLy8gSU5TRVJJUiBVUkwgSUNPTkVcclxuICAgICAgICAgICAgICB1cmxJY29uZVVtU3RyaXBlLFxyXG4gICAgICAgICAgICAgIC8vIElOU0VSSVIgUEFSQUdSQUZPXHJcbiAgICAgICAgICAgICAgcGFyYWdyYWZvVW1TdHJpcGUsXHJcbiAgICAgICAgICAgICAgLy8gSU5TRVJJUiBTVFJPTkdcclxuICAgICAgICAgICAgICBzdHJvbmdVbVN0cmlwZSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgIC8vIElOU0VSSVIgVVJMIElDT05FXHJcbiAgICAgICAgICAgICAgdXJsSWNvbmVEb2lzU3RyaXBlLFxyXG4gICAgICAgICAgICAgIC8vIElOU0VSSVIgUEFSQUdSQUZPXHJcbiAgICAgICAgICAgICAgcGFyYWdyYWZvRG9pc1N0cmlwZSxcclxuICAgICAgICAgICAgICAvLyBJTlNFUklSIFNUUk9OR1xyXG4gICAgICAgICAgICAgIHN0cm9uZ0RvaXNTdHJpcGUsXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAvLyBJTlNFUklSIFVSTCBJQ09ORVxyXG4gICAgICAgICAgICAgIHVybEljb25lVHJlc1N0cmlwZSxcclxuICAgICAgICAgICAgICAvLyBJTlNFUklSIFBBUkFHUkFGT1xyXG4gICAgICAgICAgICAgIHBhcmFncmFmb1RyZXNTdHJpcGUsXHJcbiAgICAgICAgICAgICAgLy8gSU5TRVJJUiBTVFJPTkdcclxuICAgICAgICAgICAgICBzdHJvbmdUcmVzU3RyaXBlLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgLy8gSU5TRVJJUiBVUkwgSUNPTkVcclxuICAgICAgICAgICAgICB1cmxJY29uZVF1YXRyb1N0cmlwZSxcclxuICAgICAgICAgICAgICAvLyBJTlNFUklSIFBBUkFHUkFGT1xyXG4gICAgICAgICAgICAgIHBhcmFncmFmb1F1YXRyb1N0cmlwZSxcclxuICAgICAgICAgICAgICAvLyBJTlNFUklSIFNUUk9OR1xyXG4gICAgICAgICAgICAgIHN0cm9uZ1F1YXRyb1N0cmlwZSxcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAvLyBDQVJST1NTRUwgREUgUFJPRFVUT1MgTk9WSURBREVTXHJcbiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgY29uc3QgdGl0dWxvUHJpbWVpcm9DYXJyb3NzZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiLnZpdHJpbmUtbGFuY2FtZW50byA+IHN0cm9uZ1wiXHJcbiAgICAgICk7XHJcbiAgICAgIHRpdHVsb1ByaW1laXJvQ2Fycm9zc2VsLnRleHRDb250ZW50ID0gXCJOb3ZpZGFkZXNcIjsgLy8gQUxURVJBUiBUSVRVTE9cclxuICAgICAgY29uc3Qgc3VidGl0dWxvUHJpbWVpcm9DYXJyb3NzZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgc3VidGl0dWxvUHJpbWVpcm9DYXJyb3NzZWwuY2xhc3NMaXN0LmFkZChcInN1YnRpdHVsby1jYXJyb3NzZWxcIik7XHJcbiAgICAgIHN1YnRpdHVsb1ByaW1laXJvQ2Fycm9zc2VsLnRleHRDb250ZW50ID1cclxuICAgICAgICBcInRvZG9zIG9zIGRpYXMgY2hlZ2FtIG5vdm9zIHByb2R1dG9zXCI7IC8vIEFMVEVSQVIgU1VCVElUVUxPXHJcbiAgICAgIHRpdHVsb1ByaW1laXJvQ2Fycm9zc2VsLmFmdGVyKHN1YnRpdHVsb1ByaW1laXJvQ2Fycm9zc2VsKTtcclxuICAgICAgLy8gU1dJUEVSXHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKFxyXG4gICAgICAgIGNyaWFyQ2Fycm9zc2VsKFxyXG4gICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAgIC8vIEluc2VyaXIgZGFkb3MgYXF1aVxyXG4gICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAgIHVybFNldGFcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChcclxuICAgICAgICBjcmlhck1vZGVsUHJvZHVjdEJveChcclxuICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgICAvLyBJbnNlcmlyIGRhZG9zIGFxdWlcclxuICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgICBcIlwiLFxyXG4gICAgICAgICAgXCJcIlxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIFNFTEVDSU9OQSBUT0RPUyBPUyBVTFxyXG4gICAgICBsZXQgcHJvZHVjdENhcm91c2VsTEkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2R1dG9zLWNhcnJvc3NlbFwiKTtcclxuICAgICAgLy8gU0UgRVhJU1RJUiBQUk9EVVRPUyBOTyBDQVJST1NTRUxcclxuICAgICAgaWYgKHByb2R1Y3RDYXJvdXNlbExJLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2R1Y3QtY2Fyb3VzZWxcIik7IC8vIE1vZGVsIGNvbnRhaW5lciBvZiBjYXJvdXNlbCBmcm9tIEhUTUwgZmlsZVxyXG4gICAgICAgIGNvbnN0IHNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RlbC1wcm9kdWN0LWJveFwiKTsgLy8gQm94IGluIG1vZGVsIGNvbnRhaW5lciBpbnNpZGUgSFRNTCBmaWxlXHJcbiAgICAgICAgLy8gTElTVEEgREUgUFJPRFVUT1MgQ0FSUk9TU0VMXHJcbiAgICAgICAgcHJvZHVjdENhcm91c2VsTEkuZm9yRWFjaCgocHJvZHVjdENhcm91c2VsKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBwcm9kdWN0Q2Fyb3VzZWwucHJldmlvdXNFbGVtZW50U2libGluZztcclxuICAgICAgICAgIGNvbnN0IGNsYXNzTGlzdCA9IGNvbnRhaW5lciAmJiBjb250YWluZXIuY2xhc3NMaXN0O1xyXG4gICAgICAgICAgLy8gUHJvZHVjdHMgaW5zaWRlIGNhcm91c2VsIGxpc3RcclxuICAgICAgICAgIGNvbnN0IF9zZWN0aW9uID0gc2VjdGlvbi5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICBjb25zdCBfc2xpZGVyID0gX3NlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5zd2lwZXJcIik7XHJcbiAgICAgICAgICBjb25zdCBpdGVtcyA9IHByb2R1Y3RDYXJvdXNlbC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgICAgICBcIi5saXN0YWdlbS1saW5oYSAuZmxleC12aWV3cG9ydCBsaVwiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaXRlbXMuZm9yRWFjaCgocHJvZHVjdCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgLyoqIENhdGNoIGFsbCBpbmZvcyAqKi9cclxuICAgICAgICAgICAgY29uc3QgYmFuZGVpcmFzQ2FyZHMgPSBwcm9kdWN0LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgICAgXCIuYmFuZGVpcmFzLXByb2R1dG8gc3BhblwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gcHJvZHVjdC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlbS1wcm9kdXRvIGltZ1wiKTtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHByb2R1Y3QucXVlcnlTZWxlY3RvcihcIi5ub21lLXByb2R1dG9cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dG9uID0gcHJvZHVjdC5xdWVyeVNlbGVjdG9yKFwiLmFjb2VzLXByb2R1dG9cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IHByaWNlRnJvbSA9IHByb2R1Y3QucXVlcnlTZWxlY3RvcihcIi5wcmVjby12ZW5kYVwiKTtcclxuICAgICAgICAgICAgY29uc3QgcHJpY2UgPSBwcm9kdWN0LnF1ZXJ5U2VsZWN0b3IoXCIucHJlY28tcHJvbW9jaW9uYWxcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZWNvQVZpc3RhID0gcHJvZHVjdC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgICAgIFwiLmRlc2NvbnRvLWEtdmlzdGEgc3Ryb25nXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3Qgc3RhbGxtZW50cyA9IHByb2R1Y3QucXVlcnlTZWxlY3RvcihcIi5wcmVjby1wYXJjZWxhXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFycyA9IHByb2R1Y3QucXVlcnlTZWxlY3RvcihcIi50cnVzdHZveC1zdGFyc1wiKTtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IHByb2R1Y3QucXVlcnlTZWxlY3RvcihcIi5wcm9kdXRvLXNvYnJlcG9yXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBib3ggPSBzbGlkZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmIChpbWFnZSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHVybEhvdmVyID0gaW1hZ2UuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbWFnZW0tY2FtaW5ob1wiKTtcclxuICAgICAgICAgICAgICBib3guaWQgPSBgcHJvZHVjdF9ib3hfJHtpbmRleH1gO1xyXG4gICAgICAgICAgICAgIGJveC5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXNsaWRlXCIpO1xyXG4gICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKFwiZmlndXJlIC5jb3ZlclwiKS5zcmMgPSBpbWFnZS5zcmM7XHJcbiAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoXCJmaWd1cmUgaW1nXCIpLmFsdCA9IGltYWdlLmFsdDtcclxuICAgICAgICAgICAgICBpZiAodXJsSG92ZXIpIHtcclxuICAgICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKFwiZmlndXJlIC5ob3ZlclwiKS5zcmMgPSB1cmxIb3ZlcjtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX2NvdmVyID0gYm94LnF1ZXJ5U2VsZWN0b3IoXCJmaWd1cmUgLmNvdmVyXCIpO1xyXG4gICAgICAgICAgICAgICAgX2NvdmVyICYmIF9jb3Zlci5jbGFzc0xpc3QucmVtb3ZlKFwiY292ZXJcIik7XHJcbiAgICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcihcImZpZ3VyZSAuaG92ZXJcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChiYW5kZWlyYXNDYXJkcykge1xyXG4gICAgICAgICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKFwiLmJhbmRlaXJhcy1wcm9kdXRvXCIpLmlubmVySFRNTCA9XHJcbiAgICAgICAgICAgICAgICBiYW5kZWlyYXNDYXJkcy5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5hbWUpIHtcclxuICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0LXRpdGxlIGgyXCIpLmlubmVySFRNTCA9IG5hbWUuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwcmljZUZyb20pIHtcclxuICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgICAgIFwiLnByb2R1Y3Qtb3JpZ2luYWxcIlxyXG4gICAgICAgICAgICAgICkuaW5uZXJIVE1MID0gYGRlICR7cHJpY2VGcm9tLmlubmVySFRNTH0gcG9yYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocHJpY2UpIHtcclxuICAgICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0LXByaWNlIGgyXCIpLmlubmVySFRNTCA9XHJcbiAgICAgICAgICAgICAgICBwcmljZS5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByZWNvQVZpc3RhKSB7XHJcbiAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgICAgICBcIi5wcmVjby1hLXZpc3RhXCJcclxuICAgICAgICAgICAgICApLmlubmVySFRNTCA9IGAke3ByZWNvQVZpc3RhLmlubmVySFRNTH0gdmlhIFBpeGA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YXJzKSB7XHJcbiAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoXCIuc3RhcnNcIikuYXBwZW5kKHN0YXJzLmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJ1dG9uKSB7XHJcbiAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoXCJhXCIpLmFwcGVuZChidXRvbi5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdGFsbG1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdC1wcmljZSBzbWFsbFwiKS5pbm5lckhUTUwgPVxyXG4gICAgICAgICAgICAgICAgc3RhbGxtZW50cy5pbm5lckhUTUxcclxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2VBbGwoJzxzdHJvbmcgY2xhc3M9XCJjb3Itc2VjdW5kYXJpYVwiPicsIFwiXCIpXHJcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlQWxsKCc8c3Ryb25nIGNsYXNzPVwiY29yLXNlY3VuZGFyaWEgXCI+JywgXCJcIilcclxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2VBbGwoXCI8L3N0cm9uZz5cIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgLy8gLnJlcGxhY2UoJ2RlJywgJ2RlPGJyLz4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsaW5rICYmXHJcbiAgICAgICAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3JBbGwoXCJhXCIpLmZvckVhY2goKGl0ZW0pID0+IChpdGVtLmhyZWYgPSBsaW5rKSk7XHJcbiAgICAgICAgICAgIGJveCAmJiBfc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLXdyYXBwZXJcIikuYXBwZW5kKGJveCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIC8vIE1vbnRhciBTbGlkZXJcclxuICAgICAgICAgIG5ldyBTd2lwZXIoX3NsaWRlciwge1xyXG4gICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgICAgICAgbmV4dEVsOiBfc2VjdGlvbi5xdWVyeVNlbGVjdG9yKFwiLnN3aXBlci1idXR0b24tbmV4dFwiKSxcclxuICAgICAgICAgICAgICBwcmV2RWw6IF9zZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAgIDc2ODoge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNCxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxyXG4gICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgLy8gQWRpY2lvbmFyIGF0cmlidXRvcyBlIGNvbG9jYXIgaXRlbnNcclxuICAgICAgICAgIF9zZWN0aW9uLmlkID0gY2xhc3NMaXN0Lmxlbmd0aFxyXG4gICAgICAgICAgICA/IGAke2NsYXNzTGlzdFtjbGFzc0xpc3QubGVuZ3RoIC0gMV19YFxyXG4gICAgICAgICAgICA6IFwibGlzdGFnZW0tY2Fycm9zc2VsXCI7XHJcbiAgICAgICAgICBwcm9kdWN0Q2Fyb3VzZWwucmVtb3ZlKCk7XHJcbiAgICAgICAgICBjb250YWluZXIuYXBwZW5kKF9zZWN0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzbGlkZS5yZW1vdmUoKTtcclxuICAgICAgICBzZWN0aW9uLnJlbW92ZSgpO1xyXG4gICAgICAgIHByb2R1Y3RDYXJvdXNlbExJID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgIC8vIENBUlJPU1NFTCBERSBQUk9EVVRPUyBNQUlTIFZFTkRJRE9TXHJcbiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgY29uc3QgdGl0dWxvU2VndW5kb0NhcnJvc3NlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgXCIudml0cmluZS1tYXMtdmVuZGlkbyA+IHN0cm9uZ1wiXHJcbiAgICAgICk7XHJcbiAgICAgIHRpdHVsb1NlZ3VuZG9DYXJyb3NzZWwudGV4dENvbnRlbnQgPSBcIk9mZXJ0YXMgUmVsw6JtcGFnb1wiOyAvLyBBTFRFUkFSIFRJVFVMT1xyXG4gICAgICBjb25zdCBzdWJ0aXR1bG9TZWd1bmRvQ2Fycm9zc2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgIHN1YnRpdHVsb1NlZ3VuZG9DYXJyb3NzZWwuY2xhc3NMaXN0LmFkZChcInN1YnRpdHVsby1jYXJyb3NzZWxcIik7XHJcbiAgICAgIHN1YnRpdHVsb1NlZ3VuZG9DYXJyb3NzZWwudGV4dENvbnRlbnQgPVxyXG4gICAgICAgIFwidG9kb3Mgb3MgZGlhcyBjaGVnYW0gbm92b3MgcHJvZHV0b3NcIjsgLy8gQUxURVJBUiBTVUJUSVRVTE9cclxuICAgICAgdGl0dWxvU2VndW5kb0NhcnJvc3NlbC5hZnRlcihzdWJ0aXR1bG9TZWd1bmRvQ2Fycm9zc2VsKTtcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAvLyBCYW5uZXIgZGVzdGFxdWUgaW5mZXJpb3JcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICBjb25zdCBjb250ZWluZXJTZWNhb1NhaWJhTWFpcyA9XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzZWNhby1zYWliYS1tYWlzXCIpO1xyXG4gICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA2NDBweClcIikubWF0Y2hlcykge1xyXG4gICAgICAgIGNvbnRlaW5lclNlY2FvU2FpYmFNYWlzLmFmdGVyKFxyXG4gICAgICAgICAgY3JpYXJCYW5uZXJEZXN0YXF1ZUluZmVyaW9yKFxyXG4gICAgICAgICAgICBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yLFxyXG4gICAgICAgICAgICB0ZXh0b0Jhbm5lckRlc3RhcXVlSW5mZXJpb3IsXHJcbiAgICAgICAgICAgIHBvcmNlbnRCYW5uZXJEZXN0YXF1ZUluZmVyaW9yLFxyXG4gICAgICAgICAgICBjdGFCYW5uZXJEZXN0YXF1ZUluZmVyaW9yLFxyXG4gICAgICAgICAgICBsaW5rQmFubmVyRGVzdGFxdWVJbmZlcmlvclxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29udGVpbmVyU2VjYW9TYWliYU1haXMuYWZ0ZXIoXHJcbiAgICAgICAgICBjcmlhckJhbm5lckRlc3RhcXVlSW5mZXJpb3IoXHJcbiAgICAgICAgICAgIGJhbm5lckRlc3RhcXVlSW5mZXJpb3JNb2JpbGUsXHJcbiAgICAgICAgICAgIHRleHRvQmFubmVyRGVzdGFxdWVJbmZlcmlvcixcclxuICAgICAgICAgICAgcG9yY2VudEJhbm5lckRlc3RhcXVlSW5mZXJpb3IsXHJcbiAgICAgICAgICAgIGN0YUJhbm5lckRlc3RhcXVlSW5mZXJpb3IsXHJcbiAgICAgICAgICAgIGxpbmtCYW5uZXJEZXN0YXF1ZUluZmVyaW9yXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBtaW5pQmFubmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmFubmVyXCIpO1xyXG4gICAgICBtaW5pQmFubmVycy5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuLXBob25lXCIpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIC0+ICR7ZXJyb3J9YCk7XHJcbiAgfVxyXG5cclxuICAvLyBwZWdhbmRvIG8gYmFubmVyIHByaW5jaXBhbCBkYSBob21lIGUgYWRkIG8gbmV3c2xldHRlciBhYmFpeG9cclxuICAvLyBjb25zdCBiYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Jhbm5lci1kZXN0YXF1ZXNcIik7XHJcbiAgLy8gY29uc3QgbmV3c0xldHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9vdGVyLW5ld3NsZXR0ZXJcIik7XHJcbiAgLy8gYmFubmVyLmFmdGVyKG5ld3NMZXR0ZXIpXHJcbn0pO1xyXG5cblxuY29uc3QgY3JpYXJCb3hJbWFnZW1Mb2dpbiA9ICh1cmxJbWFnZW0pID0+IHtcclxuICAvLyBJbnNlcmUgaW1hZ2VtIG5vIGNvcnBvIGRhIHDDoWdpbmFcclxuICBsZXQgaW1hZ2VtTG9naW5Cb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGxldCBpbWFnZW1Mb2dpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1hZ2VtTG9naW4uc3JjID0gdXJsSW1hZ2VtO1xyXG4gIGltYWdlbUxvZ2luLmNsYXNzTGlzdC5hZGQoXCJpbWFnZW0tbG9naW5cIik7XHJcbiAgaW1hZ2VtTG9naW5Cb3guY2xhc3NMaXN0LmFkZChcImJveC1pbWFnZW0tbG9naW5cIik7XHJcbiAgaW1hZ2VtTG9naW5Cb3guYXBwZW5kKGltYWdlbUxvZ2luKTtcclxuXHJcbiAgcmV0dXJuIGltYWdlbUxvZ2luQm94O1xyXG59O1xyXG5cclxuY29uc3QgY3JpYXJCb3hQcmltZWlyb0FjZXNzbyA9ICgpID0+IHtcclxuICAvLyAxIENSSUFSIENPTlRFSU5FUlxyXG4gIGNvbnN0IHByaW1laXJvQWNlc3NvQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBwcmltZWlyb0FjZXNzb0NvbnRlaW5lci5jbGFzc0xpc3QuYWRkKFwiYm94LXByaW1laXJvLWFjZXNzb1wiKTtcclxuICAvLyAyIENSSUFSIFBBUkFHUkFGT1xyXG4gIGNvbnN0IHBQcmltZWlyb0FjZXNzbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIHBQcmltZWlyb0FjZXNzby5jbGFzc0xpc3QuYWRkKFwicHJpbWVpcm8tYWNlc3NvXCIpO1xyXG4gIC8vIDMgQ1JJQVIgU1RST05HXHJcbiAgY29uc3Qgc3Ryb25nUHJpbWVpcm9BY2Vzc28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIpO1xyXG4gIHN0cm9uZ1ByaW1laXJvQWNlc3NvLnRleHRDb250ZW50ID0gXCJQcmltZWlybyBhY2Vzc28/XCI7XHJcbiAgLy8gQVBQRU5EIDMtPjJcclxuICBwUHJpbWVpcm9BY2Vzc28uYXBwZW5kKHN0cm9uZ1ByaW1laXJvQWNlc3NvKTtcclxuXHJcbiAgLy8gMiBDUklBUiBQQVJBR1JBRk9cclxuICBjb25zdCBwRmFjYVNldUNhZGFzdHJvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgcEZhY2FTZXVDYWRhc3Ryby5jbGFzc0xpc3QuYWRkKFwiZmFjYS1zZXUtY2FkYXN0cm9cIik7XHJcbiAgcEZhY2FTZXVDYWRhc3Ryby50ZXh0Q29udGVudCA9IFwiRmHDp2EgYXF1aSBvIHNldSBjYWRhc3Ryb1wiO1xyXG5cclxuICAvLyBBUFBFTkQgMi0+MVxyXG4gIHByaW1laXJvQWNlc3NvQ29udGVpbmVyLmFwcGVuZChwUHJpbWVpcm9BY2Vzc28pO1xyXG4gIHByaW1laXJvQWNlc3NvQ29udGVpbmVyLmFwcGVuZChwRmFjYVNldUNhZGFzdHJvKTtcclxuXHJcbiAgcmV0dXJuIHByaW1laXJvQWNlc3NvQ29udGVpbmVyO1xyXG59O1xyXG5cclxudHJ5IHtcclxuICBpZiAocGFnaW5hTG9naW4oKSkge1xyXG4gICAgLy8gQVBQRU5EIEJPWCBQUklNRUlSTyBBQ0VTU09cclxuICAgIGxldCBkZXN0aW5vQm94UHJpbWVpcm9BY2Vzc28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYWRhc3Ryby1sb2dhciA+IC5zcGFuNjpsYXN0LWNoaWxkIGZpZWxkc2V0IGxlZ2VuZFwiXHJcbiAgICApO1xyXG4gICAgZGVzdGlub0JveFByaW1laXJvQWNlc3NvLmFmdGVyKGNyaWFyQm94UHJpbWVpcm9BY2Vzc28oKSk7XHJcbiAgICAvLyBDUklBUiBCb3hJbWFnZW1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29ycG8gLmNhZGFzdHJvLWxvZ2FyXCIpLmFwcGVuZChcclxuICAgICAgY3JpYXJCb3hJbWFnZW1Mb2dpbihcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSU5TRVJJUiBEQURPUyBBUVVJXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIGltYWdlbURpcmVpdGFcclxuICAgICAgKVxyXG4gICAgKTtcclxuICAgIC8vIFJlcG9zaWNpb25hIEVzcXVlY2V1IHN1YSBzZW5oYVxyXG4gICAgbGV0IHJlY3VwZXJhclNlbmhhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZWN1cGVyYXItc2VuaGFcIik7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lkX3NlbmhhXCIpLmFmdGVyKHJlY3VwZXJhclNlbmhhKTtcclxuICB9XHJcbn0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgY29uc29sZS5sb2coYEVycm8gZW5jb250cmFkbyAtPiAke2Vycm9yfWApO1xyXG59XHJcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgXCJzdHJpY3RcIjtcbiAgdHJ5IHtcbiAgICBpZiAocGFnaW5hRWRpdGFyTWluaGFDb250YSgpIHx8IHBhZ2luYUVkaXRhckVuZGVyZWNvKCkpIHtcbiAgICAgIGFkZExpbmtMb2dvdXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZhU2VFeGlzdGlyKG51bGwpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJybykge1xuICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gLT4gJHtlcnJvfWApO1xuICB9XG59KTtcblxuY29uc3QgY3JpYXJCb3hDYWRhc3RyYXJFbmRlcmVjbyA9ICgpID0+IHtcclxuICBsZXQgYm94Q2FkYXN0cmFyTm92b0VuZGVyZWNvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBib3hDYWRhc3RyYXJOb3ZvRW5kZXJlY28uY2xhc3NMaXN0LmFkZChcImFjYW8tZWRpdGFyXCIpO1xyXG4gIHJldHVybiBib3hDYWRhc3RyYXJOb3ZvRW5kZXJlY287XHJcbn07XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gIFwic3RyaWN0XCI7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBpZiAocGFnaW5hQ29udGEoKSkge1xyXG4gICAgICAvLyBBZGljaW9uYXIgY2xhc3NlIGFvIGJvZHkgZGEgcMOhZ2luYSBwYXJhIG7Do28gZGFyIGNvbmZsaXRvIGNvbSBvdXRyYXMgcMOhZ2luYXNcclxuICAgICAgYWRpY2lvbmFyQ2xhc3NlQW9Cb2R5KFwicGFnaW5hLW1pbmhhLWNvbnRhXCIpO1xyXG5cclxuICAgICAgLy8gTXVkYSBwb3Npw6fDo28gZG8gYm90w6NvIFwiQ2FkYXN0cmFyIG5vdm8gZW5kZXJlw6dvXCJcclxuICAgICAgbGV0IGRlc3Rpbm9DYWRhc3RyYXJOb3ZvRW5kZXJlY28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiLmNhaXhhLWRhZG9zLm91dHJvcy1lbmRlcmVjb3MgZmllbGRzZXRcIlxyXG4gICAgICApO1xyXG4gICAgICBkZXN0aW5vQ2FkYXN0cmFyTm92b0VuZGVyZWNvLmFwcGVuZChjcmlhckJveENhZGFzdHJhckVuZGVyZWNvKCkpO1xyXG5cclxuICAgICAgLy8gTXVkYSBib3Rhb0NhZGFzdHJhck5vdm9FbmRlcmVjb1xyXG4gICAgICBjb25zdCBib3Rhb0VuZGVyZWNvID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihib3Rhb0NhZGFzdHJhckVuZGVyZWNvKTtcclxuICAgICAgY29uc3QgZGVzdGlub0JvdGFvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zcGFuMTIgLmFjYW8tZWRpdGFyXCIpO1xyXG4gICAgICBkZXN0aW5vQm90YW8uYXBwZW5kKGJvdGFvRW5kZXJlY28pO1xyXG5cclxuICAgICAgYWRkTGlua0xvZ291dCgpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIC0+ICR7ZXJyb3J9YCk7XHJcbiAgfVxyXG59KTtcclxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gIFwic3RyaWN0XCI7XHJcbiAgdHJ5IHtcclxuICAgIGlmIChwYWdpbmFBbHRlcmFyU2VuaGEoKSkge1xyXG4gICAgICAvLyBBZGljaW9uYSBjbGFzc2Ugbm8gYm9keSBwYXJhIGlkZW50aWZpY2FyIGEgcMOhZ2luYSBtaW5oYSBjb250YVxyXG4gICAgICBhZGljaW9uYXJDbGFzc2VBb0JvZHkoXCJwYWdpbmEtYWx0ZXJhci1zZW5oYVwiKTtcclxuICAgICAgcmVtb3ZlVG9kYXNBc0NsYXNzZXMoXCIuYWNhby1lZGl0YXIgPiBkaXZcIik7XHJcblxyXG4gICAgICAvL0FkaWNpb25hIEZhemVyIExvZ291dCBhbyBtZW51IGxhdGVyYWwgZG8gdXN1w6FyaW9cclxuICAgICAgYWRkTGlua0xvZ291dCgpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm8pIHtcclxuICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gLT4gJHtlcnJvfWApO1xyXG4gIH1cclxufSk7XHJcblxuY29uc3QgY3JpYXJUaXR1bG9NZXVzUGVkaWRvcyA9ICgpID0+IHtcclxuICAvLyBJbnNlcmUgbyB0w610dWxvIGRhIFDDoWdpbmFcclxuICBsZXQgdGl0dWxvUGFnaW5hID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xyXG4gIHRpdHVsb1BhZ2luYS5jbGFzc0xpc3QuYWRkKFwidGl0dWxvXCIpO1xyXG4gIHRpdHVsb1BhZ2luYS50ZXh0Q29udGVudCA9IFwiTWV1cyBQZWRpZG9zXCI7XHJcbiAgcmV0dXJuIHRpdHVsb1BhZ2luYTtcclxufTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcbiAgXCJzdHJpY3RcIjtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGlmIChwYWdpbmFQZWRpZG9MaXN0YXIoKSkge1xyXG4gICAgICBkb2N1bWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBhZ2luYS1wZWRpZG8tbGlzdGFyIC5hYmFzLWNvbnRldWRvXCIpXHJcbiAgICAgICAgLnByZXBlbmQoY3JpYXJUaXR1bG9NZXVzUGVkaWRvcygpKTtcclxuXHJcbiAgICAgIGFkZExpbmtMb2dvdXQoKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIC0+ICR7ZXJyb31gKTtcclxuICB9XHJcbn0pO1xyXG5cbmNvbnN0IGNyaWFyRmlsdHJvcyA9ICgpID0+IHtcclxuICAvLyAxIENSSUFSIEZJTFRST1MgRElWXHJcbiAgY29uc3QgZGl2RmlsdHJvcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2RmlsdHJvcy5jbGFzc0xpc3QuYWRkKFwibS1maWx0cm9zLWFwbGljYWRvc1wiKTtcclxuICAvLyAyIENSSUFSIFNQQU4gRklMVE9SU1xyXG4gIGNvbnN0IHNwYW5GaWx0cm9zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgLy8gMiBjcmlhciBmaWx0cm9zIEJPWFxyXG4gIGNvbnN0IGJveEZpbHRyb3NBcGxpY2Fkb3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGJveEZpbHRyb3NBcGxpY2Fkb3MuY2xhc3NMaXN0LmFkZChcIm0tZmlsdHJvcy1hcGxpY2Fkb3MtYm94XCIpO1xyXG4gIC8vIDMgQ1JJQVIgYk9YIGl0ZW1TXHJcbiAgY29uc3QgYm94SXRlbnNGaWx0cm9zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBib3hJdGVuc0ZpbHRyb3MuY2xhc3NMaXN0LmFkZChcIm0tZmlsdHJvcy1hcGxpY2Fkb3MtYm94LWl0ZW5zXCIpO1xyXG4gIC8vIEFQUEVORCAzLT4yXHJcbiAgYm94RmlsdHJvc0FwbGljYWRvcy5hcHBlbmQoYm94SXRlbnNGaWx0cm9zKTtcclxuICAvLyAyIENSSUFSIExJTksgRVhDTFVJUiBUT0RPU1xyXG4gIGNvbnN0IGxpbmtGaWx0cm9zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgbGlua0ZpbHRyb3MuY2xhc3NMaXN0LmFkZChcIm0tZmlsdHJvcy1hcGxpY2Fkb3MtZXhjbHVpci10b2Rvc1wiKTtcclxuICBsaW5rRmlsdHJvcy5ocmVmID0gXCI/XCI7XHJcbiAgbGlua0ZpbHRyb3MudGV4dENvbnRlbnQgPSBcIkV4Y2x1aXIgdG9kb3NcIjtcclxuICAvLyBBUFBFTkRTIDItPjFcclxuICBkaXZGaWx0cm9zLmFwcGVuZChzcGFuRmlsdHJvcyk7XHJcbiAgZGl2RmlsdHJvcy5hcHBlbmQoYm94RmlsdHJvc0FwbGljYWRvcyk7XHJcbiAgZGl2RmlsdHJvcy5hcHBlbmQobGlua0ZpbHRyb3MpO1xyXG5cclxuICByZXR1cm4gZGl2RmlsdHJvcztcclxufTtcclxuXHJcbi8vIGJhbm5lciBpbmZlcmlvclxyXG5cclxuLy8gaWYgKHBhZ2luYUNhdGVnb3JpYSgpKSB7XHJcbi8vICAgLy8gMSBDUklBUiBDT05URUlORVJcclxuLy8gICBjb25zdCBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuLy8gICBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJiYW5uZXItZGVzdGFxdWUtaW5mZXJpb3JcIik7XHJcbi8vICAgLy8gMiBDUklBUiBJTUFHRU1cclxuLy8gICBjb25zdCBpbWFnZW1CYW5uZXJEZXN0YXF1ZUluZmVyaW9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuLy8gICBpbWFnZW1CYW5uZXJEZXN0YXF1ZUluZmVyaW9yLmNsYXNzTGlzdC5hZGQoXCJiYW5uZXItZGVzdGFxdWUtY2F0ZWdvcmlhc1wiKTtcclxuLy8gICBpbWFnZW1CYW5uZXJEZXN0YXF1ZUluZmVyaW9yLnNyYyA9IHVybChcclxuLy8gICAgIFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzE1OTUvMTU5NTAwMi9hcnF1aXZvcy9iYW5uZXItYm90dG9tLWRlc2t0b3AucG5nXCJcclxuLy8gICApO1xyXG4vLyAgIGltYWdlbUJhbm5lckRlc3RhcXVlSW5mZXJpb3IuYWx0ID0gXCJiYW5uZXIgZGVzdGFxdWUgaW5mZXJpb3IgY2F0ZWdvcmlhc1wiO1xyXG5cclxuLy8gICAvLyBjb25zdCBwYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhZ2luYXRpb25cIik7XHJcblxyXG4vLyAgIGJhbm5lckRlc3RhcXVlSW5mZXJpb3JDb250YWluZXIuYXBwZW5kKGltYWdlbUJhbm5lckRlc3RhcXVlSW5mZXJpb3IpO1xyXG5cclxuLy8gICBwYWdpbmF0aW9uLmFmdGVyKGJhbm5lckRlc3RhcXVlSW5mZXJpb3JDb250YWluZXIpO1xyXG4vLyB9XHJcblxyXG4vLyAvLy8vLy8vLy8vLy8vL1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICBcInN0cmljdFwiO1xyXG5cclxuICBpZiAocGFnaW5hQ2F0ZWdvcmlhKCkgfCBwYWdpbmFCdXNjYSgpKSB7XHJcbiAgICB2YXIgcGFnaW5hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFnaW5hdGlvblwiKTtcclxuICAgIHZhciBsaXN0YWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0YWdlbVByb2R1dG9zXCIpO1xyXG5cclxuICAgIHBhZ2luYXRpb24gPyBsaXN0YWdlLmFmdGVyKHBhZ2luYXRpb24pIDogbnVsbDtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBpZiAocGFnaW5hQ2F0ZWdvcmlhKCkgfHwgcGFnaW5hQnVzY2EoKSkge1xyXG4gICAgICByZW1vdmVyVHVkbyhcIi5jb21wb25lbnRlIC5pbnRlcm5vXCIpO1xyXG4gICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYWdpbmEtY2F0ZWdvcmlhXCIpO1xyXG4gICAgICBib2R5LmFwcGVuZChjcmlhckZpbHRyb3MoKSk7XHJcbiAgICAgIHBvc2ljaW9uYUZpbHRybygpO1xyXG4gICAgICB2YXIgZmlsdHJvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmlsdHJvIHVsIGxpLmFjdGl2ZSBsYWJlbFwiKTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWx0cm9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY3JlYXRlRmlsdGVySXRlbShmaWx0cm9zW2ldKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTW9iaWxlXHJcbiAgICAgIGlmIChzY3JlZW4ud2lkdGggPCA5OTIpIHtcclxuICAgICAgICBjb25zdCBsaXN0YWdlbVByb2R1dG9zQ2F0ZWdvcmlhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdGFnZW1Qcm9kdXRvc1wiKTtcclxuICAgICAgICBsaXN0YWdlbVByb2R1dG9zQ2F0ZWdvcmlhcy5hZnRlcihjcmlhckJhbm5lckRlc3RhcXVlSW5mZXJpb3IoXHJcbiAgICAgICAgICBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yTW9iaWxlLFxyXG4gICAgICAgICAgdGV4dG9CYW5uZXJEZXN0YXF1ZUluZmVyaW9yLFxyXG4gICAgICAgICAgcG9yY2VudEJhbm5lckRlc3RhcXVlSW5mZXJpb3IsXHJcbiAgICAgICAgICBjdGFCYW5uZXJEZXN0YXF1ZUluZmVyaW9yXHJcbiAgICAgICAgKSlcclxuICAgICAgICAvLyBEZXNrdG9wXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbGlzdGFnZW1Qcm9kdXRvc0NhdGVnb3JpYXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpc3RhZ2VtUHJvZHV0b3NcIik7XHJcbiAgICAgICAgbGlzdGFnZW1Qcm9kdXRvc0NhdGVnb3JpYXMuYWZ0ZXIoY3JpYXJCYW5uZXJEZXN0YXF1ZUluZmVyaW9yKFxyXG4gICAgICAgICAgYmFubmVyRGVzdGFxdWVJbmZlcmlvcixcclxuICAgICAgICAgIHRleHRvQmFubmVyRGVzdGFxdWVJbmZlcmlvcixcclxuICAgICAgICAgIHBvcmNlbnRCYW5uZXJEZXN0YXF1ZUluZmVyaW9yLFxyXG4gICAgICAgICAgY3RhQmFubmVyRGVzdGFxdWVJbmZlcmlvclxyXG4gICAgICAgICkpXHJcbiAgICAgIH1cclxuXHJcblxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlbW92YVNlRXhpc3RpcihcIi5tLWZpbHRyb3MtYXBsaWNhZG9zXCIpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm8pIHtcclxuICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gLT4gJHtlcnJvfWApO1xyXG4gIH1cclxufSk7XHJcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgXCJzdHJpY3RcIjtcbiAgdHJ5IHtcbiAgICBpZiAocGFnaW5hTGlzdGFEZXNlam9zKCkpIHtcbiAgICAgIGFkZExpbmtMb2dvdXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZhU2VFeGlzdGlyKG51bGwpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJybykge1xuICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gLT4gJHtlcnJvfWApO1xuICB9XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICBcInN0cmljdFwiO1xyXG5cclxuICB0cnkge1xyXG4gICAgaWYgKHBhZ2luYVByb2R1dG8oKSkge1xyXG4gICAgICBjb25zdCBwYWluZWxQcm9kdXRvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIi5wcm9kdXRvPi5yb3ctZmx1aWQ6Zmlyc3QtY2hpbGRcIlxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gY29uc3QgdGV4dG9BbHRlcmFyTWVyY2Fkb1BhZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbXByYXIgc3BhblwiKTtcclxuXHJcbiAgICAgIC8vIHRleHRvQWx0ZXJhck1lcmNhZG9QYWdvLmlubmVySFRNTCA9XHJcbiAgICAgIC8vICAgXCJDb21wcmEgMTAwJSBzZWd1cmEuIFBhZ2FtZW50b3MgYXVkaXRhZG9zIHBlbG8gPHN0cm9uZz5NZXJjYWRvIFBhZ288L3N0cm9uZz5cIjtcclxuXHJcbiAgICAgIC8vIHRleHRvQWx0ZXJhck1lcmNhZG9QYWdvLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwb25pYmlsaWRhZGUtcHJvZHV0b1wiKTtcclxuICAgICAgLy8gdGV4dG9BbHRlcmFyTWVyY2Fkb1BhZ28uY2xhc3NMaXN0LmFkZChcImRlc2NyaWNhby1tcFwiKTtcclxuXHJcbiAgICAgIGNvbnN0IGRvaXNTcGFuczYgPSBwYWluZWxQcm9kdXRvLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3BhbjZcIik7XHJcbiAgICAgIGRvaXNTcGFuczYuZm9yRWFjaCgoc3BhbiwgaSkgPT4ge1xyXG4gICAgICAgIHNwYW4uY2xhc3NMaXN0LnJlbW92ZShcInNwYW42XCIpO1xyXG4gICAgICAgIHNwYW4uY2xhc3NMaXN0LmFkZChgaXRlbS1wYWluZWwtJHtpfWApO1xyXG4gICAgICB9KTtcclxuICAgICAgY29uc3QgaW5mb1Byb2R1dG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgIFwiLmluZm8tcHJpbmNpcGFsLXByb2R1dG8gPiAqXCJcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IGJvdGFvQ29tcHJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpbmNpcGFsIC5jb21wcmFyXCIpO1xyXG4gICAgICAvLyBjb25zdCBwYXJjZWxhc1Byb2R1dG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhcmNlbGFzLXByb2R1dG8uYm9yZGEtYWxwaGEucGFkcmFvXCIpO1xyXG4gICAgICBjb25zdCBwcmVjb1Byb2R1dG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiLmFjb2VzLXByb2R1dG8gLnByZWNvLXByb2R1dG9cIlxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBhdHJpYnV0b3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmF0cmlidXRvc1wiKTtcclxuICAgICAgY29uc3QgaXRlbVBhaW5lbFVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pdGVtLXBhaW5lbC0wXCIpO1xyXG4gICAgICBjb25zdCBkZXRhbGhlc1Byb2R1dG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBkZXRhbGhlc1Byb2R1dG8uaWQgPSBcIml0ZW0tcGFpbmVsLTAwXCI7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGluZm9Qcm9kdXRvLmZvckVhY2goKGluZm8pID0+IHtcclxuICAgICAgICAgIGRldGFsaGVzUHJvZHV0by5hcHBlbmQoaW5mbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgZXJybyBhcXVpIGluZm9Qcm9kdXRvLT4gJHtlLm1lc3NhZ2V9YClcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIGl0ZW1QYWluZWxVbS5hZnRlcihkZXRhbGhlc1Byb2R1dG8pO1xyXG5cclxuICAgICAgY29uc3QgcGFpbmVsMCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbS1wYWluZWwtMFwiKTtcclxuICAgICAgY29uc3QgcGFpbmVsMDAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2l0ZW0tcGFpbmVsLTAwXCIpO1xyXG4gICAgICBjb25zdCBwYWluZWxQcm9kdXRvQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgcGFpbmVsUHJvZHV0b0NvbnRlaW5lci5pZCA9IFwicGFpbmVsLXByb2R1dG8tY29udGVpbmVyXCI7XHJcbiAgICAgIHBhaW5lbFByb2R1dG9Db250ZWluZXIuYXBwZW5kKHBhaW5lbDApO1xyXG4gICAgICBwYWluZWxQcm9kdXRvQ29udGVpbmVyLmFwcGVuZChwYWluZWwwMCk7XHJcbiAgICAgIHBhaW5lbFByb2R1dG8ucHJlcGVuZChwYWluZWxQcm9kdXRvQ29udGVpbmVyKTtcclxuICAgICAgY29uc3QgcHJlY29zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hY29lcy1wcm9kdXRvXCIpO1xyXG5cclxuICAgICAgLy8gdHJ5IHtcclxuICAgICAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHByZWNvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAvLyAgICAgcHJlY29zW2ldLmFmdGVyKGF0cmlidXRvcy5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gICAvLyBwcmVjb3NbMl0uYWZ0ZXIoYXRyaWJ1dG9zKTtcclxuICAgICAgLy8gfSBjYXRjaCAoZSkge1xyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKGBlcnJvIG5vIHBhaW5lbCAwMCwgbsOjbyBleGlzdGUgYXRyaWJ1dG9zIC0+ICR7ZS5tZXNzYWdlfWApXHJcbiAgICAgIC8vIH1cclxuXHJcbiAgICAgIGNvbnN0IGFjY29yZGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFjY29yZGlvblwiKTtcclxuICAgICAgY29uc3QgY2VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZXBcIik7XHJcbiAgICAgIGFjY29yZGlvbnMuZm9yRWFjaCgoYWNjb3JkaW9uLCBpKSA9PiB7XHJcbiAgICAgICAgYWNjb3JkaW9uLmFwcGVuZChjZXBbaV0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGNvbnN0IGNhcnRhb0NyZWRpdG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIpO1xyXG4gICAgICAvLyBjYXJ0YW9DcmVkaXRvLnRleHRDb250ZW50ID0gXCJDYXJ0w6NvIGRlIGNyw6lkaXRvXCI7XHJcbiAgICAgIC8vIGNvbnN0IGJvbGV0b0JhbmNhcmlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiKTtcclxuICAgICAgLy8gYm9sZXRvQmFuY2FyaW8udGV4dENvbnRlbnQgPSBcIkJvbGV0byBCYW5jw6FyaW9cIjtcclxuICAgICAgLy8gY29uc3QgcGl4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiKTtcclxuICAgICAgLy8gcGl4LnRleHRDb250ZW50ID0gXCJQaXhcIjtcclxuICAgICAgLy8gY29uc3QgdGV4dFBhcmNlbGFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50ZXh0LXBhcmNlbGFzXCIpO1xyXG4gICAgICAvLyB0ZXh0UGFyY2VsYXNbNl0uYmVmb3JlKGNhcnRhb0NyZWRpdG8pO1xyXG4gICAgICAvLyB0ZXh0UGFyY2VsYXNbN10uYmVmb3JlKGJvbGV0b0JhbmNhcmlvKTtcclxuICAgICAgLy8gdGV4dFBhcmNlbGFzWzhdLmJlZm9yZShwaXgpO1xyXG5cclxuICAgICAgLy8gQlJFVkUgREVTQ1JJQ0FPXHJcbiAgICAgIGNvbnN0IGRlc2NyaWNhbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpY2FvXCIpO1xyXG4gICAgICBjb25zdCBkaXZEZXNjcmljYW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBkaXZEZXNjcmljYW8uaWQgPSBcImJyZXZlLWRlc2NyaWNhb1wiO1xyXG5cclxuICAgICAgY29uc3QgZGVzY3JpY2FvaDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XHJcbiAgICAgIGRlc2NyaWNhb2gyLnRleHRDb250ZW50ID0gXCJEZXNjcmnDp8Ojb1wiO1xyXG4gICAgICBkZXNjcmljYW9oMi5pZCA9IFwiZGVzY3JpY2FvLXRpdHVsb1wiO1xyXG5cclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKGRlc2NyaWNhbykge1xyXG4gICAgICAgICAgY29uc3QgYnJldmVEZXNjcmljYW8gPSBkZXNjcmljYW8uaW5uZXJIVE1MLnNsaWNlKDAsIDUwMCk7XHJcblxyXG4gICAgICAgICAgaWYgKCFicmV2ZURlc2NyaWNhbykge1xyXG4gICAgICAgICAgICBicmV2ZURlc2NyaWNhbyA9IGRlc2NyaWNhby5zbGljZSgwLCAyMDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGl2RGVzY3JpY2FvLmlubmVySFRNTCA9IGJyZXZlRGVzY3JpY2FvICsgXCIgLi4uXCI7XHJcbiAgICAgICAgICBwYWluZWwwMC5hcHBlbmQoZGl2RGVzY3JpY2FvKTtcclxuICAgICAgICAgIGRlc2NyaWNhby5wcmVwZW5kKGRlc2NyaWNhb2gyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlamFMaW5rID1cclxuICAgICAgICAgIFwiPGEgaHJlZj0nI2Rlc2NyaWNhbycgaWQ9J3ZlamEtaW5mbyc+VmVqYSBtYWlzIGluZm9ybWHDp8O1ZXM8L2E+XCI7XHJcbiAgICAgICAgcGFpbmVsMDAuaW5uZXJIVE1MICs9IHZlamFMaW5rO1xyXG5cclxuICAgICAgICBsaW5oYUZvcm1hRGVFbnZpbyA9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJlbnZpb1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzIzODQvMjM4NDk5My9hcnF1aXZvcy9pY29uZS1ib3gtcHJvZHV0by5wbmdcIiBhbHQ9XCJib3hcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPkVudmlvIGVtIDQ4IGhvcmFzIMO6dGVpcyBhcMOzcyBhcHJvdmHDp8OjbyBkbyBwYWdhbWVudG88L3N0cm9uZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNtYWxsPipOw6NvIHbDoWxpZG8gcGFyYSBpdGVucyBkaWdpdGFpcyBlIHByw6ktdmVuZGFzLjwvc21hbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5gO1xyXG5cclxuICAgICAgICBwYWluZWwwMC5pbm5lckhUTUwgKz0gbGluaGFGb3JtYURlRW52aW87XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgUHJvZCwgLT4gJHtlfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBpdGVtUGFpbmVsMCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbS1wYWluZWwtMFwiKTtcclxuICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgZGl2LmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICBpdGVtUGFpbmVsMC5hcHBlbmQoZGl2KTtcclxuXHJcbiAgICAgIGNvbnN0IGJvdGFvVmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYS5ib3Rhby12aWRlb1wiKTtcclxuICAgICAgY29uc3QgaW1hZ2VtVmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICBpbWFnZW1WaWRlby5zcmMgPSBpY29uZVBsYXlWaWRlbztcclxuICAgICAgaW1hZ2VtVmlkZW8uaWQgPSBcImljb25lLXZpZGVvXCI7XHJcbiAgICAgIGJvdGFvVmlkZW8uYXBwZW5kKGltYWdlbVZpZGVvKTtcclxuXHJcbiAgICAgIGNvbnN0IHByb2R1dG9WaWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHV0by12aWRlbyBwXCIpO1xyXG4gICAgICBwcm9kdXRvVmlkZW8udGV4dENvbnRlbnQgPSBcIkNsaXF1ZSBhbyBsYWRvIHBhcmEgYXNzaXN0aXIgYW8gdsOtZGVvXCI7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJybykge1xyXG4gICAgY29uc29sZS5sb2coYFDDoWdpbmEgZG8gcHJvZHV0byAtPiAke2Vycm99YCk7XHJcbiAgfVxyXG59KTtcclxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgICdzdHJpY3QnXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAocGFnaW5hQ2FycmluaG8oKSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5wdXRGcmV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtYXMtZW52aW8gLnJhZGlvIGlucHV0Jyk7XHJcblxyXG4gICAgICAgICAgICBpbnB1dEZyZXRlLmZvckVhY2goKGVsZW1lbnRvLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBuZXdkaXYuY2xhc3NMaXN0LmFkZCgnaW5wdXRFbnZpbycpO1xyXG4gICAgICAgICAgICAgICAgbmV3ZGl2W2luZGV4XS5hcHBlbmQoZWxlbWVudG8pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybWFzLWVudmlvIC5yYWRpbycpO1xyXG4gICAgICAgICAgICAgICAgZm9ybWFzLmZvckVhY2goKGVsZW0pID0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucHJlcGVuZChuZXdkaXYpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHNldFRpdHVsb1BhZ2luYUNhcnJpbmhvKCk7XHJcbiAgICAgICAgICAgIHJlbW92ZVN1YnRvdGFsUGFnaW5hQ2FycmluaG8oKTtcclxuICAgICAgICAgICAgc3Vic3RpdHVpclNrdVBvckNvZGlnbygpO1xyXG5cclxuICAgICAgICAgICAgLy8gTW9kaWZpY2EgTGluayBuw6NvIHNlaSBtZXUgQ0VQXHJcbiAgICAgICAgICAgIHZhciBuYW9TZWlNZXVDRVAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhZ2luYS1jYXJyaW5obzpub3QoLmNhcnJpbmhvLWNoZWNrb3V0KSAuZmluYWxpemFyLWNvbXByYSAjZm9ybUNhbGN1bGFyRnJldGUgLmNvbnRyb2xzIC5pbnB1dC1hcHBlbmQgKyAuaGVscC1pbmxpbmUgPiBhXCIpO1xyXG4gICAgICAgICAgICB2YXIgaWNvbmVOYW9TZWlNZXVDRVAgPSBuYW9TZWlNZXVDRVAucXVlcnlTZWxlY3RvcihcImlcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICBuYW9TZWlNZXVDRVAuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgbmFvU2VpTWV1Q0VQLmFwcGVuZChpY29uZU5hb1NlaU1ldUNFUCk7XHJcblxyXG4gICAgICAgICAgICAvLyBmcmV0ZSBtb2JpbGVcclxuICAgICAgICAgICAgdmFyIGZyZXRlbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFiZWxhLWNhcnJpbmhvIHRyLmJnLWRhcmsuaGlkZGVuLXBob25lJyk7XHJcbiAgICAgICAgICAgIGZyZXRlbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlbi1waG9uZVwiKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJybykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gLT4gJHtlcnJvfWApO1xyXG4gICAgfVxyXG5cclxufSk7XG5mdW5jdGlvbiBsaW1pdGFyVGV4dENoZWNrb3V0KCkge1xuICBjb25zdCBub21lc0ZyZXRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubm9tZVwiKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBub21lc0ZyZXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IG5ld05vbWUgPSBub21lc0ZyZXRlc1tpXS5pbm5lckhUTUwuc2xpY2UoMCwgMjUpO1xuICAgICAgbmV3Tm9tZS5sZW5ndGggPj0gMjUgPyBub21lc0ZyZXRlc1tpXS5pbm5lckhUTUwgPSBgJHtuZXdOb21lfS4uLmAgOiBub21lc0ZyZXRlc1tpXS5pbm5lckhUTUwgPSBuZXdOb21lO1xuICB9ICAgXG4gIFxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpPT57XG4gIGlmIChwYWdpbmFDYXJyaW5obygpKSB7XG4gICAgICBsaW1pdGFyVGV4dENoZWNrb3V0KClcbiAgfVxuXG4gIGNvbnN0IGJ0bkZyZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNidG4tZnJldGVcIik7XG4gIGJ0bkZyZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gIH0pO1xufSlcblxudHJ5IHtcbiAgaWYgKHBhZ2luYUNoZWNrb3V0KCkpIHtcbiAgICBjYXJyaW5ob05hdihcIiNjYWJlY2FsaG8gPiAuY29udGVpbmVyXCIpO1xuXG4gICAgZnVuY3Rpb24gY2FycmluaG9OYXYoZGl2UGFpKSB7XG4gICAgICBsZXQgaW5mb0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBpbmZvRGl2LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJzcGFjZS1iZXR3ZWVuXCI7XG4gICAgICBpbmZvRGl2LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuXG4gICAgICBpbmZvRGl2LmNsYXNzTmFtZSA9IFwicm93LWZsdWlkXCI7XG4gICAgICBpbmZvRGl2LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcblxuICAgICAgbGV0IHNlbG9zRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHNlbG9zRGl2LmNsYXNzTmFtZSA9IFwic2Vsby1kaXZcIjtcbiAgICAgIGxldCBzZWxvcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICBzZWxvcy5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwic3BhY2UtYmV0d2VlblwiO1xuICAgICAgc2Vsb3Muc3JjID0gc2Vsb0NvbXByYVNlZ3VyYUNoZWNrb3V0O1xuICAgICAgc2Vsb3MuYWx0ID0gXCJzZWxvLWNvbXByYVwiO1xuICAgICAgc2Vsb3NEaXYuYXBwZW5kQ2hpbGQoc2Vsb3MpO1xuXG4gICAgICBsZXQgZ29vZ2xlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGdvb2dsZURpdi5jbGFzc05hbWUgPSBcImdvb2dsZS1kaXZcIjtcbiAgICAgIGxldCBnb29nbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgZ29vZ2xlLnNyYyA9IHNlbG9Hb29nbGVDaGVja291dDtcbiAgICAgIGdvb2dsZS5hbHQgPSBcInNlbG8gZ29vZ2xlXCI7XG4gICAgICBnb29nbGVEaXYuYXBwZW5kQ2hpbGQoZ29vZ2xlKTtcblxuICAgICAgLy8gbGV0IGF0ZW5kaW1lbnRvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIC8vIGF0ZW5kaW1lbnRvRGl2LmNsYXNzTmFtZSA9IFwiYXRlbmRpbWVudG8tdGVsXCI7XG4gICAgICAvLyBhdGVuZGltZW50b0Rpdi5pbm5lckhUTUwgPSBgXG4gICAgICAvLyBBdGVuZGltZW50bzxicj5cbiAgICAgIC8vIDxzdHJvbmc+KDExKSA5NTE1OC05NzQ1PC9zdHJvbmc+YDtcblxuICAgICAgbGV0IGNvbnRlaW5lck5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGl2UGFpKTtcbiAgICAgIGNvbnRlaW5lck5hdi5jbGFzc0xpc3QuYWRkKFwibW9iaWxlbmF2XCIpO1xuICAgICAgY29udGVpbmVyTmF2LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgIC8vIGNvbnRlaW5lck5hdi5zdHlsZS5tYXJnaW4gPSBcIjBweCAxMDBweCAwcHggMTAwcHhcIjtcbiAgICAgIC8vIGNvbnRlaW5lck5hdi5hcHBlbmRDaGlsZChsb2dvRGl2KTtcbiAgICAgIGNvbnRlaW5lck5hdi5hcHBlbmRDaGlsZChpbmZvRGl2KTtcbiAgICAgIGluZm9EaXYuYXBwZW5kQ2hpbGQoc2Vsb3NEaXYpO1xuICAgICAgaW5mb0Rpdi5hcHBlbmRDaGlsZChnb29nbGVEaXYpO1xuICAgICAgaW5mb0Rpdi5hcHBlbmRDaGlsZChhdGVuZGltZW50b0Rpdik7XG4gICAgfVxuICB9XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIGNoZWNrb3V0IGhlYWRlciAtPiAke2Vycm9yfWApO1xufVxuXG5mdW5jdGlvbiBwcmVlbmNoaW1lbnRvTGlzdGFFbmRlcmVjb3MoKSB7XHJcbiAgdmFyIGxpc3RhRW5kZXJlY28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI2xpc3RhRW5kZXJlY28gaW5wdXRcIik7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0YUVuZGVyZWNvLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsaXN0YUVuZGVyZWNvW2ldLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm0tY2hlY2tlZFwiKTtcclxuICAgIGlmIChsaXN0YUVuZGVyZWNvW2ldLmNoZWNrZWQpIHtcclxuICAgICAgbGlzdGFFbmRlcmVjb1tpXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtLWNoZWNrZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gIFwic3RyaWN0XCI7XHJcbiAgdHJ5IHtcclxuICAgIGlmIChwYWdpbmFDaGVja291dCgpKSB7XHJcbiAgICAgIHNldFRpdHVsb1BhZ2luYUNoZWNrb3V0KCk7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FiZWNhbGhvLWludGVybm9cIikuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgICAgIC8vIGNvbXBvcnRhbWVudG8gcmFkaW8gaW5wdXQgLSBMaXN0YSBFbmRlcmXDp29zXHJcbiAgICAgIHZhciBpbnB1dHNMaXN0YUVuZGVyZWNvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgXCIjbGlzdGFFbmRlcmVjbyBpbnB1dFwiXHJcbiAgICAgICk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRzTGlzdGFFbmRlcmVjb3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpbnB1dHNMaXN0YUVuZGVyZWNvc1tpXS5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBcIm9uY2xpY2tcIixcclxuICAgICAgICAgIFwicHJlZW5jaGltZW50b0xpc3RhRW5kZXJlY29zKClcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgcHJlZW5jaGltZW50b0xpc3RhRW5kZXJlY29zKCk7XHJcbiAgICAgIGNvbnN0IGZvcm1hc1BhZ2FtZW50byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZXhpYmlyRm9ybWFzUGFnYW1lbnRvIGFcIik7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gZm9ybWFzUGFnYW1lbnRvLmNsaWNrKCksIDEwMDApO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gcGFnaW5hIGNoZWNrb3V0IC0+ICR7ZS5tZXNzYWdlfWApO1xyXG4gIH1cclxufSk7XHJcblxyXG5cclxuLy8gY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhYmVsYS1jYXJyaW5obyAuZm9ybWFzLWVudmlvIHVsIGxpIGxhYmVsLnJhZGlvIGlucHV0XCIpO1xyXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcbiAgXCJzdHJpY3RcIjtcclxuICB0cnkge1xyXG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PSBcIi9wYWdpbmEvcXVlbS1zb21vcy5odG1sXCIpIHtcclxuICAgICAgY29uc3QgZGl2QmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgZGl2QmFubmVyLmlkID0gXCJiYW5uZXItc29icmUtbm9zXCI7XHJcbiAgICAgIGNvbnN0IGJhbm5lckltYWdlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgIGJhbm5lckltYWdlbS5zcmMgPSBxdWVtU29tb3NCYW5uZXI7XHJcbiAgICAgIGJhbm5lckltYWdlbS5hbHQgPSBcIkJhbm5lciBzb2JyZSBub3NcIjtcclxuICAgICAgZGl2QmFubmVyLmFwcGVuZChiYW5uZXJJbWFnZW0pO1xyXG4gICAgICBkaXZCYW5uZXIuYXBwZW5kKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnJlYWRjcnVtYnNcIikpO1xyXG4gICAgICBkaXZCYW5uZXIuYXBwZW5kKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMS50aXR1bG8uY29yLXNlY3VuZGFyaWFcIikpO1xyXG4gICAgICBjb25zdCBkZXN0aW5vQmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb3Jwb1wiKTtcclxuICAgICAgZGVzdGlub0Jhbm5lci5wcmVwZW5kKGRpdkJhbm5lcik7XHJcblxyXG4gICAgICAvLyAgIEFQUEVORCBERVNUQVFVRSBJTkZFUklPUlxyXG4gICAgICBjb25zdCBjYWl4YVNvbWJyZWFkYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FpeGEtc29tYnJlYWRhXCIpO1xyXG4gICAgICAvLyAgIGNhaXhhU29tYnJlYWRhLmFmdGVyKFxyXG4gICAgICAvLyBjcmlhckJhbm5lckRlc3RhcXVlSW5mZXJpb3IoKVxyXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAvLyBJbnNlcmlyIGRhZG9zIGFxdWlcclxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgLy8gICBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yLFxyXG4gICAgICAvLyAgIHRleHRvQmFubmVyRGVzdGFxdWVJbmZlcmlvcixcclxuICAgICAgLy8gICBwb3JjZW50QmFubmVyRGVzdGFxdWVJbmZlcmlvcixcclxuICAgICAgLy8gICBjdGFCYW5uZXJEZXN0YXF1ZUluZmVyaW9yXHJcbiAgICAgIC8vICAgKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIC0+ICR7ZXJyb31gKTtcclxuICB9XHJcbn0pO1xyXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgJ3N0cmljdCdcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PSAnL3BhZ2luYS9wZXJndW50YXMtZnJlcXVlbnRlcy5odG1sJykge1xyXG4gICAgICAgICAgICBjb25zdCBkaXZCYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBkaXZCYW5uZXIuaWQgPSBcImJhbm5lci1wZXJndW50YXMtZnJlcXVlbnRlc1wiO1xyXG4gICAgICAgICAgICBjb25zdCBiYW5uZXJJbWFnZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICBiYW5uZXJJbWFnZW0uc3JjID0gcGVyZ3VudGFzRnJlcXVlbnRlc0Jhbm5lcjtcclxuICAgICAgICAgICAgYmFubmVySW1hZ2VtLmFsdCA9IFwiQmFubmVyIHRyb2NhcyBlIGRldm9sdWNvZXNcIjtcclxuICAgICAgICAgICAgZGl2QmFubmVyLmFwcGVuZChiYW5uZXJJbWFnZW0pO1xyXG4gICAgICAgICAgICBkaXZCYW5uZXIuYXBwZW5kKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnJlYWRjcnVtYnNcIikpO1xyXG4gICAgICAgICAgICBkaXZCYW5uZXIuYXBwZW5kKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMS50aXR1bG8uY29yLXNlY3VuZGFyaWFcIikpO1xyXG4gICAgICAgICAgICBjb25zdCBkZXN0aW5vQmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb3Jwb1wiKTtcclxuICAgICAgICAgICAgZGVzdGlub0Jhbm5lci5wcmVwZW5kKGRpdkJhbm5lcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm8pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIC0+ICR7ZXJyb31gKTtcclxuICAgIH1cclxufSk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gIFwic3RyaWN0XCI7XHJcbiAgdHJ5IHtcclxuICAgIGlmIChcclxuICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09IFwiL3BhZ2luYS9wb2xpdGljYS1kZS10cm9jYXMtZS1kZXZvbHVjb2VzLmh0bWxcIlxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGRpdkJhbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgIGRpdkJhbm5lci5pZCA9IFwiYmFubmVyLXRyb2NhLWUtZGV2b2x1Y29lc1wiO1xyXG4gICAgICBjb25zdCBiYW5uZXJJbWFnZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICBiYW5uZXJJbWFnZW0uc3JjID1cclxuICAgICAgICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8xNTk1LzE1OTUwMDIvYXJxdWl2b3MvYmFubmVyLXRyb2Nhcy1lLWRldm9sdWNvZXMtZGVza3RvcC5wbmdcIjtcclxuICAgICAgYmFubmVySW1hZ2VtLmFsdCA9IFwiQmFubmVyIHRyb2NhcyBlIGRldm9sdWNvZXNcIjtcclxuICAgICAgZGl2QmFubmVyLmFwcGVuZChiYW5uZXJJbWFnZW0pO1xyXG4gICAgICBkaXZCYW5uZXIuYXBwZW5kKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnJlYWRjcnVtYnNcIikpO1xyXG4gICAgICBkaXZCYW5uZXIuYXBwZW5kKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMS50aXR1bG8uY29yLXNlY3VuZGFyaWFcIikpO1xyXG4gICAgICBjb25zdCBkZXN0aW5vQmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb3Jwb1wiKTtcclxuICAgICAgZGVzdGlub0Jhbm5lci5wcmVwZW5kKGRpdkJhbm5lcik7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJybykge1xyXG4gICAgY29uc29sZS5sb2coYEVycm8gZW5jb250cmFkbyAtPiAke2Vycm99YCk7XHJcbiAgfVxyXG59KTtcclxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgICdzdHJpY3QnXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT0gJy9wYWdpbmEvdXNvLWUtY29uc2VydmFjYW8uaHRtbCcpIHtcclxuICAgICAgICAgICAgY29uc3QgZGl2QmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgZGl2QmFubmVyLmlkID0gXCJiYW5uZXItdHJvY2EtZS1kZXZvbHVjb2VzXCI7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhbm5lckltYWdlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgIGJhbm5lckltYWdlbS5zcmMgPSBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjg5LzIyODkwNDEvYXJxdWl2b3MvdXNvIGUgY29ucy5qcGdcIjtcclxuICAgICAgICAgICAgYmFubmVySW1hZ2VtLmFsdCA9IFwiVXNvIGUgQ29uc2VydmHDp8Ojb1wiO1xyXG4gICAgICAgICAgICBkaXZCYW5uZXIuYXBwZW5kKGJhbm5lckltYWdlbSk7XHJcbiAgICAgICAgICAgIGRpdkJhbm5lci5hcHBlbmQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNicmVhZGNydW1ic1wiKSk7XHJcbiAgICAgICAgICAgIGRpdkJhbm5lci5hcHBlbmQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgxLnRpdHVsby5jb3Itc2VjdW5kYXJpYVwiKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc3Rpbm9CYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvcnBvXCIpO1xyXG4gICAgICAgICAgICBkZXN0aW5vQmFubmVyLnByZXBlbmQoZGl2QmFubmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gLT4gJHtlLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbn0pO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAnc3RyaWN0J1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09ICcvcGFnaW5hL2VudmlvLWUtZW50cmVnYS5odG1sJykge1xyXG4gICAgICAgICAgICBjb25zdCBkaXZCYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBkaXZCYW5uZXIuaWQgPSBcImJhbm5lci1lbnZpby1lLWVudHJlZ2FcIjtcclxuICAgICAgICAgICAgY29uc3QgYmFubmVySW1hZ2VtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgYmFubmVySW1hZ2VtLnNyYyA9IFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzE1OTYvMTU5NjAzMi9hcnF1aXZvcy9JbWFnZW0tZW52aW9AMnguanBnXCI7XHJcbiAgICAgICAgICAgIGJhbm5lckltYWdlbS5hbHQgPSBcIkJhbm5lciBlbnZpbyBlIGVudHJlZ2FcIjtcclxuICAgICAgICAgICAgZGl2QmFubmVyLmFwcGVuZChiYW5uZXJJbWFnZW0pO1xyXG4gICAgICAgICAgICBkaXZCYW5uZXIuYXBwZW5kKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnJlYWRjcnVtYnNcIikpO1xyXG4gICAgICAgICAgICBkaXZCYW5uZXIuYXBwZW5kKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMS50aXR1bG8uY29yLXNlY3VuZGFyaWFcIikpO1xyXG4gICAgICAgICAgICBjb25zdCBkZXN0aW5vQmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb3Jwb1wiKTtcclxuICAgICAgICAgICAgZGVzdGlub0Jhbm5lci5wcmVwZW5kKGRpdkJhbm5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gZW52aW8gZSBlbnRyZWdhIC0+ICR7ZS5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG59KTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcbiAgXCJzdHJpY3RcIjtcclxuICB0cnkge1xyXG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PSBcIi9wYWdpbmEvc2VndXJhbmNhLWUtcHJpdmFjaWRhZGUuaHRtbFwiKSB7XHJcbiAgICAgIGNvbnN0IGRpdkJhbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgIGRpdkJhbm5lci5pZCA9IFwiYmFubmVyLXNlZ3VyYW5jYS1lLXByaXZhY2lkYWRlXCI7XHJcbiAgICAgIGNvbnN0IGJhbm5lckltYWdlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgIGJhbm5lckltYWdlbS5zcmMgPSBzZWd1cmFuY2FFUHJpdmFjaWRhZGVCYW5uZXI7XHJcbiAgICAgIGJhbm5lckltYWdlbS5hbHQgPSBcIkJhbm5lciB0cm9jYXMgZSBkZXZvbHVjb2VzXCI7XHJcbiAgICAgIGRpdkJhbm5lci5hcHBlbmQoYmFubmVySW1hZ2VtKTtcclxuICAgICAgZGl2QmFubmVyLmFwcGVuZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JyZWFkY3J1bWJzXCIpKTtcclxuICAgICAgLy8gZGl2QmFubmVyLmFwcGVuZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaDEudGl0dWxvLmNvci1zZWN1bmRhcmlhXCIpKTtcclxuICAgICAgY29uc3QgZGVzdGlub0Jhbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29ycG9cIik7XHJcbiAgICAgIGRlc3Rpbm9CYW5uZXIucHJlcGVuZChkaXZCYW5uZXIpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm8pIHtcclxuICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gbmEgcMOhZ2luYSBkZSBzZWd1cmFuw6dhIGUgcHJpdmFjaWRhZGUgLT4gJHtlcnJvfWApO1xyXG4gIH1cclxufSk7XHJcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICBcInN0cmljdFwiO1xyXG4gIHRyeSB7XHJcbiAgICAvLyBmdW5jdGlvbiBpbnNlcmVUZXh0b0Z1bGxCYW5uZXJzKCkge1xyXG4gICAgICB2YXIgdGV4dEJhbm5lcjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhbm5lci10ZXh0LTAxXCIpO1xyXG4gICAgICB2YXIgdGV4dEJhbm5lcjIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhbm5lci10ZXh0LTAyXCIpO1xyXG4gICAgICB2YXIgdGV4dEJhbm5lcjMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhbm5lci10ZXh0LTAzXCIpO1xyXG5cclxuICAgICAgdmFyIGNsb25lVGV4dEJhbm5lckRlc2t0b3AxID0gdGV4dEJhbm5lcjEuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICB2YXIgY2xvbmVUZXh0QmFubmVyRGVza3RvcDIgPSB0ZXh0QmFubmVyMi5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgIHZhciBjbG9uZVRleHRCYW5uZXJEZXNrdG9wMyA9IHRleHRCYW5uZXIzLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAgIC8vIHZhciBjbG9uZVRleHRCYW5uZXJNb2JpbGUxID0gdGV4dEJhbm5lcjEuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAvLyB2YXIgY2xvbmVUZXh0QmFubmVyTW9iaWxlMiA9IHRleHRCYW5uZXIyLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgLy8gdmFyIGNsb25lVGV4dEJhbm5lck1vYmlsZTMgPSB0ZXh0QmFubmVyMy5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZnVsbC1iYW5uZXIgLnN3aXBlci1zbGlkZSBpbWdbYWx0PVwiRnVsbF9CYW5uZXJfMV9EZXNrdG9wXCJdJykuYWZ0ZXIoY2xvbmVUZXh0QmFubmVyRGVza3RvcDEpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Z1bGwtYmFubmVyIC5zd2lwZXItc2xpZGUgaW1nW2FsdD0nRnVsbF9CYW5uZXJfMl9EZXNrdG9wJ11cIikuYWZ0ZXIoY2xvbmVUZXh0QmFubmVyRGVza3RvcDIpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Z1bGwtYmFubmVyIC5zd2lwZXItc2xpZGUgaW1nW2FsdD0nRnVsbF9CYW5uZXJfM19EZXNrdG9wJ11cIikuYWZ0ZXIoY2xvbmVUZXh0QmFubmVyRGVza3RvcDMpO1xyXG5cclxuICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmdWxsLWJhbm5lci1tb2JpbGUgLnN3aXBlci1zbGlkZSBpbWdbYWx0PSdGdWxsX0Jhbm5lcl8yX01vYmlsZSddXCIpLmFmdGVyKGNsb25lVGV4dEJhbm5lck1vYmlsZTEpO1xyXG4gICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Z1bGwtYmFubmVyLW1vYmlsZSAuc3dpcGVyLXNsaWRlIGltZ1thbHQ9J0Z1bGxfQmFubmVyXzFfTW9iaWxlJ11cIikuYWZ0ZXIoY2xvbmVUZXh0QmFubmVyTW9iaWxlMik7XHJcbiAgICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZnVsbC1iYW5uZXItbW9iaWxlIC5zd2lwZXItc2xpZGUgaW1nW2FsdD0nRnVsbF9CYW5uZXJfMl9Nb2JpbGUnXVwiKS5hZnRlcihjbG9uZVRleHRCYW5uZXJNb2JpbGUzKTtcclxuXHJcbiAgICAgIHRleHRCYW5uZXIxLnJlbW92ZSgpO1xyXG4gICAgICB0ZXh0QmFubmVyMi5yZW1vdmUoKTtcclxuICAgICAgdGV4dEJhbm5lcjMucmVtb3ZlKCk7XHJcbiAgICAvLyB9XHJcbiAgICAvLyBpbnNlcmVUZXh0b0Z1bGxCYW5uZXJzKCk7XHJcblxyXG4gICAgLy8gY29uc3Qgbm9tZUZ1bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZnVsbC1iYW5uZXIgLnN3aXBlci1zbGlkZSBhIGltZycpO1xyXG4gICAgLy8gY29uc3QgYXRyaWIgPSBub21lRnVsbC5nZXRBdHRyaWJ1dGUoJ2FsdCcpO1xyXG5cclxuICAgIC8vIGNvbnN0IG5ld3NwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgLy8gbmV3c3AuY2xhc3NMaXN0LmFkZCgnbm9tZS1iYW5uZXInKTtcclxuICAgIC8vIG5ld3NwLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgIC8vIG5ld3NwLnByZXBlbmQoYXRyaWIpO1xyXG5cclxuICAgIC8vIG5vbWVGdWxsLmJlZm9yZShuZXdzcCk7XHJcblxyXG4gICAgLy8gY29uc3Qgbm9tZUZ1bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZnVsbC1iYW5uZXIgLnN3aXBlci1zbGlkZSBhIGltZycpO1xyXG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBub21lRnVsbC5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIC8vICAgICBsZXQgYXRyaWIgPSBub21lRnVsbC5nZXRBdHRyaWJ1dGUoJ2FsdCcpO1xyXG5cclxuICAgIC8vICAgICBjb25zdCBuZXdzcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIC8vICAgICBuZXdzcC5jbGFzc0xpc3QuYWRkKCdub21lLWJhbm5lcicpO1xyXG4gICAgLy8gICAgIG5ld3NwLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgIC8vICAgICBuZXdzcC5wcmVwZW5kKGF0cmliKTtcclxuXHJcbiAgICAvLyAgICAgbm9tZUZ1bGwuYmVmb3JlKG5ld3NwKTtcclxuICAgIC8vICAgfVxyXG4gICAgXHJcblxyXG4gIH0gY2F0Y2ggKGVycm8pIHtcclxuICAgIGNvbnNvbGUubG9nKGBFcnJvIGVuY29udHJhZG8gbmEgcMOhZ2luYSB0ZXh0byBiYW5uZXIgLT4gJHtlcnJvfWApO1xyXG4gIH1cclxufSk7XHJcblxuY29uc3QgY3JpYXJDb250ZXVkb0JhcnJhSW5pY2lhbCA9ICh0ZXh0b1Nsb2dhbiwgdXJsSW1hZ2VtU2xvZ2FuKSA9PiB7XHJcbiAgLy8gQWRpY2lvbmEgdGV4dG8gbmEgYmFycmEgaW5pY2lhbFxyXG4gIGNvbnN0IHNsb2dhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIHNsb2dhbi5jbGFzc0xpc3QuYWRkKFwic2xvZ2FuXCIpO1xyXG4gIHNsb2dhbi5pbm5lckhUTUwgPSB0ZXh0b1Nsb2dhbjtcclxuXHJcbiAgLy8gQWRpY2lvbmEgaW1hZ2VtIG5hIGJhcnJhIGluaWNpYWxcclxuICBjb25zdCBpbWFnZW1TbG9nYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGltYWdlbVNsb2dhbi5jbGFzc0xpc3QuYWRkKFwiaW1hZ2VtU2xvZ2FuXCIpO1xyXG4gIGltYWdlbVNsb2dhbi5zcmMgPSB1cmxJbWFnZW1TbG9nYW47XHJcbiAgaW1hZ2VtU2xvZ2FuLmFsdCA9IFwiaW1hZ2VtLXNsb2dhblwiO1xyXG5cclxuICAvLyBTZWxlY2lvbmEgYmFycmEgaW5pY2lhbCBlIGFkaWNpb25hIGVsZW1lbnRvc1xyXG4gIGxldCBiYXJyYUluaWNpYWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGJhcnJhSW5pY2lhbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYmFycmEtaW5pY2lhbC1jb250YWluZXJcIik7XHJcbiAgYmFycmFJbmljaWFsQ29udGFpbmVyLmFwcGVuZChzbG9nYW4pO1xyXG4gIC8vIGJhcnJhSW5pY2lhbENvbnRhaW5lci5hcHBlbmQoaW1hZ2VtU2xvZ2FuKTtcclxuXHJcbiAgcmV0dXJuIGJhcnJhSW5pY2lhbENvbnRhaW5lcjtcclxufTtcclxuXHJcbi8vIEJBQ0tVUCBERSBMT0dJQ0EgREUgSU1QTEVNRU5UQcOHw4NPLCBJTlNFUklSIE5BUyBQw4FHSU5BU1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gIFwic3RyaWN0XCI7XHJcbiAgdHJ5IHtcclxuICAgIHJlbW92ZXJUdWRvKFwiLmJhcnJhLWluaWNpYWwgLmNvbnRlaW5lclwiKTtcclxuICAgIHJlbW92ZXJUdWRvKFwiLmF0YWxob3MtbW9iaWxlXCIpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIC0+ICR7ZXJyb3J9YCk7XHJcbiAgfVxyXG59KTtcclxuXG4vLyBSRU1PVkVBIFNUSUNLWSBCQVIgRE8gVE9QTyBRVUFORE8gU0NST0xMIERPV05cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAnc3RyaWN0J1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBMaW1wYSBiYXJyYSB0b3BvXHJcbiAgICAgICAgcmVtb3ZlclR1ZG8oXCIjYmFycmFUb3BvXCIpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIC0+ICR7ZXJyb3J9YCk7XHJcbiAgICB9XHJcbn0pO1xuY29uc3QgaG92ZXJNZW51U3VwZXJpb3JBdGVuZGltZW50byA9ICgpID0+IHtcclxuICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm94LWF0ZW5kaW1lbnRvLXN1cGVyaW9yXCIpO1xyXG4gIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5Tm9uZVwiKTtcclxufTtcclxuXHJcbmNvbnN0IGhvdmVyT3V0TWVudVN1cGVyaW9yQXRlbmRpbWVudG8gPSAoKSA9PiB7XHJcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJveC1hdGVuZGltZW50by1zdXBlcmlvclwiKTtcclxuICBlbC5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheU5vbmVcIik7XHJcbn07XHJcblxyXG5jb25zdCBob3Zlck1lbnVTdXBlcmlvckNvbnRhID0gKCkgPT4ge1xyXG4gIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib3gtbWluaGEtY29udGFcIik7XHJcbiAgZWwuY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXlOb25lXCIpO1xyXG59O1xyXG5cclxuY29uc3QgaG92ZXJPdXRNZW51U3VwZXJpb3JDb250YSA9ICgpID0+IHtcclxuICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm94LW1pbmhhLWNvbnRhXCIpO1xyXG4gIGVsLmNsYXNzTGlzdC5hZGQoXCJkaXNwbGF5Tm9uZVwiKTtcclxufTtcclxuXHJcbmNvbnN0IGNhdGVnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImxpLmNhdGVnb3JpYS1pZC0xODAzNzAxMiBhXCIpO1xyXG5jb25zdCBjYXRlZ1RhZyA9IGNhdGVnLmdldEF0dHJpYnV0ZShcInRpdGxlXCIpO1xyXG5jYXRlZ1RhZy5pbm5lclRleHQgPSBcIkVtIGJyZXZlXCI7XHJcbi8qXHJcbkJBUlJBIERFIEJVU0NBIE5BViBTVVBFUklPUlxyXG4qL1xyXG5jb25zdCBjcmlhckJhcnJhQnVzY2FOYXZTdXBlcmlvciA9IChwbGFjZWhvbGRlciwgdXJsSWNvbmVCYXJyYUJ1c2NhKSA9PiB7XHJcbiAgLy8gQ3JpYXIgZm9ybVxyXG4gIGNvbnN0IGZvcm1CYXJyYUJ1c2NhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XHJcbiAgZm9ybUJhcnJhQnVzY2EuaWQgPSBcImZvcm0tYnVzY2FyXCI7XHJcbiAgZm9ybUJhcnJhQnVzY2EuYWN0aW9uID0gXCIvYnVzY2FyXCI7XHJcbiAgZm9ybUJhcnJhQnVzY2EubWV0aG9kID0gXCJHRVRcIjtcclxuXHJcbiAgLy8gQ3JpYXIgaW5wdXQgbXVpdG9zIHPDo28gdmFsb3JlcyBkZWZhdWx0IGRhIExvamEgSW50ZWdyYWRhICpDdWlkYWRvXHJcbiAgY29uc3QgaW5wdXRCYXJyYUJ1c2NhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gIGlucHV0QmFycmFCdXNjYS5pZCA9IFwiYXV0by1jb21wbGV0ZVwiO1xyXG4gIGlucHV0QmFycmFCdXNjYS5jbGFzcyA9IFwidWktYXV0b2NvbXBsZXRlLWlucHV0XCI7XHJcbiAgaW5wdXRCYXJyYUJ1c2NhLnR5cGUgPSBcInRleHRcIjtcclxuICBpbnB1dEJhcnJhQnVzY2EubmFtZSA9IFwicVwiO1xyXG4gIGlucHV0QmFycmFCdXNjYS5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xyXG4gIGlucHV0QmFycmFCdXNjYS5hdXRvY29tcGxldGUgPSBcIm9mZlwiO1xyXG5cclxuICAvLyBjcmlhciBpZnJhbWVcclxuICAvLyBjb25zdCBjYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhYmVjYWxob1wiKTtcclxuICAvLyBjb25zdCBkaXZpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIC8vIGRpdmlmcmFtZS5jbGFzc0xpc3QuYWRkKFwiZGl2LWlmcmFtZVwiKTtcclxuXHJcbiAgLy8gY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcclxuICAvLyBpZnJhbWUuY2xhc3NMaXN0LmFkZChcImFxdWktbGlua1wiKTtcclxuICAvLyBkaXZpZnJhbWUuYXBwZW5kKGlmcmFtZSk7XHJcblxyXG4gIC8vIGNhYi5hcHBlbmQoZGl2aWZyYW1lKTtcclxuXHJcbiAgLy8gZGl2aWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gIC8vIGRpdmlmcmFtZS5zdHlsZS50b3AgPSBcIjUwcHhcIjtcclxuICAvLyBkaXZpZnJhbWUuc3R5bGUuekluZGV4ID0gXCI5OTk5OTk5OTk5OTlcIjtcclxuICAvLyBkaXZpZnJhbWUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cclxuICAvLyBDcmlhciBib3TDo29cclxuICBjb25zdCBib3Rhb0JhcnJhQnVzY2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJvdGFvQmFycmFCdXNjYS5jbGFzc0xpc3QuYWRkKFwiYm90YW8tbmF2LXN1cGVyaW9yLXB1cm9cIik7XHJcblxyXG4gIC8vIEluc2VyaXIgaW1hZ2VtIGRvIMOtY29uZSBubyBib3TDo29cclxuICBjb25zdCBpY29uZUJvdGFvQmFycmFCdXNjYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaWNvbmVCb3Rhb0JhcnJhQnVzY2EuY2xhc3NMaXN0LmFkZChcImljb25lLW5hdi1zdXBlcmlvci1iYXJyYS1idXNjYVwiKTtcclxuICBpY29uZUJvdGFvQmFycmFCdXNjYS5zcmMgPSB1cmxJY29uZUJhcnJhQnVzY2E7XHJcbiAgaWNvbmVCb3Rhb0JhcnJhQnVzY2EuYWx0ID0gXCJpY29uZS1wZXNxdWlzYXJcIjtcclxuICBib3Rhb0JhcnJhQnVzY2EuYXBwZW5kKGljb25lQm90YW9CYXJyYUJ1c2NhKTtcclxuXHJcbiAgLy8gQXBwZW5kc1xyXG4gIGZvcm1CYXJyYUJ1c2NhLmFwcGVuZChib3Rhb0JhcnJhQnVzY2EpO1xyXG4gIGZvcm1CYXJyYUJ1c2NhLmFwcGVuZChpbnB1dEJhcnJhQnVzY2EpO1xyXG5cclxuICByZXR1cm4gZm9ybUJhcnJhQnVzY2E7XHJcbn07XHJcblxyXG4vKlxyXG5OQVYgU1VQRVJJT1JcclxuKi9cclxuY29uc3QgY3JpYXJOYXZTdXBlcmlvciA9IChcclxuICB1cmxJY29uZUF0ZW5kaW1lbnRvLFxyXG4gIHVybEljb25lRmF2b3JpdG9zLFxyXG4gIHVybEljb25lQ29udGEsXHJcbiAgdXJsSWNvbmVDYXJyaW5obyxcclxuICBpbmZvVGVsZWZvbmVzLFxyXG4gIGZhbGVDb25vc2NvLFxyXG4gIGhvcmFyaW9zQXRlbmRpbWVudG8sXHJcbiAgZW52aW9zLFxyXG4gIGRpdkJlbVZpbmRvSFRNTCxcclxuICBkaXZNaW5oYXNJbmZvc0hUTUxcclxuKSA9PiB7XHJcbiAgLyogXHJcbiAgICBDcmlhciBiYXJyYSBkZSBuYXZlZ2HDp8OjbyBzdXBlcmlvciBcclxuICAgICovXHJcbiAgY29uc3QgbmF2U3VwZXJpb3JDb250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIG5hdlN1cGVyaW9yQ29udGVpbmVyLmNsYXNzTGlzdC5hZGQoXCJuYXYtc3VwZXJpb3ItY29udGVpbmVyXCIpO1xyXG5cclxuICAvKiBcclxuICAgIENyaWFyIGRpdiBhdGVuZGltZW50byBcclxuICAgICovXHJcbiAgY29uc3QgaXRlbUF0ZW5kaW1lbnRvTmF2U3VwZXJpb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGl0ZW1BdGVuZGltZW50b05hdlN1cGVyaW9yLmNsYXNzTGlzdC5hZGQoXCJpdGVtLW5hdlwiLCBcImF0ZW5kaW1lbnRvLWl0ZW1cIik7XHJcbiAgY29uc3QgaWNvbmVBdGVuZGltZW50b05hdlN1cGVyaW9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpY29uZUF0ZW5kaW1lbnRvTmF2U3VwZXJpb3Iuc3JjID0gdXJsSWNvbmVBdGVuZGltZW50bztcclxuICBpY29uZUF0ZW5kaW1lbnRvTmF2U3VwZXJpb3IuY2xhc3NMaXN0LmFkZChcImljb25lLWF0ZW5kaW1lbnRvLW5hdlwiKTtcclxuICBpY29uZUF0ZW5kaW1lbnRvTmF2U3VwZXJpb3IuYWx0ID0gXCJpY29uZS1hdGVuZGltZW50b1wiO1xyXG4gIGNvbnN0IHNwYW5BdGVuZGltZW50b05hdlN1cGVyaW9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgc3BhbkF0ZW5kaW1lbnRvTmF2U3VwZXJpb3IuY2xhc3NMaXN0LmFkZChcIml0ZW0tYXRlbmRpbWVudG8tc3VwZXJpb3JcIik7XHJcbiAgc3BhbkF0ZW5kaW1lbnRvTmF2U3VwZXJpb3IuaW5uZXJIVE1MID0gXCJBdGVuZGltZW50b1wiO1xyXG4gIGl0ZW1BdGVuZGltZW50b05hdlN1cGVyaW9yLm9ubW91c2VvdmVyID0gaG92ZXJNZW51U3VwZXJpb3JBdGVuZGltZW50bztcclxuICBpdGVtQXRlbmRpbWVudG9OYXZTdXBlcmlvci5vbm1vdXNlbGVhdmUgPSBob3Zlck91dE1lbnVTdXBlcmlvckF0ZW5kaW1lbnRvO1xyXG5cclxuICAvLyAoMSkgQm94IGhvdmVyIGF0ZW5kaW1lbnRvXHJcbiAgY29uc3QgYm94SG92ZXJBdGVuZGltZW50byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgYm94SG92ZXJBdGVuZGltZW50by5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheU5vbmVcIiwgXCJib3gtYXRlbmRpbWVudG8tc3VwZXJpb3JcIik7XHJcbiAgLy8gMiBjcmlhciBkaXYgdGVsZWZvbmVzXHJcbiAgY29uc3QgZGl2VGVsZWZvbmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZUZWxlZm9uZXMuaW5uZXJIVE1MID0gaW5mb1RlbGVmb25lcztcclxuICAvLyAyIGNyaWFyIGRpdiBmYWxlQ29ub3Njb1xyXG4gIGNvbnN0IGRpdkZhbGVDb25vc2NvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZGYWxlQ29ub3Njby5pbm5lckhUTUwgPSBmYWxlQ29ub3NjbztcclxuICAvLyAyIGNyaWFyIGRpdiBIb3LDoXJpb3MgZGUgYXRlbmRpbWVudG9cclxuICBjb25zdCBkaXZIb3Jhcmlvc0F0ZW5kaW1lbnRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZIb3Jhcmlvc0F0ZW5kaW1lbnRvLmlubmVySFRNTCA9IGhvcmFyaW9zQXRlbmRpbWVudG87XHJcbiAgLy8gMiBjcmlhciBkaXYgZW52aW9zXHJcbiAgY29uc3QgZGl2RW52aW9zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZFbnZpb3MuaW5uZXJIVE1MID0gZW52aW9zO1xyXG4gIGJveEhvdmVyQXRlbmRpbWVudG8uYXBwZW5kKGRpdlRlbGVmb25lcyk7XHJcbiAgYm94SG92ZXJBdGVuZGltZW50by5hcHBlbmQoZGl2RmFsZUNvbm9zY28pO1xyXG4gIGJveEhvdmVyQXRlbmRpbWVudG8uYXBwZW5kKGRpdkhvcmFyaW9zQXRlbmRpbWVudG8pO1xyXG4gIGJveEhvdmVyQXRlbmRpbWVudG8uYXBwZW5kKGRpdkVudmlvcyk7XHJcbiAgc3BhbkF0ZW5kaW1lbnRvTmF2U3VwZXJpb3IuYXBwZW5kKGJveEhvdmVyQXRlbmRpbWVudG8pO1xyXG4gIC8vIEFkaWNpb25hciBpY29uZSBlIHRleHRvIG5hIGRpdiBuw612ZWwgdW0gYXRlbmRpbWVudG9cclxuICBpdGVtQXRlbmRpbWVudG9OYXZTdXBlcmlvci5hcHBlbmQoaWNvbmVBdGVuZGltZW50b05hdlN1cGVyaW9yKTtcclxuICBpdGVtQXRlbmRpbWVudG9OYXZTdXBlcmlvci5hcHBlbmQoc3BhbkF0ZW5kaW1lbnRvTmF2U3VwZXJpb3IpO1xyXG5cclxuICAvLyBBZGljaW9uYXIgaXRlbSBhdGVuZGltZW50byBuYSBOYXYgU3VwZXJpb3JcclxuICBuYXZTdXBlcmlvckNvbnRlaW5lci5hcHBlbmQoaXRlbUF0ZW5kaW1lbnRvTmF2U3VwZXJpb3IpO1xyXG5cclxuICAvKlxyXG4gICAgQ3JpYXIgZGl2IEZhdm9yaXRvc1xyXG4gICAgKi9cclxuICBjb25zdCBpdGVtRmF2b3JpdG9zTmF2U3VwZXJpb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGl0ZW1GYXZvcml0b3NOYXZTdXBlcmlvci5jbGFzc0xpc3QuYWRkKFwiaXRlbS1uYXZcIiwgXCJmYXZvcml0b3MtaXRlbVwiKTtcclxuICBjb25zdCBpY29uZUZhdm9yaXRvc05hdlN1cGVyaW9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpY29uZUZhdm9yaXRvc05hdlN1cGVyaW9yLnNyYyA9IHVybEljb25lRmF2b3JpdG9zO1xyXG4gIGljb25lRmF2b3JpdG9zTmF2U3VwZXJpb3IuY2xhc3NMaXN0LmFkZChcImljb25lLUZhdm9yaXRvcy1uYXZcIik7XHJcbiAgaWNvbmVGYXZvcml0b3NOYXZTdXBlcmlvci5hbHQgPSBcImljb25lLUZhdm9yaXRvc1wiO1xyXG4gIGNvbnN0IHNwYW5GYXZvcml0b3NOYXZTdXBlcmlvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gIHNwYW5GYXZvcml0b3NOYXZTdXBlcmlvci5jbGFzc0xpc3QuYWRkKFwiaXRlbS1GYXZvcml0b3Mtc3VwZXJpb3JcIik7XHJcbiAgc3BhbkZhdm9yaXRvc05hdlN1cGVyaW9yLmlubmVySFRNTCA9XHJcbiAgICBcIjxhIGhyZWY9Jy9jb250YS9mYXZvcml0by9saXN0YXInPkZhdm9yaXRvczwvYT5cIjtcclxuICAvLyBBZGljaW9uYXIgaWNvbmUgZSB0ZXh0byBuYSBkaXYgbsOtdmVsIHVtIEZhdm9yaXRvc1xyXG4gIGl0ZW1GYXZvcml0b3NOYXZTdXBlcmlvci5hcHBlbmQoaWNvbmVGYXZvcml0b3NOYXZTdXBlcmlvcik7XHJcbiAgaXRlbUZhdm9yaXRvc05hdlN1cGVyaW9yLmFwcGVuZChzcGFuRmF2b3JpdG9zTmF2U3VwZXJpb3IpO1xyXG4gIC8vIEFkaWNpb25hciBpdGVtIEZhdm9yaXRvcyBuYSBOYXYgU3VwZXJpb3JcclxuICBuYXZTdXBlcmlvckNvbnRlaW5lci5hcHBlbmQoaXRlbUZhdm9yaXRvc05hdlN1cGVyaW9yKTtcclxuXHJcbiAgLypcclxuICAgIENyaWFyIGRpdiBNaW5oYSBDb250YVxyXG4gICAgKi9cclxuICBjb25zdCBpdGVtQ29udGFOYXZTdXBlcmlvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgaXRlbUNvbnRhTmF2U3VwZXJpb3IuY2xhc3NMaXN0LmFkZChcIml0ZW0tbmF2XCIsIFwiY29udGEtaXRlbVwiKTtcclxuICBjb25zdCBpY29uZUNvbnRhTmF2U3VwZXJpb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGljb25lQ29udGFOYXZTdXBlcmlvci5zcmMgPSB1cmxJY29uZUNvbnRhO1xyXG4gIGljb25lQ29udGFOYXZTdXBlcmlvci5jbGFzc0xpc3QuYWRkKFwiaWNvbmUtQ29udGEtbmF2XCIpO1xyXG4gIGljb25lQ29udGFOYXZTdXBlcmlvci5hbHQgPSBcImljb25lLUNvbnRhXCI7XHJcbiAgY29uc3Qgc3BhbkNvbnRhTmF2U3VwZXJpb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICBzcGFuQ29udGFOYXZTdXBlcmlvci5jbGFzc0xpc3QuYWRkKFwiaXRlbS1Db250YS1zdXBlcmlvclwiKTtcclxuICBzcGFuQ29udGFOYXZTdXBlcmlvci5pbm5lckhUTUwgPSBcIjxhIGhyZWY9Jy9jb250YS9pbmRleCc+Q29udGE8L2E+XCI7XHJcbiAgaXRlbUNvbnRhTmF2U3VwZXJpb3Iub25tb3VzZW92ZXIgPSBob3Zlck1lbnVTdXBlcmlvckNvbnRhO1xyXG4gIGl0ZW1Db250YU5hdlN1cGVyaW9yLm9ubW91c2VsZWF2ZSA9IGhvdmVyT3V0TWVudVN1cGVyaW9yQ29udGE7XHJcbiAgLy8gKDEpIE1pbmhhIGNvbnRhXHJcbiAgY29uc3QgbWluaGFDb250YUNvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgbWluaGFDb250YUNvbnRlaW5lci5jbGFzc0xpc3QuYWRkKFwiYm94LW1pbmhhLWNvbnRhXCIsIFwiZGlzcGxheU5vbmVcIik7XHJcbiAgLy8gMiBkaXZCZW1WaW5kb1xyXG4gIGNvbnN0IGRpdkJlbVZpbmRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZCZW1WaW5kby5jbGFzc0xpc3QuYWRkKFwiZGl2LWJlbS12aW5kb1wiKTtcclxuICBkaXZCZW1WaW5kby5pbm5lckhUTUwgPSBkaXZCZW1WaW5kb0hUTUw7XHJcbiAgLy8gMiBkaXZNaW5oYXNJbmZvc1xyXG4gIGNvbnN0IGRpdk1pbmhhc0luZm9zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZNaW5oYXNJbmZvcy5jbGFzc0xpc3QuYWRkKFwiZGl2LW1pbmhhcy1pbmZvc1wiKTtcclxuICBkaXZNaW5oYXNJbmZvcy5pbm5lckhUTUwgPSBkaXZNaW5oYXNJbmZvc0hUTUw7XHJcbiAgLy8gMi0+MVxyXG4gIG1pbmhhQ29udGFDb250ZWluZXIuYXBwZW5kKGRpdkJlbVZpbmRvKTtcclxuICBtaW5oYUNvbnRhQ29udGVpbmVyLmFwcGVuZChkaXZNaW5oYXNJbmZvcyk7XHJcbiAgc3BhbkNvbnRhTmF2U3VwZXJpb3IuYXBwZW5kKG1pbmhhQ29udGFDb250ZWluZXIpO1xyXG4gIC8vIEFkaWNpb25hciBpY29uZSBlIHRleHRvIG5hIGRpdiBuw612ZWwgdW0gQ29udGFcclxuICBpdGVtQ29udGFOYXZTdXBlcmlvci5hcHBlbmQoaWNvbmVDb250YU5hdlN1cGVyaW9yKTtcclxuICBpdGVtQ29udGFOYXZTdXBlcmlvci5hcHBlbmQoc3BhbkNvbnRhTmF2U3VwZXJpb3IpO1xyXG4gIC8vIEFkaWNpb25hciBpdGVtIENvbnRhIG5hIE5hdiBTdXBlcmlvclxyXG4gIG5hdlN1cGVyaW9yQ29udGVpbmVyLmFwcGVuZChpdGVtQ29udGFOYXZTdXBlcmlvcik7XHJcblxyXG4gIC8qXHJcbiAgICBDYXJyaW5ob1xyXG4gICAgKi9cclxuXHJcbiAgY29uc3QgbmV3Y2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FycmluaG9cIik7XHJcbiAgbmV3Y2FydC5zcmMgPSB1cmxJY29uZUNhcnJpbmhvO1xyXG4gIG5hdlN1cGVyaW9yQ29udGVpbmVyLmFwcGVuZChuZXdjYXJ0KTtcclxuXHJcbiAgcmV0dXJuIG5hdlN1cGVyaW9yQ29udGVpbmVyO1xyXG59O1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICBcInN0cmljdFwiO1xyXG4gIHRyeSB7XHJcbiAgICBpZiAocGFnaW5hQ2hlY2tvdXQoKSkgcmV0dXJuO1xyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIENBQkXDh0FMSE9cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIE5BViBTVVBFUklPUlxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gTGltcGFyIG5hdiBzdXBlcmlvclxyXG4gICAgLy8gU2VsZWNpb25hciBhIGRpdiBjb250ZXVkby10b3BvXHJcbiAgICBjb25zdCBjb250ZXVkb1RvcG8gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY29udGV1ZG8tdG9wb1wiKVswXTtcclxuICAgIC8vIExpbXBhciBCb290c3RyYXAgYW50aWdvXHJcbiAgICBjb250ZXVkb1RvcG8uY2xhc3NMaXN0LnJlbW92ZShcInNwYW45XCIpO1xyXG4gICAgLy8gQWRpY2lvbmFyIGJhcnJhIGRlIGJ1c2NhXHJcbiAgICBjb250ZXVkb1RvcG8uYXBwZW5kKFxyXG4gICAgICBjcmlhckJhcnJhQnVzY2FOYXZTdXBlcmlvcihcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEluc2VyaXIgZGFkb3MgYXF1aVxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgdGV4dG9TZWFyY2hCYXIsXHJcbiAgICAgICAgaWNvbmVCdXNjYXJcclxuICAgICAgKVxyXG4gICAgKTtcclxuICAgIGNvbnRldWRvVG9wby5hcHBlbmQoXHJcbiAgICAgIGNyaWFyTmF2U3VwZXJpb3IoXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbnNlcmlyIGRhZG9zIGFxdWlcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIGljb25lQXRlbmRpbWVudG8sXHJcbiAgICAgICAgaWNvbmVGYXZvcml0b3MsXHJcbiAgICAgICAgaWNvbmVNaW5oYUNvbnRhLFxyXG4gICAgICAgIGljb25lQ2FycmluaG8sXHJcbiAgICAgICAgLy8gQXRlbmRpbWVudG9zXHJcbiAgICAgICAgYDxwIGNsYXNzPVwic21hbGwtbWVudS1zdXBlcmlvclwiPkF0ZW5kaW1lbnRvcyBlIHRlbGV2ZW5kYXM8L3A+XHJcbiAgICAgICAgICAgIDxzdHJvbmcgY2xhc3M9XCJzdHJvbmctbWVudS1zdXBlcmlvclwiPigxMSkgOTE3ODktOTUxNTwvc3Ryb25nPjxicj5cclxuICAgICAgICAgICAgPHAgY2xhc3M9XCJzbWFsbC1tZW51LXN1cGVyaW9yXCI+TGlnYcOnw7VlcyBwYXJhIGZpeG9zIGUgY2VsdWxhcmVzPC9wPmAsXHJcbiAgICAgICAgLy8gRmFsZSBjb25zY29cclxuICAgICAgICBgPHAgY2xhc3M9XCJzbWFsbC1tZW51LXN1cGVyaW9yXCI+RmFsZSBjb25vc2NvIGF0cmF2w6lzIGRvIGUtbWFpbDwvcD5cclxuICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cInN0cm9uZy1tZW51LXN1cGVyaW9yXCI+ZGFscGFja0BkYWxwYWNrLmNvbS5icjwvc3Ryb25nPmAsXHJcbiAgICAgICAgLy8gSG9yw6FyaW9zXHJcbiAgICAgICAgYDxwIGNsYXNzPVwic21hbGwtbWVudS1zdXBlcmlvclwiPkhvcsOhcmlvcyBkZSBhdGVuZGltZW50bzwvcD5cclxuICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cInN0cm9uZy1tZW51LXN1cGVyaW9yXCI+U2VnIGEgU2V4IDdoIMOgcyAxN2g8YnI+IFPDoWJhZG9zIDdoIGFzIDE2aFxyXG4gICAgICAgICAgICA8L3N0cm9uZz5gLFxyXG4gICAgICAgIC8vIEVudmlvc1xyXG4gICAgICAgIGA8cCBjbGFzcz1cInNtYWxsLW1lbnUtc3VwZXJpb3JcIj5FbnZpbzwvcD5cclxuICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cInN0cm9uZy1tZW51LXN1cGVyaW9yXCI+UGFyYSB0b2RvIEJyYXNpbDwvc3Ryb25nPmAsXHJcbiAgICAgICAgYDxpbWcgYWx0PVwiYXZhdGFyXCIgc3JjPVwiJHtpbWFnZW1BdmF0YXJ9XCI+PC9pbWcgPlxyXG4gICAgICAgICAgICA8aDMgY2xhc3M9XCJiZW0tdmluZG9cIj5PbMOhLDxicj5iZW0tdmluZG8oYSkhPC9oMz5cclxuICAgICAgICAgICAgPGEgaHJlZj1cIi9jb250YS9pbmRleFwiIGNsYXNzPVwiYnRuLW1pbmhhLWNvbnRhXCI+TWluaGEgY29udGE8L2E+YCxcclxuICAgICAgICBgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxzdHJvbmcgY2xhc3M9XCJzdHJvbmctbWluaGEtY29udGEgY2FkYXN0cm9oZWFkZXJcIj48YSBocmVmPScvY29udGEvaW5kZXgnPkNhZGFzdHJhcjwvYT48L3N0cm9uZz48YnI+PGJyPlxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cInN0cm9uZy1taW5oYS1jb250YSBwZWRpZG9zaGVhZGVyXCI+PGEgaHJlZj0nL2NvbnRhL2luZGV4Jz5NZXVzIFBlZGlkb3M8L2E+PC9zdHJvbmc+PGJyPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxzdHJvbmcgY2xhc3M9XCJzdHJvbmctbWluaGEtY29udGEgcmFzdHJlaW9oZWFkZXJcIj5SYXN0cmVhciBwZWRpZG88L3N0cm9uZz48YnI+XHJcbiAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb24gPSBcIiNcIiBjbGFzcz1cInRyYWNrLWZvcm1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImNvZGVcIiBwbGFjZWhvbGRlcj1cIkPDs2RpZ29cIj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJhc3RyZWlvYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgPC9kaXY+YFxyXG4gICAgICApXHJcbiAgICApO1xyXG5cclxuICAgIC8vICQoXCIucmFzdHJlaW9idXR0b25cIikuY2xpY2soXHJcbiAgICAvLyAgIGZ1bmN0aW9uKCl7XHJcbiAgICAvLyAgICAgdmFyIG51bWVyb3Jhc3RyZWlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2RlXCIpLnZhbHVlO1xyXG4gICAgLy8gICAgIC8vIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9jbndlYjQud2Vic2l0ZXNlZ3Vyby5jb20vbG9nb2NuLWludGVncmFkYS9jb3JyZWlvcy5waHA/b2JqPVwiICsgbnVtZXJvcmFzdHJlaW8pO1xyXG4gICAgLy8gICAgIHZhciBsaW5rID0gJ2h0dHBzOi8vY253ZWI0LndlYnNpdGVzZWd1cm8uY29tL2xvZ29jbi1pbnRlZ3JhZGEvY29ycmVpb3MucGhwP29iaj0nO1xyXG5cclxuICAgIC8vICAgICBjb25zdCBuZXdmcmFtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcXVpLWxpbmtcIilcclxuICAgIC8vICAgICBuZXdmcmFtLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsaW5rICsgbnVtZXJvcmFzdHJlaW8pO1xyXG5cclxuICAgIC8vICAgICAkKFwiLnNpZ25hdHVyZVwiKS5yZW1vdmU7XHJcbiAgICAvLyAgICAgZGl2aWZyYW1lLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vIClcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coYEVycm8gZW5jb250cmFkbyBubyBuYXYgc3VwZXJpb3IgLT4gJHtlcnJvcn1gKTtcclxuICB9XHJcbn0pO1xyXG5cbi8vIGNvbnN0IGF1eFZhciA9ICcnO1xyXG5cclxuLy8gY29uc3QgbWVnYU1lbnVIb3Zlck91dCA9ICh7IHRhcmdldCB9KSA9PiB7XHJcbi8vICAgICBjb25zdCBtZWdhTWVudUNvbnRlaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVnYS1tZW51XCIpO1xyXG4vLyAgICAgbWVnYU1lbnVDb250ZWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXlCbG9ja1wiKTtcclxuXHJcbi8vICAgICBjb25zdCBtZWdhTWVudVVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51bC11bVwiKTtcclxuLy8gICAgIGNvbnN0IG1lZ2FNZW51RG9pcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudWwtZG9pc1wiKTtcclxuLy8gICAgIGNvbnN0IG1lZ2FNZW51VHJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudWwtdHJlc1wiKTtcclxuXHJcbi8vICAgICBtZWdhTWVudVVtLmlubmVySFRNTCA9ICcnO1xyXG4vLyAgICAgbWVnYU1lbnVEb2lzLmlubmVySFRNTCA9ICcnO1xyXG4vLyAgICAgbWVnYU1lbnVUcmVzLmlubmVySFRNTCA9ICcnO1xyXG4vLyB9XHJcblxyXG4vLyBjb25zdCBtZWdhTWVudUhvdmVyID0gKHsgdGFyZ2V0IH0pID0+IHtcclxuLy8gICAgIGNvbnN0IG1lZ2FNZW51VW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVsLXVtXCIpO1xyXG4vLyAgICAgY29uc3QgbWVnYU1lbnVEb2lzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51bC1kb2lzXCIpO1xyXG4vLyAgICAgY29uc3QgbWVnYU1lbnVUcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51bC10cmVzXCIpO1xyXG5cclxuLy8gICAgIGxldCBlbCA9ICcnO1xyXG4vLyAgICAgaWYgKHRhcmdldC50YWdOYW1lID09PSBcIkxJXCIpIHtcclxuLy8gICAgICAgICBlbCA9IHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5pdmVsLWRvaXMgPiBsaVwiKTtcclxuLy8gICAgIH0gZWxzZSBpZiAodGFyZ2V0LnRhZ05hbWUgPT09IFwiU1RST05HXCIpIHtcclxuLy8gICAgICAgICBlbCA9IHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChcIi5uaXZlbC1kb2lzID4gbGlcIik7XHJcbi8vICAgICB9IGVsc2UgaWYgKHRhcmdldC50YWdOYW1lID09PSBcIkFcIikge1xyXG4vLyAgICAgICAgIGVsID0gdGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChcIi5uaXZlbC1kb2lzID4gbGlcIik7XHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoIWVsKSByZXR1cm47XHJcblxyXG4vLyAgICAgaWYgKCFtZWdhTWVudVVtLmNoaWxkRWxlbWVudENvdW50KSB7XHJcbi8vICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMzsgaSsrKSB7XHJcbi8vICAgICAgICAgICAgIGlmIChlbFtpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbi8vICAgICAgICAgICAgICAgICBtZWdhTWVudVVtLmFwcGVuZChlbFtpXS5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4vLyAgICAgICAgICAgICAgICAgbWVnYU1lbnVEb2lzLnN0eWxlLmxlZnQgPSBgJHtlbFswXS5vZmZzZXRMZWZ0fXB4YDtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoIW1lZ2FNZW51RG9pcy5jaGlsZEVsZW1lbnRDb3VudCkge1xyXG4vLyAgICAgICAgIGZvciAobGV0IGkgPSAxMzsgaSA8IDI2OyBpKyspIHtcclxuLy8gICAgICAgICAgICAgaWYgKGVsW2ldICE9PSB1bmRlZmluZWQpIHtcclxuLy8gICAgICAgICAgICAgICAgIG1lZ2FNZW51RG9pcy5hcHBlbmQoZWxbaV0uY2xvbmVOb2RlKHRydWUpKTtcclxuLy8gICAgICAgICAgICAgICAgIG1lZ2FNZW51RG9pcy5zdHlsZS5sZWZ0ID0gYCR7ZWxbMF0ub2Zmc2V0TGVmdCArICgyMDAgKiAxKX1weGA7XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcbi8vICAgICBpZiAoIW1lZ2FNZW51VHJlcy5jaGlsZEVsZW1lbnRDb3VudCkge1xyXG4vLyAgICAgICAgIGZvciAobGV0IGkgPSAyNjsgaSA8IChlbC5sZW5ndGggJSAxMykgKyAyNjsgaSsrKSB7XHJcbi8vICAgICAgICAgICAgIGlmIChlbFtpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlbFtpXSk7XHJcbi8vICAgICAgICAgICAgICAgICBtZWdhTWVudVRyZXMuYXBwZW5kKGVsW2ldLmNsb25lTm9kZSh0cnVlKSk7XHJcbi8vICAgICAgICAgICAgICAgICBtZWdhTWVudVRyZXMuc3R5bGUubGVmdCA9IGAke2VsWzBdLm9mZnNldExlZnQgKyAoMjAwICogMil9cHhgO1xyXG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZWxbMF0ub2Zmc2V0TGVmdCk7XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgY29uc3QgbWVnYU1lbnVDb250ZWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21lZ2EtbWVudVwiKTtcclxuLy8gICAgIG1lZ2FNZW51Q29udGVpbmVyLmNsYXNzTGlzdC5hZGQoXCJkaXNwbGF5QmxvY2tcIik7XHJcbi8vIH1cclxuXHJcbi8vIGNvbnN0IGNyaWFyTWVnYU1lbnVDb250ZWluZXJzID0gKCkgPT4ge1xyXG4vLyAgICAgY29uc3QgY29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuLy8gICAgIGNvbnRlaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbi8vICAgICBjb250ZWluZXIuaWQgPSBcIm1lZ2EtbWVudVwiO1xyXG5cclxuLy8gICAgIGNvbnN0IHVsVW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XHJcbi8vICAgICB1bFVtLmNsYXNzTGlzdC5hZGQoXCJ1bC11bVwiLCAndWwtbWVnYS1tZW51Jyk7XHJcbi8vICAgICB1bFVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuLy8gICAgIHVsVW0uc3R5bGUudG9wID0gJzUwcHgnO1xyXG4vLyAgICAgY29udGVpbmVyLmFwcGVuZCh1bFVtKTtcclxuXHJcbi8vICAgICBjb25zdCB1bERvaXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XHJcbi8vICAgICB1bERvaXMuY2xhc3NMaXN0LmFkZChcInVsLWRvaXNcIiwgJ3VsLW1lZ2EtbWVudScpO1xyXG4vLyAgICAgdWxEb2lzLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuLy8gICAgIHVsRG9pcy5zdHlsZS50b3AgPSAnNTBweCc7XHJcbi8vICAgICBjb250ZWluZXIuYXBwZW5kKHVsRG9pcyk7XHJcblxyXG4vLyAgICAgY29uc3QgdWxUcmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xyXG4vLyAgICAgdWxUcmVzLmNsYXNzTGlzdC5hZGQoXCJ1bC10cmVzXCIsICd1bC1tZWdhLW1lbnUnKTtcclxuLy8gICAgIHVsVHJlcy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbi8vICAgICB1bFRyZXMuc3R5bGUudG9wID0gJzUwcHgnO1xyXG4vLyAgICAgY29udGVpbmVyLmFwcGVuZCh1bFRyZXMpO1xyXG5cclxuLy8gICAgIHJldHVybiBjb250ZWluZXI7XHJcblxyXG4vLyB9XHJcblxyXG4vLyBUSVJBIEEgQ0xBU1NFIENPTlRFSU5FUiBETyBDQUJFQ0FMSE9cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICBcInN0cmljdFwiO1xyXG4gIHRyeSB7XHJcbiAgICBpZiAocGFnaW5hQ2hlY2tvdXQoKSkgcmV0dXJuO1xyXG4gICAgLy8gUmVtb3ZlciBjbGFzc2UgY29udGVpbmVyIGRvIGNhYmVjYWxob1xyXG4gICAgbGV0IGNhYmVjYWxob0NvbnRlaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgIFwiI2NhYmVjYWxobyAuY29udGVpbmVyXCJcclxuICAgIClbMF07XHJcbiAgICBjYWJlY2FsaG9Db250ZWluZXIuY2xhc3NMaXN0LmFkZChcImNhYmVjYWxoby1jb250ZWluZXJcIik7XHJcblxyXG4gICAgY29uc3QgY2FiZWNhbGhvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYWJlY2FsaG9cIik7XHJcbiAgICBjb25zdCBtZW51U3VwZXJpb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUuc3VwZXJpb3JcIik7XHJcbiAgICBjYWJlY2FsaG8uYXBwZW5kKG1lbnVTdXBlcmlvcik7XHJcblxyXG4gICAgY29uc3QgdWxOaXZlbERvaXNGZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcImxpLmNhdGVnb3JpYS1pZC0xNzQ2NzY5NSAubml2ZWwtZG9pc1wiXHJcbiAgICApO1xyXG4gICAgLy8gY29uc3QgaW1hZ2UxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIC8vIGltYWdlMS5zcmMgPSBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjg5LzIyODkwNDEvYXJxdWl2b3MvVGVuaXMgZHJvcCAwMS5wbmdcIjtcclxuICAgIC8vIHVsTml2ZWxEb2lzRmVtLmFwcGVuZChpbWFnZTEpO1xyXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gICAgbGluay5pbm5lckhUTUwgPSBcIlZlciB0b2Rvc1wiO1xyXG4gICAgbGluay5ocmVmID0gXCIvcGVyZnVtZXNcIjtcclxuICAgIGxpbmsuaWQgPSBcImxpbmstdmVyLXRvZG9zXCI7XHJcbiAgICB1bE5pdmVsRG9pc0ZlbS5hcHBlbmQobGluayk7XHJcblxyXG4gICAgY29uc3QgdWxOaXZlbERvaXNNYXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCJsaS5jYXRlZ29yaWEtaWQtMTc0Njc2OTggLm5pdmVsLWRvaXNcIlxyXG4gICAgKTtcclxuICAgIC8vIGNvbnN0IGltYWdlMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAvLyBpbWFnZTIuc3JjID0gXCJodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI4OS8yMjg5MDQxL2FycXVpdm9zL3Nhcm5hLnBuZ1wiO1xyXG4gICAgLy8gdWxOaXZlbERvaXNNYXNjLmFwcGVuZChpbWFnZTIpO1xyXG4gICAgY29uc3QgbGluazIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgIGxpbmsyLmlubmVySFRNTCA9IFwiVmVyIHRvZG9zXCI7XHJcbiAgICBsaW5rMi5ocmVmID0gXCIvY2FiZWxvc1wiO1xyXG4gICAgbGluazIuaWQgPSBcImxpbmstdmVyLXRvZG9zXCI7XHJcbiAgICB1bE5pdmVsRG9pc01hc2MuYXBwZW5kKGxpbmsyKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5sb2coYEVycm8gZW5jb250cmFkbyAtPiAke2Vycm9yfWApO1xyXG4gIH1cclxufSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gIFwic3RyaWN0XCI7XHJcbiAgdHJ5IHtcclxuICAgIGlmICh3aW5kb3cuc2NyZWVuLndpZHRoIDw9IDEzNjYpIHtcclxuICAgICAgY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWVudS5zdXBlcmlvciA+IHVsID4gbGlcIik7XHJcblxyXG4gICAgICBjb25zdCBtZXRhZGVNZW51TGkgPSBNYXRoLmNlaWwobWVudS5sZW5ndGggLyAyKTtcclxuXHJcbiAgICAgIGNvbnN0IG1lbnVOaXZlbFVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xyXG4gICAgICBtZW51Tml2ZWxVbS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm5pdmVsLXVtXCIpO1xyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXRhZGVNZW51TGk7IGkrKykge1xyXG4gICAgICAgIG1lbnVOaXZlbFVtLmFwcGVuZENoaWxkKG1lbnVbaV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUuc3VwZXJpb3IgPiB1bFwiKS5iZWZvcmUobWVudU5pdmVsVW0pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgRXJybyBlbmNvbnRyYWRvIC0+ICR7ZXJyb3J9YCk7XHJcbiAgfVxyXG59KTtcclxuXG5jb25zdCBmZWNoYXJNZW51RG9pcyA9ICgpID0+IHtcclxuICBjb25zdCBtZW51T3ZlcmxheURvaXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXktbWVudS1kb2lzXCIpO1xyXG4gIG1lbnVPdmVybGF5RG9pcy5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheUJsb2NrXCIpO1xyXG59O1xyXG5jb25zdCBmZWNoYXJNZW51VHJlcyA9ICgpID0+IHtcclxuICBjb25zdCBtZW51T3ZlcmxheVRyZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXktbWVudS10cmVzXCIpO1xyXG4gIG1lbnVPdmVybGF5VHJlcy5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheUJsb2NrXCIpO1xyXG59O1xyXG5cclxuLy8gY29uc3QgY3JpYXJCb3Rhb1ZvbHRhciA9ICgpID0+IHtcclxuLy8gICBjb25zdCBsaVZvbHRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuLy8gICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbi8vICAgYS5pbm5lckhUTUwgPSBcIiZsYXJyOyBWb2x0YXJcIjtcclxuLy8gICBsaVZvbHRhci5hcHBlbmQoYSk7XHJcbi8vICAgbGlWb2x0YXIub25jbGljayA9IGZlY2hhck1lbnVUcmVzO1xyXG4vLyAgIHJldHVybiBsaVZvbHRhcjtcclxuLy8gfVxyXG5cclxuY29uc3QgY3JpYXJNaWRpYXNNb2JpbGUgPSAodXJsRmFjZWJvb2ssIHVybFlvdXR1YmUsIHVybEluc3RhZ3JhbSkgPT4ge1xyXG4gIGNvbnN0IGRpdk1pZGlhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2TWlkaWFzLmNsYXNzTGlzdC5hZGQoXCJtaWRpYXMtbW9iaWxlXCIpO1xyXG4gIC8vIDYgbGlua01pZGlhc1xyXG4gIGNvbnN0IG1pZGlhRmFjZWJvb2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBtaWRpYUZhY2Vib29rLmhyZWYgPSB1cmxGYWNlYm9vaztcclxuICBtaWRpYUZhY2Vib29rLmNsYXNzTGlzdC5hZGQoXCJtaWRpYXMtaXRlbS1tb2JpbGVcIik7XHJcbiAgLy8gNyBpY29uZSBmYWNlYm9va1xyXG4gIGNvbnN0IGljb25lRmFjZWJvb2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcclxuICBpY29uZUZhY2Vib29rLmNsYXNzTGlzdC5hZGQoXCJpY29uLWZhY2Vib29rXCIpO1xyXG4gIC8vIDcgY3JpYXIgc3BhbiBGYWNlYm9va1xyXG4gIGNvbnN0IHNwYW5GYWNlYm9vayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gIHNwYW5GYWNlYm9vay50ZXh0Q29udGVudCA9IFwiRmFjZWJvb2tcIjtcclxuICAvLyBBcHBlbmRzIDctPjZcclxuICBtaWRpYUZhY2Vib29rLmFwcGVuZChpY29uZUZhY2Vib29rKTtcclxuICBtaWRpYUZhY2Vib29rLmFwcGVuZChzcGFuRmFjZWJvb2spO1xyXG4gIC8vIDYgbGlua01pZGlhc1xyXG4gIGNvbnN0IG1pZGlhWW91dHViZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIG1pZGlhWW91dHViZS5ocmVmID0gdXJsWW91dHViZTtcclxuICBtaWRpYVlvdXR1YmUuY2xhc3NMaXN0LmFkZChcIm1pZGlhcy1pdGVtLW1vYmlsZVwiKTtcclxuICAvLyA3IGljb25lIGZhY2Vib29rXHJcbiAgY29uc3QgaWNvbmVZb3V0dWJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XHJcbiAgaWNvbmVZb3V0dWJlLmNsYXNzTGlzdC5hZGQoXCJpY29uLXlvdXR1YmUtcGxheVwiKTtcclxuICAvLyA3IGNyaWFyIHNwYW4gWW91dHViZVxyXG4gIGNvbnN0IHNwYW5Zb3V0dWJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgc3BhbllvdXR1YmUudGV4dENvbnRlbnQgPSBcIllvdXR1YmVcIjtcclxuICAvLyBBcHBlbmRzIDctPjZcclxuICBtaWRpYVlvdXR1YmUuYXBwZW5kKGljb25lWW91dHViZSk7XHJcbiAgbWlkaWFZb3V0dWJlLmFwcGVuZChzcGFuWW91dHViZSk7XHJcbiAgLy8gNiBsaW5rTWlkaWFzXHJcbiAgY29uc3QgbWlkaWFJbnN0YWdyYW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBtaWRpYUluc3RhZ3JhbS5ocmVmID0gdXJsSW5zdGFncmFtO1xyXG4gIG1pZGlhSW5zdGFncmFtLmNsYXNzTGlzdC5hZGQoXCJtaWRpYXMtaXRlbS1tb2JpbGVcIik7XHJcbiAgLy8gNyBpY29uZSBmYWNlYm9va1xyXG4gIGNvbnN0IGljb25lSW5zdGFncmFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XHJcbiAgaWNvbmVJbnN0YWdyYW0uY2xhc3NMaXN0LmFkZChcImljb24taW5zdGFncmFtXCIpO1xyXG4gIC8vIDcgY3JpYXIgc3BhbiBJbnN0YWdyYW1cclxuICBjb25zdCBzcGFuSW5zdGFncmFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgc3Bhbkluc3RhZ3JhbS50ZXh0Q29udGVudCA9IFwiSW5zdGFncmFtXCI7XHJcbiAgLy8gQXBwZW5kcyA3LT42XHJcbiAgbWlkaWFJbnN0YWdyYW0uYXBwZW5kKGljb25lSW5zdGFncmFtKTtcclxuICBtaWRpYUluc3RhZ3JhbS5hcHBlbmQoc3Bhbkluc3RhZ3JhbSk7XHJcbiAgLy8gQXBwZW5kcyA2LT41XHJcbiAgZGl2TWlkaWFzLmFwcGVuZChtaWRpYUZhY2Vib29rKTtcclxuICBkaXZNaWRpYXMuYXBwZW5kKG1pZGlhWW91dHViZSk7XHJcbiAgZGl2TWlkaWFzLmFwcGVuZChtaWRpYUluc3RhZ3JhbSk7XHJcblxyXG4gIHJldHVybiBkaXZNaWRpYXM7XHJcbn07XHJcblxyXG5jb25zdCBjcmlhck92ZXJsYXlNZW51ID0gKCkgPT4ge1xyXG4gIC8vIDEgY29udGVpbmVyXHJcbiAgY29uc3QgY29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBjb250ZWluZXIuaWQgPSBcIm92ZXJsYXktbWVudVwiO1xyXG4gIC8vIDIgYmcgbWVudVxyXG4gIGNvbnN0IGJnTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgYmdNZW51LmNsYXNzTGlzdC5hZGQoXCJiZy1tZW51XCIpO1xyXG4gIGJnTWVudS5vbmNsaWNrID0gYWJyaXJNZW51TW9iaWxlO1xyXG4gIC8vIDIgdWwgbml2ZWwgdW1cclxuICBjb25zdCB1bE5pdmVsVW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XHJcbiAgdWxOaXZlbFVtLmNsYXNzTGlzdC5hZGQoXCJuaXZlbC11bVwiKTtcclxuICAvLyAzIGxpIG1pbmhhIGNvbnRhXHJcbiAgY29uc3QgbGlNaW5oYUNvbnRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gIGxpTWluaGFDb250YS5jbGFzc0xpc3QuYWRkKFwibWluaGEtY29udGFcIik7XHJcbiAgLy8gNCBsaW5rIGxpbmhhIGNvbnRhXHJcbiAgY29uc3QgbGlua01pbmhhQ29udGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBsaW5rTWluaGFDb250YS5ocmVmID0gXCIvY29udGEvaW5kZXhcIjtcclxuICBsaW5rTWluaGFDb250YS50ZXh0Q29udGVudCA9IFwiTWluaGEgY29udGFcIjtcclxuICAvLyA0LT4zXHJcbiAgbGlNaW5oYUNvbnRhLmFwcGVuZChsaW5rTWluaGFDb250YSk7XHJcbiAgLy8gMy0+MlxyXG4gIHVsTml2ZWxVbS5hcHBlbmQobGlNaW5oYUNvbnRhKTtcclxuICAvLyAyIC0+IDFcclxuICBjb250ZWluZXIuYXBwZW5kKGJnTWVudSk7XHJcbiAgY29udGVpbmVyLmFwcGVuZCh1bE5pdmVsVW0pO1xyXG5cclxuICByZXR1cm4gY29udGVpbmVyO1xyXG59O1xyXG5cclxuY29uc3QgY3JpYXJPdmVybGF5TWVudURvaXMgPSAoKSA9PiB7XHJcbiAgLy8gMSBjb250ZWluZXJcclxuICBjb25zdCBjb250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGNvbnRlaW5lci5pZCA9IFwib3ZlcmxheS1tZW51LWRvaXNcIjtcclxuICAvLyAyIGJnIG1lbnVcclxuICBjb25zdCBiZ01lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGJnTWVudS5jbGFzc0xpc3QuYWRkKFwiYmctbWVudS1kb2lzXCIpO1xyXG4gIGJnTWVudS5vbmNsaWNrID0gZmVjaGFyTWVudURvaXM7XHJcbiAgLy8gMiB1bCBuaXZlbCB1bVxyXG4gIGNvbnN0IHVsTml2ZWxEb2lzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xyXG4gIHVsTml2ZWxEb2lzLmNsYXNzTGlzdC5hZGQoXCJuaXZlbC1kb2lzXCIpO1xyXG4gIC8vIDMgbGkgbWluaGEgY29udGFcclxuICBjb25zdCBsaVZvbHRhckRvaXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgbGlWb2x0YXJEb2lzLmNsYXNzTGlzdC5hZGQoXCJ2b2x0YXJcIik7XHJcbiAgLy8gNCBwIGxpbmhhIGNvbnRhXHJcbiAgY29uc3QgbGlua1ZvbHRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIGxpbmtWb2x0YXIuaW5uZXJIVE1MID0gXCImbGFycjsgVm9sdGFyXCI7XHJcbiAgbGlua1ZvbHRhci5pZCA9IFwiYm90YW9Wb2x0YXJcIjtcclxuICAvLyA0LT4zXHJcbiAgbGlWb2x0YXJEb2lzLmFwcGVuZChsaW5rVm9sdGFyKTtcclxuICAvLyAzLT4yXHJcbiAgdWxOaXZlbERvaXMuYXBwZW5kKGxpVm9sdGFyRG9pcyk7XHJcbiAgLy8gMiAtPiAxXHJcbiAgY29udGVpbmVyLmFwcGVuZChiZ01lbnUpO1xyXG4gIGNvbnRlaW5lci5hcHBlbmQodWxOaXZlbERvaXMpO1xyXG5cclxuICByZXR1cm4gY29udGVpbmVyO1xyXG59O1xyXG5cclxuY29uc3QgY3JpYXJPdmVybGF5TWVudVRyZXMgPSAoKSA9PiB7XHJcbiAgLy8gMSBjb250ZWluZXJcclxuICBjb25zdCBjb250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGNvbnRlaW5lci5pZCA9IFwib3ZlcmxheS1tZW51LXRyZXNcIjtcclxuICAvLyAyIGJnIG1lbnVcclxuICBjb25zdCBiZ01lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGJnTWVudS5jbGFzc0xpc3QuYWRkKFwiYmctbWVudS10cmVzXCIpO1xyXG4gIGJnTWVudS5vbmNsaWNrID0gZmVjaGFyTWVudVRyZXM7XHJcbiAgLy8gMiB1bCBuaXZlbCB1bVxyXG4gIGNvbnN0IHVsTml2ZWxUcmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xyXG4gIHVsTml2ZWxUcmVzLmNsYXNzTGlzdC5hZGQoXCJuaXZlbC10cmVzXCIpO1xyXG4gIC8vIC8vIDMgbGkgbWluaGEgY29udGFcclxuICBjb25zdCBsaVZvbHRhclRyZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgbGlWb2x0YXJUcmVzLmNsYXNzTGlzdC5hZGQoXCJ2b2x0YXJcIik7XHJcbiAgLy8gLy8gNCBwIGxpbmhhIGNvbnRhXHJcbiAgY29uc3QgbGlua1ZvbHRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIGxpbmtWb2x0YXIuaW5uZXJIVE1MID0gXCImbGFycjsgVm9sdGFyXCI7XHJcbiAgLy8gLy8gNC0+M1xyXG4gIGxpVm9sdGFyVHJlcy5hcHBlbmQobGlua1ZvbHRhcik7XHJcbiAgLy8gLy8gMy0+MlxyXG4gIHVsTml2ZWxUcmVzLmFwcGVuZChsaVZvbHRhclRyZXMpO1xyXG4gIC8vIDIgLT4gMVxyXG4gIGNvbnRlaW5lci5hcHBlbmQoYmdNZW51KTtcclxuICBjb250ZWluZXIuYXBwZW5kKHVsTml2ZWxUcmVzKTtcclxuICByZXR1cm4gY29udGVpbmVyO1xyXG59O1xyXG5cclxuY29uc3QgYWJyaXJNZW51TW9iaWxlID0gKCkgPT4ge1xyXG4gIGNvbnN0IG1lbnVPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LW1lbnVcIik7XHJcbiAgbWVudU92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZShcImRpc3BsYXlCbG9ja1wiKTtcclxuXHJcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xyXG4gIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcInBvc2l0aW9uRml4ZWRcIik7XHJcblxyXG4gIGNvbnN0IG1lbnVPdmVybGF5RG9pcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheS1tZW51LWRvaXNcIik7XHJcbiAgaWYgKG1lbnVPdmVybGF5RG9pcy5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNwbGF5QmxvY2tcIikpIHtcclxuICAgIG1lbnVPdmVybGF5RG9pcy5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheUJsb2NrXCIpO1xyXG4gIH1cclxuICBjb25zdCBtZW51T3ZlcmxheVRyZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXktbWVudS10cmVzXCIpO1xyXG4gIGlmIChtZW51T3ZlcmxheVRyZXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzcGxheUJsb2NrXCIpKSB7XHJcbiAgICBtZW51T3ZlcmxheVRyZXMuY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXlCbG9ja1wiKTtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50XHJcbiAgICAucXVlcnlTZWxlY3RvckFsbChcIiNtZW51LW1vYmlsZSAudG9wICN0b2dnbGUtbW9iaWxlIHNwYW5cIilcclxuICAgIC5mb3JFYWNoKChlKSA9PiBlLmNsYXNzTGlzdC50b2dnbGUoXCJkLW5vbmVcIikpO1xyXG59O1xyXG5cclxuY29uc3QgY2FwdHVyYXJNZW51Tml2ZWxUcmVzID0gKGV2ZW50KSA9PiB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zb2xlLmxvZyhldmVudC50YXJnZXQudGFnTmFtZSk7XHJcbiAgbGV0IG1lbnVPdmVybGF5VHJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheS1tZW51LXRyZXNcIik7XHJcbiAgY29uc3QgY2FiZWNhbGhvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYWJlY2FsaG9cIik7XHJcbiAgaWYgKG1lbnVPdmVybGF5VHJlcykge1xyXG4gICAgbWVudU92ZXJsYXlUcmVzLnJlbW92ZSgpO1xyXG4gICAgY2FiZWNhbGhvLmFwcGVuZChjcmlhck92ZXJsYXlNZW51VHJlcygpKTtcclxuICB9XHJcbiAgbWVudU92ZXJsYXlUcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LW1lbnUtdHJlc1wiKTtcclxuICBtZW51T3ZlcmxheVRyZXMuY2xhc3NMaXN0LnRvZ2dsZShcImRpc3BsYXlCbG9ja1wiKTtcclxuICBjb25zdCB1bE92ZXJsYXlUcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LW1lbnUtdHJlcyB1bFwiKTtcclxuICBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09IFwiTElcIikge1xyXG4gICAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcclxuICAgIGNvbnN0IHRvZGFzTGkgPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcihcIi5uaXZlbC10cmVzXCIpO1xyXG4gICAgdWxPdmVybGF5VHJlcy5pbm5lckhUTUwgKz0gdG9kYXNMaS5pbm5lckhUTUw7XHJcbiAgICBjb25zb2xlLmxvZyhldmVudC50YXJnZXQudGFnTmFtZSk7XHJcbiAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PT0gXCJTVFJPTkdcIikge1xyXG4gICAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0LnRhZ05hbWUpO1xyXG4gICAgY29uc3QgdG9kYXNMaSA9XHJcbiAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcihcIi5uaXZlbC10cmVzXCIpO1xyXG4gICAgdWxPdmVybGF5VHJlcy5pbm5lckhUTUwgKz0gdG9kYXNMaS5pbm5lckhUTUw7XHJcbiAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PT0gXCJBXCIpIHtcclxuICAgIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldC50YWdOYW1lKTtcclxuICAgIGNvbnN0IHRvZGFzTGkgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKFwiLm5pdmVsLXRyZXNcIik7XHJcbiAgICB1bE92ZXJsYXlUcmVzLmlubmVySFRNTCArPSB0b2Rhc0xpLmlubmVySFRNTDtcclxuICB9XHJcblxyXG4gIHVsT3ZlcmxheURvaXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI292ZXJsYXktbWVudS10cmVzIHVsID4gbGlcIik7XHJcbiAgY29uc29sZS5sb2codWxPdmVybGF5RG9pcyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bE92ZXJsYXlEb2lzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAodWxPdmVybGF5RG9pc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJ2b2x0YXJcIikpIHtcclxuICAgICAgdWxPdmVybGF5RG9pc1tpXS5vbmNsaWNrID0gZmVjaGFyTWVudVRyZXM7XHJcbiAgICB9XHJcbiAgfVxyXG59ICBcclxuXHJcbmNvbnN0IGNhcHR1cmFyTWVudU5pdmVsRG9pcyA9IChldmVudCkgPT4ge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgbGV0IG1lbnVPdmVybGF5RG9pcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheS1tZW51LWRvaXNcIik7XHJcbiAgY29uc3QgY2FiZWNhbGhvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYWJlY2FsaG9cIik7XHJcbiAgaWYgKG1lbnVPdmVybGF5RG9pcykge1xyXG4gICAgbWVudU92ZXJsYXlEb2lzLnJlbW92ZSgpO1xyXG4gICAgY2FiZWNhbGhvLmFwcGVuZChjcmlhck92ZXJsYXlNZW51RG9pcygpKTtcclxuICB9XHJcbiAgbWVudU92ZXJsYXlEb2lzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LW1lbnUtZG9pc1wiKTtcclxuICBtZW51T3ZlcmxheURvaXMuY2xhc3NMaXN0LnRvZ2dsZShcImRpc3BsYXlCbG9ja1wiKTtcclxuICBsZXQgdWxPdmVybGF5RG9pcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheS1tZW51LWRvaXMgdWxcIik7XHJcbiAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lID09PSBcIkxJXCIpIHtcclxuICAgIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldCk7XHJcbiAgICBjb25zdCB0b2Rhc0xpID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIubml2ZWwtZG9pc1wiKTtcclxuICAgIHVsT3ZlcmxheURvaXMuaW5uZXJIVE1MICs9IHRvZGFzTGkuaW5uZXJIVE1MO1xyXG4gIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09IFwiU1RST05HXCIpIHtcclxuICAgIGNvbnN0IHRvZGFzTGkgPVxyXG4gICAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXCIubml2ZWwtZG9pc1wiKTtcclxuICAgIHVsT3ZlcmxheURvaXMuaW5uZXJIVE1MICs9IHRvZGFzTGkuaW5uZXJIVE1MO1xyXG4gIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09IFwiQVwiKSB7XHJcbiAgICBjb25zdCB0b2Rhc0xpID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcihcIi5uaXZlbC1kb2lzXCIpO1xyXG4gICAgdWxPdmVybGF5RG9pcy5pbm5lckhUTUwgKz0gdG9kYXNMaS5pbm5lckhUTUw7XHJcbiAgfVxyXG4gIHVsT3ZlcmxheURvaXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI292ZXJsYXktbWVudS1kb2lzIHVsID4gbGlcIik7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bE92ZXJsYXlEb2lzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAodWxPdmVybGF5RG9pc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJ2b2x0YXJcIikpIHtcclxuICAgICAgdWxPdmVybGF5RG9pc1tpXS5vbmNsaWNrID0gZmVjaGFyTWVudURvaXM7XHJcbiAgICB9IGVsc2UgaWYgKHVsT3ZlcmxheURvaXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29tLWZpbGhvXCIpKSB7XHJcbiAgICAgIHVsT3ZlcmxheURvaXNbaV0ub25jbGljayA9IGNhcHR1cmFyTWVudU5pdmVsVHJlcztcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBjcmlhckhlYWRlck1vYmlsZSA9IChcclxuICB1cmxTYW5kdWljaGUsXHJcbiAgdXJsTG9nbyxcclxuICB1cmxDYXJyaW5obyxcclxuICB1cmxMdXBhLFxyXG4gIHRleHRvU2VhcmNoQmFyXHJcbikgPT4ge1xyXG4gIC8vIDEgY29udGVpbmVyXHJcbiAgY29uc3QgY29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBjb250ZWluZXIuaWQgPSBcImhlYWRlci1tb2JpbGVcIjtcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLyAyIGVsZW1lbnRvcyBkaXZcclxuICBjb25zdCBlbGVtZW50b3NEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGVsZW1lbnRvc0Rpdi5jbGFzc05hbWUgPSBcImVsZW1lbnRvcy1oZWFkZXItbW9iaWxlXCI7XHJcbiAgLy8gMyBpbWFnZW0gdXJsU2FuZHVpY2hlXHJcbiAgY29uc3QgaW1hZ2VtU2FuZHVpY2hlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1TYW5kdWljaGUuc3JjID0gdXJsU2FuZHVpY2hlO1xyXG4gIGltYWdlbVNhbmR1aWNoZS5hbHQgPSBcIk1lbnUgbW9iaWxlXCI7XHJcbiAgaW1hZ2VtU2FuZHVpY2hlLmNsYXNzTGlzdC5hZGQoXCJzYW5kdWljaGUtaGVhZGVyLW1vYmlsZVwiKTtcclxuICBpbWFnZW1TYW5kdWljaGUub25jbGljayA9IGFicmlyTWVudU1vYmlsZTtcclxuICAvLyAzIGltYWdlbSBsb2dvXHJcbiAgY29uc3QgbGlua0xvZ28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBsaW5rTG9nby5ocmVmID0gXCIvXCI7XHJcbiAgY29uc3QgaW1hZ2VtTG9nbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1hZ2VtTG9nby5zcmMgPSB1cmxMb2dvO1xyXG4gIGltYWdlbUxvZ28uYWx0ID0gXCJMb2dvIEZpbGlwIErDs2lhc1wiO1xyXG4gIGltYWdlbUxvZ28uY2xhc3NMaXN0LmFkZChcImxvZ28taGVhZGVyLW1vYmlsZVwiKTtcclxuICBsaW5rTG9nby5hcHBlbmQoaW1hZ2VtTG9nbyk7XHJcbiAgLy8gMyBpbWFnZW0gbG9nb1xyXG4gIGNvbnN0IGxpbmtDYXJyaW5obyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIGxpbmtDYXJyaW5oby5ocmVmID0gXCIvY2FycmluaG8vaW5kZXhcIjtcclxuICBjb25zdCBpbWFnZW1DYXJyaW5obyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgaW1hZ2VtQ2FycmluaG8uc3JjID0gdXJsQ2FycmluaG87XHJcbiAgaW1hZ2VtQ2FycmluaG8uYWx0ID0gXCJDYXJyaW5obyBNb3NhaWNvIEFjYWJhbWVudG9zXCI7XHJcbiAgaW1hZ2VtQ2FycmluaG8uY2xhc3NMaXN0LmFkZChcImNhcnJpbmhvLWhlYWRlci1tb2JpbGVcIik7XHJcbiAgbGlua0NhcnJpbmhvLmFwcGVuZChpbWFnZW1DYXJyaW5obyk7XHJcbiAgLy8gQVBQRU5EUyAzLT4yXHJcbiAgZWxlbWVudG9zRGl2LmFwcGVuZChpbWFnZW1TYW5kdWljaGUpO1xyXG4gIGVsZW1lbnRvc0Rpdi5hcHBlbmQobGlua0xvZ28pO1xyXG4gIGVsZW1lbnRvc0Rpdi5hcHBlbmQobGlua0NhcnJpbmhvKTtcclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAvLzIgU2VhcmNoRm9ybVxyXG4gIGNvbnN0IHNlYXJjaEZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcclxuICBzZWFyY2hGb3JtLmlkID0gXCJmb3JtLWJ1c2NhclwiO1xyXG4gIHNlYXJjaEZvcm0uYWN0aW9uID0gXCIvYnVzY2FyXCI7XHJcbiAgc2VhcmNoRm9ybS5tZXRob2QgPSBcIkdFVFwiO1xyXG4gIC8vIDMgY29uc3QgYm90YW9TZWFyY2hNb2JpbGVcclxuICBjb25zdCBib3Rhb1NlYXJjaE1vYmlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYm90YW9TZWFyY2hNb2JpbGUuaWQgPSBcImJvdGFvLXNlYXJjaC1tb2JpbGVcIjtcclxuICAvLyA0IGltYWdlbUJ1c2NhclxyXG4gIGNvbnN0IGljb25lQnVzY2FyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpY29uZUJ1c2Nhci5jbGFzc0xpc3QuYWRkKFwiaWNvbmUtYnVzY2FyLW1vYmlsZVwiKTtcclxuICBpY29uZUJ1c2Nhci5hbHQgPSBcImJ1c2NhclwiO1xyXG4gIGljb25lQnVzY2FyLnNyYyA9IHVybEx1cGE7XHJcbiAgLy8gNC0+M1xyXG4gIGJvdGFvU2VhcmNoTW9iaWxlLmFwcGVuZChpY29uZUJ1c2Nhcik7XHJcbiAgLy8gMyBpbnB1dFNlYXJjaEZvcm1cclxuICBjb25zdCBpbnB1dFNlYXJjaE1vYmlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICBpbnB1dFNlYXJjaE1vYmlsZS5pZCA9IFwiYXV0by1jb21wbGV0ZVwiO1xyXG4gIGlucHV0U2VhcmNoTW9iaWxlLnR5cGUgPSBcInRleHRcIjtcclxuICBpbnB1dFNlYXJjaE1vYmlsZS5uYW1lID0gXCJxXCI7XHJcbiAgaW5wdXRTZWFyY2hNb2JpbGUucGxhY2Vob2xkZXIgPSB0ZXh0b1NlYXJjaEJhcjtcclxuICBpbnB1dFNlYXJjaE1vYmlsZS5hdXRvY29tcGxldGUgPSBcIm9mZlwiO1xyXG4gIC8vIDMtPjJcclxuICBzZWFyY2hGb3JtLmFwcGVuZChib3Rhb1NlYXJjaE1vYmlsZSk7XHJcbiAgc2VhcmNoRm9ybS5hcHBlbmQoaW5wdXRTZWFyY2hNb2JpbGUpO1xyXG4gIC8vIDItPjFcclxuICBjb250ZWluZXIuYXBwZW5kKGVsZW1lbnRvc0Rpdik7XHJcbiAgY29udGVpbmVyLmFwcGVuZChzZWFyY2hGb3JtKTtcclxuXHJcbiAgcmV0dXJuIGNvbnRlaW5lcjtcclxufTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcbiAgXCJzdHJpY3RcIjtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY2FiZWNhbGhvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYWJlY2FsaG9cIik7XHJcbiAgICBjb25zdCBtZW51TW9iaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LnN1cGVyaW9yIHVsLm5pdmVsLXVtXCIpLmlubmVySFRNTDtcclxuICAgIGNhYmVjYWxoby5wcmVwZW5kKFxyXG4gICAgICBjcmlhckhlYWRlck1vYmlsZShcclxuICAgICAgICBpY29uZVNhbmR1aWNoZSxcclxuICAgICAgICBsb2dvQ2xpZW50ZSxcclxuICAgICAgICBpY29uZUNhcnJpbmhvLFxyXG4gICAgICAgIGljb25lQnVzY2FyLFxyXG4gICAgICAgIHRleHRvU2VhcmNoQmFyXHJcbiAgICAgIClcclxuICAgICk7XHJcbiAgICBjYWJlY2FsaG8uYXBwZW5kKGNyaWFyT3ZlcmxheU1lbnUoKSk7XHJcbiAgICBjYWJlY2FsaG8uYXBwZW5kKGNyaWFyT3ZlcmxheU1lbnVEb2lzKCkpO1xyXG4gICAgY2FiZWNhbGhvLmFwcGVuZChjcmlhck92ZXJsYXlNZW51VHJlcygpKTtcclxuXHJcblxyXG4gICAgLy8gQURJQ0lPTkFSIE1FTlVTIE5BIE9WRVJMQVkgUEFSQSBPIE1PQklMRVxyXG4gICAgY29uc3QgdWxPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LW1lbnUgdWxcIik7XHJcbiAgICB1bE92ZXJsYXkuaW5uZXJIVE1MICs9IG1lbnVNb2JpbGU7XHJcbiAgICB1bE92ZXJsYXkuYXBwZW5kKGNyaWFyTWlkaWFzTW9iaWxlKGZhY2Vib29rLCB5b3V0dWJlLCBpbnN0YWdyYW0pKTtcclxuICAgIC8vIFBlZ2FyIExJcyBuaXZlbCB1bVxyXG4gICAgY29uc3QgbGlOaXZlbFVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgXCIjb3ZlcmxheS1tZW51IHVsID4gbGkuY29tLWZpbGhvXCJcclxuICAgICk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpTml2ZWxVbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsaU5pdmVsVW1baV0ub25jbGljayA9IGNhcHR1cmFyTWVudU5pdmVsRG9pcztcclxuICAgIH1cclxuICAgIGNvbnN0IGZldGNoTG9naW4gPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGJvdGFvTG9nb3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib3Rhb0xvZ291dFwiKTtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt1cmxTaXRlQ2xpZW50ZX0vY29udGEvaW5kZXhgKTtcclxuICAgICAgLy8gVHJhbnNmb3JtYSBwcmEgdGV4dG9cclxuICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAvLyBUcmFuc2Zvcm1hIHByYSBIVE1MXHJcbiAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuICAgICAgY29uc3QgaHRtbCA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcocmVzcG9uc2VUZXh0LCBcInRleHQvaHRtbFwiKTtcclxuICAgICAgLy8gUGVnYSBvcyBsaW5rcyBjb20gbyBJRFxyXG4gICAgICBsZXQgbWluaGFDb250YSA9IGh0bWwucXVlcnlTZWxlY3RvcihgLm1pbmhhLWNvbnRhYCk7XHJcbiAgICAgIG1pbmhhQ29udGFcclxuICAgICAgICA/IChib3Rhb0xvZ291dC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiKVxyXG4gICAgICAgIDogKGJvdGFvTG9nb3V0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIik7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGljb25lc1JpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pY29uLWNoZXZyb24tcmlnaHRcIik7XHJcblxyXG4gICAgaWNvbmVzUmlnaHQuZm9yRWFjaChpY29uZSA9PiBpY29uZS5jbGFzc0xpc3QucmVtb3ZlKFwiZnVuZG8tc2VjdW5kYXJpb1wiKSk7XHJcblxyXG4gICAgZmV0Y2hMb2dpbigpO1xyXG4gIH0gY2F0Y2ggKGVycm8pIHtcclxuICAgIGNvbnNvbGUubG9nKGBFcnJvIG1vYmlsZSBoZWFkZXIgZW5jb250cmFkbyAtPiAke2Vycm99YCk7XHJcbiAgfVxyXG59KTtcclxuXG4vLyBDcmlhciBGdWxsIEJhbm5lciBEZXNrdG9wXHJcbmNvbnN0IGNyaWFyRnVsbEJhbm5lckRlc2t0b3AgPSAoKSA9PiB7XHJcbiAgICAvLyBDcmlhciBmdWxsIGJhbm5lciBjb250ZWluZXIgXHJcbiAgICBjb25zdCBmdWxsQmFubmVyRGVza3RvcENvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBmdWxsQmFubmVyRGVza3RvcENvbnRlaW5lci5pZCA9IFwiZnVsbC1iYW5uZXJcIjtcclxuICAgIGZ1bGxCYW5uZXJEZXNrdG9wQ29udGVpbmVyLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXJcIik7XHJcblxyXG4gICAgLy8gQ3JpYXIgc3dpcGVyIGRlc2t0b3Agd3JhcHBlclxyXG4gICAgY29uc3QgZnVsbEJhbm5lckRlc2t0b3BXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGZ1bGxCYW5uZXJEZXNrdG9wV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXdyYXBwZXJcIik7XHJcblxyXG4gICAgLy8gQ3JpYXIgc3dpcGVyIGRlc2t0b3AgcGFnaW5hdGlvblxyXG4gICAgY29uc3QgZnVsbEJhbm5lckRlc2t0b3BQYWdpbmF0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGZ1bGxCYW5uZXJEZXNrdG9wUGFnaW5hdGlvbi5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXBhZ2luYXRpb25cIik7XHJcblxyXG4gICAgLy8gQ3JpYXIgc3dpcGVyIGJ1dHRvbiBwcmV2XHJcbiAgICBjb25zdCBmdWxsQmFubmVyRGVza3RvcEJ1dHRvblByZXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZnVsbEJhbm5lckRlc2t0b3BCdXR0b25QcmV2LmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItYnV0dG9uLXByZXZcIik7XHJcblxyXG4gICAgLy8gQ3JpYXIgc3dpcGVyIGJ1dHRvbiBuZXh0XHJcbiAgICBjb25zdCBmdWxsQmFubmVyRGVza3RvcEJ1dHRvbk5leHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZnVsbEJhbm5lckRlc2t0b3BCdXR0b25OZXh0LmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItYnV0dG9uLW5leHRcIik7XHJcblxyXG4gICAgLy8gRmF6ZXIgb3MgYXBwZW5kcyBubyBjb250ZWluZXJcclxuICAgIGZ1bGxCYW5uZXJEZXNrdG9wQ29udGVpbmVyLmFwcGVuZChmdWxsQmFubmVyRGVza3RvcFdyYXBwZXIpO1xyXG4gICAgZnVsbEJhbm5lckRlc2t0b3BDb250ZWluZXIuYXBwZW5kKGZ1bGxCYW5uZXJEZXNrdG9wUGFnaW5hdGlvbik7XHJcbiAgICBmdWxsQmFubmVyRGVza3RvcENvbnRlaW5lci5hcHBlbmQoZnVsbEJhbm5lckRlc2t0b3BCdXR0b25QcmV2KTtcclxuICAgIGZ1bGxCYW5uZXJEZXNrdG9wQ29udGVpbmVyLmFwcGVuZChmdWxsQmFubmVyRGVza3RvcEJ1dHRvbk5leHQpO1xyXG5cclxuICAgIHJldHVybiBmdWxsQmFubmVyRGVza3RvcENvbnRlaW5lcjtcclxufVxyXG5cclxuLy8gQ3JpYXIgRnVsbCBCYW5uZXIgTW9iaWxlXHJcbmNvbnN0IGNyaWFyRnVsbEJhbm5lck1vYmlsZSA9ICgpID0+IHtcclxuICAgIC8vIENyaWFyIGZ1bGwgYmFubmVyIGNvbnRlaW5lciBcclxuICAgIGNvbnN0IGZ1bGxCYW5uZXJNb2JpbGVDb250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZnVsbEJhbm5lck1vYmlsZUNvbnRlaW5lci5pZCA9IFwiZnVsbC1iYW5uZXItbW9iaWxlXCI7XHJcbiAgICBmdWxsQmFubmVyTW9iaWxlQ29udGVpbmVyLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXJcIik7XHJcblxyXG4gICAgLy8gQ3JpYXIgc3dpcGVyIE1vYmlsZSB3cmFwcGVyXHJcbiAgICBjb25zdCBmdWxsQmFubmVyTW9iaWxlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBmdWxsQmFubmVyTW9iaWxlV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXdyYXBwZXJcIik7XHJcblxyXG4gICAgLy8gQ3JpYXIgc3dpcGVyIE1vYmlsZSBwYWdpbmF0aW9uXHJcbiAgICBjb25zdCBmdWxsQmFubmVyTW9iaWxlUGFnaW5hdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBmdWxsQmFubmVyTW9iaWxlUGFnaW5hdGlvbi5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXBhZ2luYXRpb25cIik7XHJcblxyXG4gICAgLy8gQ3JpYXIgc3dpcGVyIGJ1dHRvbiBwcmV2XHJcbiAgICBjb25zdCBmdWxsQmFubmVyTW9iaWxlQnV0dG9uUHJldiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBmdWxsQmFubmVyTW9iaWxlQnV0dG9uUHJldi5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLWJ1dHRvbi1wcmV2XCIpO1xyXG5cclxuICAgIC8vIENyaWFyIHN3aXBlciBidXR0b24gbmV4dFxyXG4gICAgY29uc3QgZnVsbEJhbm5lck1vYmlsZUJ1dHRvbk5leHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZnVsbEJhbm5lck1vYmlsZUJ1dHRvbk5leHQuY2xhc3NMaXN0LmFkZChcInN3aXBlci1idXR0b24tbmV4dFwiKTtcclxuXHJcbiAgICAvLyBGYXplciBvcyBhcHBlbmRzIG5vIGNvbnRlaW5lclxyXG4gICAgZnVsbEJhbm5lck1vYmlsZUNvbnRlaW5lci5hcHBlbmQoZnVsbEJhbm5lck1vYmlsZVdyYXBwZXIpO1xyXG4gICAgZnVsbEJhbm5lck1vYmlsZUNvbnRlaW5lci5hcHBlbmQoZnVsbEJhbm5lck1vYmlsZVBhZ2luYXRpb24pO1xyXG4gICAgZnVsbEJhbm5lck1vYmlsZUNvbnRlaW5lci5hcHBlbmQoZnVsbEJhbm5lck1vYmlsZUJ1dHRvblByZXYpO1xyXG4gICAgZnVsbEJhbm5lck1vYmlsZUNvbnRlaW5lci5hcHBlbmQoZnVsbEJhbm5lck1vYmlsZUJ1dHRvbk5leHQpO1xyXG5cclxuICAgIHJldHVybiBmdWxsQmFubmVyTW9iaWxlQ29udGVpbmVyO1xyXG59XHJcblxuLy8gQ3JpYSBzdHJpcGUgYmFubmVyXHJcbmNvbnN0IGNyaWFyU3RyaXBlQmFubmVyID0gKFxyXG4gICAgW3VybEltYWdlbVVtLCBwYXJhZ3JhZm9VbSwgc3Ryb25nVW1dLFxyXG4gICAgW3VybEltYWdlbURvaXMsIHBhcmFncmFmb0RvaXMsIHN0cm9uZ0RvaXNdLFxyXG4gICAgW3VybEltYWdlbVRyZXMsIHBhcmFncmFmb1RyZXMsIHN0cm9uZ1RyZXNdLFxyXG4gICAgW3VybEltYWdlbVF1YXRybywgcGFyYWdyYWZvUXVhdHJvLCBzdHJvbmdRdWF0cm9dKSA9PiB7XHJcblxyXG4gICAgLy8gQ3JpYXIgc3RyaXBlIGNvbnRlaW5lclxyXG4gICAgY29uc3Qgc3RyaXBlQmFubmVyQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHN0cmlwZUJhbm5lckNvbnRlaW5lci5pZCA9IFwic3RyaXBlLWJhbm5lclwiO1xyXG5cclxuICAgIC8vIEFkaWNpb25hciBkaXZtb2JpbGUgMVxyXG4gICAgY29uc3QgZGl2TW9iaWxlMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBkaXZNb2JpbGUxLmlkID0gXCJkaXYtbW9iaWxlLTFcIjtcclxuICAgIC8vIENyaWFyIHByaW1laXJvIGVsZW1lbnRvIGNvbnRlaW5lclxyXG4gICAgY29uc3QgZWxlbWVudG9VbVN0cmlwZUJhbm5lckNvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAvLyBDcmlhciBpbWFnZW0gZWxlbWVudG8gdW1cclxuICAgIGNvbnN0IGltYWdlbUVsZW1lbnRvVW1TdHJpcGVCYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgaW1hZ2VtRWxlbWVudG9VbVN0cmlwZUJhbm5lci5zcmMgPSB1cmxJbWFnZW1VbTtcclxuICAgIGltYWdlbUVsZW1lbnRvVW1TdHJpcGVCYW5uZXIuYWx0ID0gYCR7cGFyYWdyYWZvVW19JHtzdHJvbmdVbX1gO1xyXG4gICAgLy8gQ3JpYXIgZGl2cyBjb250ZWluZXIgcGFyYSBvcyB0ZXh0b3NcclxuICAgIGNvbnN0IGVsZW1lbnRvVW1UZXh0b0NvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAvLyBDcmlhciBwYXJhZ3JhZm8gZWxlbWVudG8gdW1cclxuICAgIGNvbnN0IHBhcmFncmFmb0VsZW1lbnRvVW1TdHJpcGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIHBhcmFncmFmb0VsZW1lbnRvVW1TdHJpcGUuaW5uZXJIVE1MID0gcGFyYWdyYWZvVW07XHJcbiAgICAvLyBDcmlhciBzdHJvbmcgZWxlbWVudG8gdW1cclxuICAgIGNvbnN0IHN0cm9uZ0VsZW1lbnRvVW1TdHJpcGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIpO1xyXG4gICAgc3Ryb25nRWxlbWVudG9VbVN0cmlwZS5pbm5lckhUTUwgPSBzdHJvbmdVbTtcclxuICAgIGVsZW1lbnRvVW1UZXh0b0NvbnRlaW5lci5hcHBlbmQocGFyYWdyYWZvRWxlbWVudG9VbVN0cmlwZSk7XHJcbiAgICBlbGVtZW50b1VtVGV4dG9Db250ZWluZXIuYXBwZW5kKHN0cm9uZ0VsZW1lbnRvVW1TdHJpcGUpO1xyXG4gICAgLy8gQXBwZW5kcyBFbGVtZW50byBVTVxyXG4gICAgZWxlbWVudG9VbVN0cmlwZUJhbm5lckNvbnRlaW5lci5hcHBlbmQoaW1hZ2VtRWxlbWVudG9VbVN0cmlwZUJhbm5lcik7XHJcbiAgICBlbGVtZW50b1VtU3RyaXBlQmFubmVyQ29udGVpbmVyLmFwcGVuZChlbGVtZW50b1VtVGV4dG9Db250ZWluZXIpO1xyXG4gICAgZGl2TW9iaWxlMS5hcHBlbmQoZWxlbWVudG9VbVN0cmlwZUJhbm5lckNvbnRlaW5lcik7XHJcbiAgICAvKiBcclxuICAgIENyaWFyIHNlZ3VuZG8gZWxlbWVudG8gY29udGVpbmVyXHJcbiAgICAqL1xyXG4gICAgY29uc3QgZWxlbWVudG9Eb2lzU3RyaXBlQmFubmVyQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIC8vIENyaWFyIGltYWdlbSBlbGVtZW50byB1bVxyXG4gICAgY29uc3QgaW1hZ2VtRWxlbWVudG9Eb2lzU3RyaXBlQmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGltYWdlbUVsZW1lbnRvRG9pc1N0cmlwZUJhbm5lci5zcmMgPSB1cmxJbWFnZW1Eb2lzO1xyXG4gICAgaW1hZ2VtRWxlbWVudG9Eb2lzU3RyaXBlQmFubmVyLmFsdCA9IGAke3BhcmFncmFmb0RvaXN9JHtzdHJvbmdEb2lzfWA7XHJcbiAgICAvLyBDcmlhciBkaXZzIGNvbnRlaW5lciBwYXJhIG9zIHRleHRvc1xyXG4gICAgY29uc3QgZWxlbWVudG9Eb2lzVGV4dG9Db250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgLy8gQ3JpYXIgcGFyYWdyYWZvIGVsZW1lbnRvIHVtXHJcbiAgICBjb25zdCBwYXJhZ3JhZm9FbGVtZW50b0RvaXNTdHJpcGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIHBhcmFncmFmb0VsZW1lbnRvRG9pc1N0cmlwZS5pbm5lckhUTUwgPSBwYXJhZ3JhZm9Eb2lzO1xyXG4gICAgLy8gQ3JpYXIgc3Ryb25nIGVsZW1lbnRvIHVtXHJcbiAgICBjb25zdCBzdHJvbmdFbGVtZW50b0RvaXNTdHJpcGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIpO1xyXG4gICAgc3Ryb25nRWxlbWVudG9Eb2lzU3RyaXBlLmlubmVySFRNTCA9IHN0cm9uZ0RvaXM7XHJcbiAgICAvLyBBcHBlbmRzXHJcbiAgICBlbGVtZW50b0RvaXNUZXh0b0NvbnRlaW5lci5hcHBlbmQocGFyYWdyYWZvRWxlbWVudG9Eb2lzU3RyaXBlKTtcclxuICAgIGVsZW1lbnRvRG9pc1RleHRvQ29udGVpbmVyLmFwcGVuZChzdHJvbmdFbGVtZW50b0RvaXNTdHJpcGUpO1xyXG4gICAgLy8gQXBwZW5kcyBFbGVtZW50byBEb2lzXHJcbiAgICBlbGVtZW50b0RvaXNTdHJpcGVCYW5uZXJDb250ZWluZXIuYXBwZW5kKGltYWdlbUVsZW1lbnRvRG9pc1N0cmlwZUJhbm5lcik7XHJcbiAgICBlbGVtZW50b0RvaXNTdHJpcGVCYW5uZXJDb250ZWluZXIuYXBwZW5kKGVsZW1lbnRvRG9pc1RleHRvQ29udGVpbmVyKTtcclxuICAgIGRpdk1vYmlsZTEuYXBwZW5kKGVsZW1lbnRvRG9pc1N0cmlwZUJhbm5lckNvbnRlaW5lcik7XHJcblxyXG4gICAgLy8gQWRpY2lvbmFyIGRpdm1vYmlsZSAyXHJcbiAgICBjb25zdCBkaXZNb2JpbGUyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGRpdk1vYmlsZTIuaWQgPSBcImRpdi1tb2JpbGUtMlwiO1xyXG4gICAgLyogXHJcbiAgICBDcmlhciB0ZXJjZWlybyBlbGVtZW50byBjb250ZWluZXJcclxuICAgICovXHJcbiAgICBjb25zdCBlbGVtZW50b1RyZXNTdHJpcGVCYW5uZXJDb250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgLy8gQ3JpYXIgaW1hZ2VtIGVsZW1lbnRvIHVtXHJcbiAgICBjb25zdCBpbWFnZW1FbGVtZW50b1RyZXNTdHJpcGVCYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgaW1hZ2VtRWxlbWVudG9UcmVzU3RyaXBlQmFubmVyLnNyYyA9IHVybEltYWdlbVRyZXM7XHJcbiAgICBpbWFnZW1FbGVtZW50b1RyZXNTdHJpcGVCYW5uZXIuYWx0ID0gYCR7cGFyYWdyYWZvVHJlc30ke3N0cm9uZ1RyZXN9YDtcclxuICAgIC8vIENyaWFyIGRpdnMgY29udGVpbmVyIHBhcmEgb3MgdGV4dG9zXHJcbiAgICBjb25zdCBlbGVtZW50b1RyZXNUZXh0b0NvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAvLyBDcmlhciBwYXJhZ3JhZm8gZWxlbWVudG8gdW1cclxuICAgIGNvbnN0IHBhcmFncmFmb0VsZW1lbnRvVHJlc1N0cmlwZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgcGFyYWdyYWZvRWxlbWVudG9UcmVzU3RyaXBlLmlubmVySFRNTCA9IHBhcmFncmFmb1RyZXM7XHJcbiAgICAvLyBDcmlhciBzdHJvbmcgZWxlbWVudG8gdW1cclxuICAgIGNvbnN0IHN0cm9uZ0VsZW1lbnRvVHJlc1N0cmlwZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIik7XHJcbiAgICBzdHJvbmdFbGVtZW50b1RyZXNTdHJpcGUuaW5uZXJIVE1MID0gc3Ryb25nVHJlcztcclxuICAgIC8vIEFwcGVuZHNcclxuICAgIGVsZW1lbnRvVHJlc1RleHRvQ29udGVpbmVyLmFwcGVuZChwYXJhZ3JhZm9FbGVtZW50b1RyZXNTdHJpcGUpO1xyXG4gICAgZWxlbWVudG9UcmVzVGV4dG9Db250ZWluZXIuYXBwZW5kKHN0cm9uZ0VsZW1lbnRvVHJlc1N0cmlwZSk7XHJcbiAgICAvLyBBcHBlbmRzIEVsZW1lbnRvIERvaXNcclxuICAgIGVsZW1lbnRvVHJlc1N0cmlwZUJhbm5lckNvbnRlaW5lci5hcHBlbmQoaW1hZ2VtRWxlbWVudG9UcmVzU3RyaXBlQmFubmVyKTtcclxuICAgIGVsZW1lbnRvVHJlc1N0cmlwZUJhbm5lckNvbnRlaW5lci5hcHBlbmQoZWxlbWVudG9UcmVzVGV4dG9Db250ZWluZXIpO1xyXG4gICAgZGl2TW9iaWxlMi5hcHBlbmQoZWxlbWVudG9UcmVzU3RyaXBlQmFubmVyQ29udGVpbmVyKTtcclxuICAgIC8qIFxyXG4gICAgQ3JpYXIgcXVhcnRvIGVsZW1lbnRvIGNvbnRlaW5lclxyXG4gICAgKi9cclxuICAgIGNvbnN0IGVsZW1lbnRvUXVhdHJvU3RyaXBlQmFubmVyQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIC8vIENyaWFyIGltYWdlbSBlbGVtZW50byB1bVxyXG4gICAgY29uc3QgaW1hZ2VtRWxlbWVudG9RdWF0cm9TdHJpcGVCYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgaW1hZ2VtRWxlbWVudG9RdWF0cm9TdHJpcGVCYW5uZXIuc3JjID0gdXJsSW1hZ2VtUXVhdHJvO1xyXG4gICAgaW1hZ2VtRWxlbWVudG9RdWF0cm9TdHJpcGVCYW5uZXIuYWx0ID0gYCR7cGFyYWdyYWZvUXVhdHJvfSR7c3Ryb25nUXVhdHJvfWA7XHJcbiAgICAvLyBDcmlhciBkaXZzIGNvbnRlaW5lciBwYXJhIG9zIHRleHRvc1xyXG4gICAgY29uc3QgZWxlbWVudG9RdWF0cm9UZXh0b0NvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAvLyBDcmlhciBwYXJhZ3JhZm8gZWxlbWVudG8gdW1cclxuICAgIGNvbnN0IHBhcmFncmFmb0VsZW1lbnRvUXVhdHJvU3RyaXBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICBwYXJhZ3JhZm9FbGVtZW50b1F1YXRyb1N0cmlwZS5pbm5lckhUTUwgPSBwYXJhZ3JhZm9RdWF0cm87XHJcbiAgICAvLyBDcmlhciBzdHJvbmcgZWxlbWVudG8gdW1cclxuICAgIGNvbnN0IHN0cm9uZ0VsZW1lbnRvUXVhdHJvU3RyaXBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0cm9uZ1wiKTtcclxuICAgIHN0cm9uZ0VsZW1lbnRvUXVhdHJvU3RyaXBlLmlubmVySFRNTCA9IHN0cm9uZ1F1YXRybztcclxuICAgIC8vIEFwcGVuZHNcclxuICAgIGVsZW1lbnRvUXVhdHJvVGV4dG9Db250ZWluZXIuYXBwZW5kKHBhcmFncmFmb0VsZW1lbnRvUXVhdHJvU3RyaXBlKTtcclxuICAgIGVsZW1lbnRvUXVhdHJvVGV4dG9Db250ZWluZXIuYXBwZW5kKHN0cm9uZ0VsZW1lbnRvUXVhdHJvU3RyaXBlKTtcclxuICAgIC8vIEFwcGVuZHMgRWxlbWVudG8gRG9pc1xyXG4gICAgZWxlbWVudG9RdWF0cm9TdHJpcGVCYW5uZXJDb250ZWluZXIuYXBwZW5kKGltYWdlbUVsZW1lbnRvUXVhdHJvU3RyaXBlQmFubmVyKTtcclxuICAgIGVsZW1lbnRvUXVhdHJvU3RyaXBlQmFubmVyQ29udGVpbmVyLmFwcGVuZChlbGVtZW50b1F1YXRyb1RleHRvQ29udGVpbmVyKTtcclxuICAgIGRpdk1vYmlsZTIuYXBwZW5kKGVsZW1lbnRvUXVhdHJvU3RyaXBlQmFubmVyQ29udGVpbmVyKTtcclxuXHJcbiAgICAvLyBBcHBlbmQgdG9kb3Mgb3MgZWxlbWVudG9zIG5vIGNvbnRhaW5lciBwcmluY2lwYWxcclxuICAgIHN0cmlwZUJhbm5lckNvbnRlaW5lci5hcHBlbmQoZGl2TW9iaWxlMSk7XHJcbiAgICBzdHJpcGVCYW5uZXJDb250ZWluZXIuYXBwZW5kKGRpdk1vYmlsZTIpO1xyXG5cclxuICAgIHJldHVybiBzdHJpcGVCYW5uZXJDb250ZWluZXI7XHJcbn1cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XG4gIFwic3RyaWN0XCI7XG5cbiAgZnVuY3Rpb24gZmF2b3JpdGVzRnVuY3Rpb25hbGl0eSgpIHtcbiAgICBsZXQgbm9kZVByb2R1dG9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIFwiW2RhdGEtdHJ1c3R2b3gtcHJvZHVjdC1jb2RlXVwiXG4gICAgKTtcbiAgICAvLyBsZXQgbm9kZVByb2R1dG9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIik7XG5cbiAgICAvLyBJY29uIGNyZWF0aW9uXG4gICAgbGV0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIGxldCBpY29uTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuXG4gICAgLy8gVmVyaWZpY2FyIGZhdm9yaXRvcyBleGlzdGVudGVzXG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0RmF2b3JpdGVzSWQoKSB7XG4gICAgICBsZXQgZmF2b3JpdGVzSWQgPSBbXTtcbiAgICAgIC8vIFJlcXVlc3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIFwiL2NvbnRhL2Zhdm9yaXRvL2xpc3RhclwiXG4gICAgICApO1xuICAgICAgLy8gVHJhbnNmb3JtYSBwcmEgdGV4dG9cbiAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIC8vIFRyYW5zZm9ybWEgcHJhIEhUTUxcbiAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgICAgIGNvbnN0IGh0bWwgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHJlc3BvbnNlVGV4dCwgXCJ0ZXh0L2h0bWxcIik7XG4gICAgICAvLyBQZWdhIG9zIGxpbmtzIGNvbSBvIElEXG4gICAgICBsZXQgbGlua3NBcnJheSA9IGh0bWwucXVlcnlTZWxlY3RvckFsbChgYVtocmVmJD0ncmVtb3ZlciddYCk7XG4gICAgICAvLyBQZWdhIG9zIGlkcyBkb3MgbGlua3MgZSBhZGljaW9uYSBubyBhcnJheVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBocmVmID0gbGlua3NBcnJheVtpXS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xuICAgICAgICBsZXQgZmF2b3JpdGVJZCA9IGhyZWYubWF0Y2goXCJbMC05XXs5fVwiKTtcbiAgICAgICAgZmF2b3JpdGVzSWQucHVzaChmYXZvcml0ZUlkWzBdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYXZvcml0ZXNJZDtcbiAgICB9XG5cbiAgICAvLyBBZGljaW9uYXIgaWNvbmVzXG4gICAgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0SWNvbnMoKSB7XG4gICAgICBsZXQgYXJyYXlJZEZhdm9yaXRvcyA9IGF3YWl0IGdldEZhdm9yaXRlc0lkKCk7XG4gICAgICAvLyBJbnNlcmUgaWNvbmVzIGZhdm9yaXRvcyBub3MgcHJvZHV0b3NcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZVByb2R1dG9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBib3hQcm9kdXRvSWQgPSBub2RlUHJvZHV0b3NbaV0uZ2V0QXR0cmlidXRlKFxuICAgICAgICAgIFwiZGF0YS10cnVzdHZveC1wcm9kdWN0LWNvZGVcIlxuICAgICAgICApO1xuICAgICAgICBsZXQgZGl2UGFpID0gbm9kZVByb2R1dG9zW2ldLmNsb3Nlc3QoXCJhcnRpY2xlXCIpO1xuICAgICAgICBsZXQgZWxlbWVudG9JY29uID0gaWNvbkxpbmsuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICBsZXQgZWxlbWVudG9JbWFnZSA9IGljb24uY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYXJyYXlJZEZhdm9yaXRvcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGlmIChwYXJzZUludChib3hQcm9kdXRvSWQpID09PSBwYXJzZUludChhcnJheUlkRmF2b3JpdG9zW2pdKSkge1xuICAgICAgICAgICAgZWxlbWVudG9JbWFnZS5zcmMgPVxuICAgICAgICAgICAgICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8yMjU2LzIyNTYyOTYvYXJxdWl2b3MvaWNvbi1mYXZvcml0b3MtY29udGEuc3ZnXCI7XG4gICAgICAgICAgICBlbGVtZW50b0ltYWdlLmNsYXNzTmFtZSA9IFwiaWNvbmUtZmF2b3JpdG8tMlwiO1xuICAgICAgICAgICAgZWxlbWVudG9JY29uLmhyZWYgPSBgL2NvbnRhL2Zhdm9yaXRvLyR7Ym94UHJvZHV0b0lkfS9yZW1vdmVyYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50b0ltYWdlLnNyYyA9XG4gICAgICAgICAgICAgIFwiaHR0cHM6Ly9jZG4uYXdzbGkuY29tLmJyLzE1OTUvMTU5NTAwMi9hcnF1aXZvcy9JY29uLWhlYXJ0LnN2Z1wiO1xuICAgICAgICAgICAgZWxlbWVudG9JbWFnZS5jbGFzc05hbWUgPSBcImljb25lLWZhdm9yaXRvXCI7XG4gICAgICAgICAgICBlbGVtZW50b0ljb24uaHJlZiA9IGAvY29udGEvZmF2b3JpdG8vJHtib3hQcm9kdXRvSWR9L2FkaWNpb25hcmA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgd2FzIGxvZ2dlZCBvbiByZXF1ZXN0XG4gICAgICAgIGlmICghYXJyYXlJZEZhdm9yaXRvcy5sZW5ndGgpIHtcbiAgICAgICAgICBlbGVtZW50b0ltYWdlLnNyYyA9XG4gICAgICAgICAgICBcImh0dHBzOi8vY2RuLmF3c2xpLmNvbS5ici8xNTk1LzE1OTUwMDIvYXJxdWl2b3MvSWNvbi1oZWFydC5zdmdcIjtcbiAgICAgICAgICBlbGVtZW50b0ltYWdlLmNsYXNzTmFtZSA9IFwiaWNvbmUtZmF2b3JpdG9cIjtcbiAgICAgICAgICBlbGVtZW50b0ljb24uaHJlZiA9IGAvY29udGEvZmF2b3JpdG8vJHtib3hQcm9kdXRvSWR9L2FkaWNpb25hcmA7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudG9JY29uLmNsYXNzTmFtZSA9IFwiZmF2b3JpdGUtY29udGVpbmVyXCI7XG4gICAgICAgIGVsZW1lbnRvSWNvbi5hcHBlbmQoZWxlbWVudG9JbWFnZSk7XG4gICAgICAgIGRpdlBhaS5hcHBlbmQoZWxlbWVudG9JY29uKTtcbiAgICAgIH1cbiAgICAgIGljb25MaW5rLnJlbW92ZSgpO1xuICAgICAgaWNvbi5yZW1vdmUoKTtcbiAgICB9XG4gICAgLy8gRXhlY3XDp8Ojb1xuICAgIGluc2VydEljb25zKCk7XG4gIH1cbiAgZmF2b3JpdGVzRnVuY3Rpb25hbGl0eSgpO1xufSk7XG5cbmNvbnN0IGNyaWFyTW9kZWxQcm9kdWN0Qm94ID0gKHRleHRvU21hbGxQcmVjbywgdGV4dG9Cb3Rhb0NUQSkgPT4ge1xyXG4gIC8vIDEgQ1JJQVIgQVJUSUNMRVxyXG4gIGNvbnN0IGFydGljbGVQcm9kdWN0Qm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFydGljbGVcIik7XHJcbiAgYXJ0aWNsZVByb2R1Y3RCb3guY2xhc3NMaXN0LmFkZChcInByb2R1Y3QtYm94XCIpO1xyXG4gIGFydGljbGVQcm9kdWN0Qm94LmlkID0gXCJtb2RlbC1wcm9kdWN0LWJveFwiO1xyXG4gIC8vIDIgQ1JJQVIgTElOS1xyXG4gIGNvbnN0IGxpbmtQcm9kdWN0Qm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgbGlua1Byb2R1Y3RCb3guaHJlZiA9IFwiXCI7XHJcbiAgLy8gMyBDUklBUiBTUEFOIEJBTkRFSVJBUy1QUk9EVVRPXHJcbiAgY29uc3Qgc3BhbkJhbmRlaXJhc1Byb2R1dG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICBzcGFuQmFuZGVpcmFzUHJvZHV0by5jbGFzc0xpc3QuYWRkKFwiYmFuZGVpcmFzLXByb2R1dG9cIik7XHJcblxyXG4gIC8vIDMgQ1JJQVIgU1BBTiBCT09LTUFSS1NcclxuICBjb25zdCBzcGFuQm9va21hcmtzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgc3BhbkJvb2ttYXJrcy5jbGFzc0xpc3QuYWRkKFwiYm9va21hcmtzXCIpO1xyXG4gIC8vIDMgQ1JJQVIgRklHVVJFXHJcbiAgY29uc3QgZmlndXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZ3VyZVwiKTtcclxuICAvLyA0IENSSUFSIElNQUdFTSBDT1ZFUlxyXG4gIGNvbnN0IGltYWdlbUZpZ3VyZUNvdmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1GaWd1cmVDb3Zlci5zcmMgPSBcIlwiO1xyXG4gIGltYWdlbUZpZ3VyZUNvdmVyLmNsYXNzTGlzdC5hZGQoXCJjb3ZlclwiKTtcclxuICBpbWFnZW1GaWd1cmVDb3Zlci5hbHQgPSBcIlwiO1xyXG4gIC8vIDQgQ1JJQVIgSU1BR0VNIEhPVkVSXHJcbiAgY29uc3QgaW1hZ2VtRmlndXJlSG92ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGltYWdlbUZpZ3VyZUhvdmVyLnNyYyA9IFwiXCI7XHJcbiAgaW1hZ2VtRmlndXJlSG92ZXIuY2xhc3NMaXN0LmFkZChcImhvdmVyXCIpO1xyXG4gIGltYWdlbUZpZ3VyZUhvdmVyLmFsdCA9IFwiXCI7XHJcbiAgLy8gQVBQRU5EIDQgLT4gM1xyXG4gIGZpZ3VyZS5hcHBlbmQoaW1hZ2VtRmlndXJlQ292ZXIpO1xyXG4gIGZpZ3VyZS5hcHBlbmQoaW1hZ2VtRmlndXJlSG92ZXIpO1xyXG5cclxuICAvLyAyIERJViBUSVRVTE9cclxuICBjb25zdCBkaXZUaXR1bG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRpdlRpdHVsby5jbGFzc0xpc3QuYWRkKFwicHJvZHVjdC10aXRsZVwiKTtcclxuICAvLyAzIERpdiBzdGFyc1xyXG4gIGNvbnN0IGRpdlN0YXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZTdGFycy5jbGFzc0xpc3QuYWRkKFwic3RhcnNcIik7XHJcbiAgLy8gMyBoMiB0aXR1bG8gZG8gcHJvZHV0b1xyXG4gIGNvbnN0IGgyVGl0dWxvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xyXG4gIGgyVGl0dWxvLmNsYXNzTGlzdC5hZGQoXCJjb3Itc2VjdW5kYXJpYVwiKTtcclxuICBoMlRpdHVsby50ZXh0Q29udGVudCA9IFwiVMOtdHVsbyBkbyBwcm9kdXRvXCI7XHJcbiAgLy8gMyAtPiAyIEFQUEVORFNcclxuICBkaXZUaXR1bG8uYXBwZW5kKGRpdlN0YXJzKTtcclxuICBkaXZUaXR1bG8uYXBwZW5kKGgyVGl0dWxvKTtcclxuXHJcbiAgLy8gMiBQUk9EVUNUIFBSSUNFXHJcbiAgY29uc3QgcHJvZHVjdFByaWNlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBwcm9kdWN0UHJpY2VEaXYuY2xhc3NMaXN0LmFkZChcInByb2R1Y3QtcHJpY2VcIik7XHJcbiAgLy8gMyBTUEFOIENPTlRFSU5FUlxyXG4gIGNvbnN0IHNwYW5Db250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAvLyA0IHNtYWxsIHByZcOnbyBmcm9tIGRvIHByb2R1dG9cclxuICBjb25zdCBwUHJlY29Gcm9tUHJvZHV0byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIHBQcmVjb0Zyb21Qcm9kdXRvLmNsYXNzTGlzdC5hZGQoXCJwcm9kdWN0LW9yaWdpbmFsXCIpO1xyXG4gIHBQcmVjb0Zyb21Qcm9kdXRvLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAvLyA0IGgyIHByZcOnbyBkbyBwcm9kdXRvXHJcbiAgY29uc3QgaDJQcmVjb1Byb2R1dG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XHJcbiAgaDJQcmVjb1Byb2R1dG8udGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIC8vIDQgY3JpYXIgc21hbGxcclxuICBjb25zdCBzbWFsbFByZWNvUHJvZHV0byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzbWFsbFwiKTtcclxuICBzbWFsbFByZWNvUHJvZHV0by50ZXh0Q29udGVudCA9IHRleHRvU21hbGxQcmVjbztcclxuICAvLyA0IGNyaWFyIHN0cm9uZyBwcmVjbyBhIHZpc3RhXHJcbiAgY29uc3Qgc3Ryb25nUHJlY29BVmlzdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIpO1xyXG4gIHN0cm9uZ1ByZWNvQVZpc3RhLmNsYXNzTGlzdC5hZGQoXCJwcmVjby1hLXZpc3RhXCIpO1xyXG4gIC8vIEFwcGVuZHMgNCAtPiAzXHJcbiAgc3BhbkNvbnRlaW5lci5hcHBlbmQocFByZWNvRnJvbVByb2R1dG8pO1xyXG4gIHNwYW5Db250ZWluZXIuYXBwZW5kKGgyUHJlY29Qcm9kdXRvKTtcclxuICBzcGFuQ29udGVpbmVyLmFwcGVuZChzbWFsbFByZWNvUHJvZHV0byk7XHJcbiAgc3BhbkNvbnRlaW5lci5hcHBlbmQoc3Ryb25nUHJlY29BVmlzdGEpO1xyXG4gIC8vIDMgU1BBTiAyIENPTlRFSU5FUlxyXG4gIGNvbnN0IHNwYW5Db250ZWluZXIyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgLy8gc3BhbkNvbnRlaW5lcjIuY2xhc3NMaXN0LmFkZChcInNob3ctcHJvZHVjdFwiKTtcclxuICAvLyBzcGFuQ29udGVpbmVyMi5pbm5lckhUTUwgPSBcIlZlamEgbWFpc1wiO1xyXG4gIC8vIEFQUEVORFMgMyAtPiAyXHJcbiAgcHJvZHVjdFByaWNlRGl2LmFwcGVuZChzcGFuQ29udGVpbmVyKTtcclxuICAvLyBwcm9kdWN0UHJpY2VEaXYuYXBwZW5kKHNwYW5Db250ZWluZXIyKTtcclxuXHJcbiAgbGlua1Byb2R1Y3RCb3guYXBwZW5kKHNwYW5CYW5kZWlyYXNQcm9kdXRvKTtcclxuICBsaW5rUHJvZHVjdEJveC5hcHBlbmQoc3BhbkJvb2ttYXJrcyk7XHJcbiAgbGlua1Byb2R1Y3RCb3guYXBwZW5kKGZpZ3VyZSk7XHJcbiAgbGlua1Byb2R1Y3RCb3guYXBwZW5kKGRpdlRpdHVsbyk7XHJcbiAgbGlua1Byb2R1Y3RCb3guYXBwZW5kKHByb2R1Y3RQcmljZURpdik7XHJcblxyXG4gIGFydGljbGVQcm9kdWN0Qm94LmFwcGVuZChsaW5rUHJvZHVjdEJveCk7XHJcblxyXG4gIHJldHVybiBhcnRpY2xlUHJvZHVjdEJveDtcclxufTtcclxuXG5jb25zdCBjcmlhckNhcnJvc3NlbCA9ICh1cmxJbWFnZW1TZXRhKSA9PiB7XHJcbiAgICAvLyAxIENyaWFyIGRpdiBleHRlcmlvclxyXG4gICAgY29uc3QgY2Fycm9zc2VsQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGNhcnJvc3NlbENvbnRlaW5lci5pZCA9IFwicHJvZHVjdC1jYXJvdXNlbFwiO1xyXG5cclxuICAgIC8vIDIgQ3JpYXIgZGl2IGRlIGRlbnRyb1xyXG4gICAgY29uc3Qgc3dpcGVyQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHN3aXBlckNvbnRlaW5lci5jbGFzc0xpc3QuYWRkKFwiY29udGVpbmVyXCIpO1xyXG5cclxuICAgIC8vIDMgQ3JpYXIgZGl2IFN3aXBlclxyXG4gICAgY29uc3Qgc3dpcGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHN3aXBlckRpdi5jbGFzc0xpc3QuYWRkKFwic3dpcGVyXCIsIFwicHJvZHVjdC1zbGlkZXJcIik7XHJcbiAgICAvLyA0IENyaWFyIGRpdiBzd2lwZXIgd3JhcHBlclxyXG4gICAgY29uc3Qgc3dpcGVyV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBzd2lwZXJXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItd3JhcHBlclwiKTtcclxuICAgIC8vIEFwcGVuZCA0IC0+IDNcclxuICAgIHN3aXBlckRpdi5hcHBlbmQoc3dpcGVyV3JhcHBlcik7XHJcbiAgICAvLyAzIENyaWFyIHN3aXBlci1idXR0b24tcHJldlxyXG4gICAgY29uc3Qgc3dpcGVyUHJldiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBzd2lwZXJQcmV2LmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItYnV0dG9uLXByZXZcIik7XHJcbiAgICAvLyA0IENyaWFyIGltYWdlbSBhcnJvdy1sZWZ0XHJcbiAgICBjb25zdCBpbWFnZW1QcmV2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGltYWdlbVByZXYuYWx0ID0gXCJTbGlkZSBBbnRlcmlvclwiO1xyXG4gICAgaW1hZ2VtUHJldi5zcmMgPSB1cmxJbWFnZW1TZXRhO1xyXG4gICAgLy8gQXBwZW5kIDQgLT4gM1xyXG4gICAgc3dpcGVyUHJldi5hcHBlbmQoaW1hZ2VtUHJldik7XHJcbiAgICAvLyAzIENyaWFyIHN3aXBlci1idXR0b24tbmV4dFxyXG4gICAgY29uc3Qgc3dpcGVyTmV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBzd2lwZXJOZXh0LmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItYnV0dG9uLW5leHRcIik7XHJcbiAgICAvLyA0IENyaWFyIGltYWdlbSBhcnJvdy1sZWZ0XHJcbiAgICBjb25zdCBpbWFnZW1OZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGltYWdlbU5leHQuYWx0ID0gXCJQcsOzeGltbyBTbGlkZVwiO1xyXG4gICAgaW1hZ2VtTmV4dC5zcmMgPSB1cmxJbWFnZW1TZXRhO1xyXG4gICAgaW1hZ2VtTmV4dC5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZSgxODBkZWcpXCI7XHJcbiAgICAvLyBBcHBlbmQgNCAtPiAzXHJcbiAgICBzd2lwZXJOZXh0LmFwcGVuZChpbWFnZW1OZXh0KTtcclxuXHJcbiAgICAvLyBBcHBlbmRzIDMgLT4gMlxyXG4gICAgc3dpcGVyQ29udGVpbmVyLmFwcGVuZChzd2lwZXJEaXYpO1xyXG4gICAgc3dpcGVyQ29udGVpbmVyLmFwcGVuZChzd2lwZXJQcmV2KTtcclxuICAgIHN3aXBlckNvbnRlaW5lci5hcHBlbmQoc3dpcGVyTmV4dCk7XHJcblxyXG4gICAgLy8gQXBwZW5kcyAyIC0+IDFcclxuICAgIGNhcnJvc3NlbENvbnRlaW5lci5hcHBlbmQoc3dpcGVyQ29udGVpbmVyKTtcclxuXHJcbiAgICByZXR1cm4gY2Fycm9zc2VsQ29udGVpbmVyO1xyXG59XG4vLyBDUklBUiBCQU5ORVIgREVTVEFRVUVTIERFU0tUT1BcclxuY29uc3QgY3JpYXJCYW5uZXJEZXN0YXF1ZXNEZXNrdG9wID0gKFxyXG4gIHVybEVsZW1lbnRvVW0sXHJcbiAgdXJsRWxlbWVudG9Eb2lzLFxyXG4gIHVybEVsZW1lbnRvVHJlcyxcclxuICB1cmxFbGVtZW50b1F1YXRybyxcclxuICB0aXRsZUVsZW1lbnRvVW0sXHJcbiAgdGl0bGVFbGVtZW50b0RvaXMsXHJcbiAgdGl0bGVFbGVtZW50b1RyZXMsXHJcbiAgdGl0bGVFbGVtZW50b1F1YXRybyxcclxuICB0ZXh0b0J0bkVsZW1lbnRvVW0sXHJcbiAgdGV4dG9CdG5FbGVtZW50b0RvaXMsXHJcbiAgdGV4dG9CdG5FbGVtZW50b1RyZXMsXHJcbiAgdGV4dG9CdG5FbGVtZW50b1F1YXRybyxcclxuICBsaW5rQnRuRWxlbWVudG9VbSxcclxuICBsaW5rQnRuRWxlbWVudG9Eb2lzLFxyXG4gIGxpbmtCdG5FbGVtZW50b1RyZXMsXHJcbiAgbGlua0J0bkVsZW1lbnRvUXVhdHJvXHJcbikgPT4ge1xyXG4gIC8vIENSSUFSIENPTlRFSU5FUlxyXG4gIGNvbnN0IGJhbm5lckRlc3RhcXVlRGVza3RvcENvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgYmFubmVyRGVzdGFxdWVEZXNrdG9wQ29udGVpbmVyLmlkID0gXCJiYW5uZXItZGVzdGFxdWVzXCI7XHJcblxyXG4gIC8vIENSSUFSIFBSSU1FSVJPIEVMRU1FTlRPXHJcbiAgLy8gLT4gY3JpYXIgY29udGVpbmVyXHJcbiAgY29uc3QgY29udGVpbmVyVW1CYW5uZXJEZXN0YXF1ZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBjb250ZWluZXJVbUJhbm5lckRlc3RhcXVlcy5jbGFzc0xpc3QuYWRkKFwiZGVzdGFxdWVzLWJhbm5lcnNcIik7XHJcbiAgLy8gY29udGVpbmVyVW1CYW5uZXJEZXN0YXF1ZXMuaHJlZiA9IFwiL2NhdGVnb3JpYS9ib25lY2FzLWUtYWNlc3Nvcmlvcy5odG1sXCI7XHJcblxyXG4gIC8vIC0+IGNyaWFyIHRpdHVsbyBlIGJ0blxyXG4gIGNvbnN0IGRpdkJhbm5lclVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBjb25zdCB0aXRsZUJhbm5lclVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImg0XCIpO1xyXG4gIGNvbnN0IGxpbmtUZXh0b0Jhbm5lclVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcblxyXG4gIGRpdkJhbm5lclVtLmNsYXNzTGlzdC5hZGQoXCJkZXN0YXF1ZXMtYmFubmVycy10ZXh0XCIpO1xyXG4gIHRpdGxlQmFubmVyVW0uY2xhc3NMaXN0LmFkZChcImRlc3RhcXVlcy1iYW5uZXJzLXRpdGxlXCIpO1xyXG5cclxuICBpZiAodGl0bGVFbGVtZW50b1VtLmxlbmd0aCA+IDApIHtcclxuICAgIHRpdGxlQmFubmVyVW0uaW5uZXJUZXh0ID0gdGl0bGVFbGVtZW50b1VtO1xyXG4gICAgZGl2QmFubmVyVW0uYXBwZW5kKHRpdGxlQmFubmVyVW0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRleHRvQnRuRWxlbWVudG9VbS5sZW5ndGggPiAwKSB7XHJcbiAgICBsaW5rVGV4dG9CYW5uZXJVbS5jbGFzc0xpc3QuYWRkKFwiZGVzdGFxdWVzLWJhbm5lcnMtYnRuXCIpO1xyXG4gICAgbGlua1RleHRvQmFubmVyVW0uaW5uZXJUZXh0ID0gdGV4dG9CdG5FbGVtZW50b1VtO1xyXG4gICAgbGlua1RleHRvQmFubmVyVW0uaHJlZiA9IGxpbmtCdG5FbGVtZW50b1VtO1xyXG4gICAgZGl2QmFubmVyVW0uYXBwZW5kKGxpbmtUZXh0b0Jhbm5lclVtKTtcclxuICB9XHJcblxyXG4gIC8vIC0+IGNyaWFyIGltYWdlbSB1bVxyXG4gIGNvbnN0IGltYWdlbVVtQmFubmVyRGVzdGFxdWVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1VbUJhbm5lckRlc3RhcXVlcy5zcmMgPSB1cmxFbGVtZW50b1VtO1xyXG4gIC8vIC0+IGFwcGVuZCBpbWFnZW0gbm8gY29udGVpbmVyIGUgdGV4dG9cclxuICBjb250ZWluZXJVbUJhbm5lckRlc3RhcXVlcy5hcHBlbmQoaW1hZ2VtVW1CYW5uZXJEZXN0YXF1ZXMpO1xyXG4gIGNvbnRlaW5lclVtQmFubmVyRGVzdGFxdWVzLmFwcGVuZChkaXZCYW5uZXJVbSk7XHJcblxyXG4gIC8vIENSSUFSIFNFR1VORE8gRUxFTUVOVE9cclxuICAvLyAtPiBjcmlhciBjb250ZWluZXJcclxuICBjb25zdCBjb250ZWluZXJEb2lzQmFubmVyRGVzdGFxdWVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgY29udGVpbmVyRG9pc0Jhbm5lckRlc3RhcXVlcy5jbGFzc0xpc3QuYWRkKFwiZGVzdGFxdWVzLWJhbm5lcnNcIik7XHJcbiAgLy8gY29udGVpbmVyRG9pc0Jhbm5lckRlc3RhcXVlcy5ocmVmID0gXCIvY2F0ZWdvcmlhL2RlY29yYWNhby5odG1sXCI7XHJcblxyXG4gIC8vIC0+IGNyaWFyIHRpdHVsbyBlIGJ0blxyXG4gIGNvbnN0IGRpdkJhbm5lckRvaXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGNvbnN0IHRpdGxlQmFubmVyRG9pcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcclxuICBjb25zdCBsaW5rVGV4dG9CYW5uZXJEb2lzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcblxyXG4gIGRpdkJhbm5lckRvaXMuY2xhc3NMaXN0LmFkZChcImRlc3RhcXVlcy1iYW5uZXJzLXRleHRcIik7XHJcbiAgdGl0bGVCYW5uZXJEb2lzLmNsYXNzTGlzdC5hZGQoXCJkZXN0YXF1ZXMtYmFubmVycy10aXRsZVwiKTtcclxuXHJcbiAgaWYgKHRpdGxlRWxlbWVudG9Eb2lzLmxlbmd0aCA+IDApIHtcclxuICAgIHRpdGxlQmFubmVyRG9pcy5pbm5lclRleHQgPSB0aXRsZUVsZW1lbnRvRG9pcztcclxuICAgIGRpdkJhbm5lckRvaXMuYXBwZW5kKHRpdGxlQmFubmVyRG9pcyk7XHJcbiAgfVxyXG5cclxuICBpZiAodGV4dG9CdG5FbGVtZW50b0RvaXMubGVuZ3RoID4gMCkge1xyXG4gICAgbGlua1RleHRvQmFubmVyRG9pcy5jbGFzc0xpc3QuYWRkKFwiZGVzdGFxdWVzLWJhbm5lcnMtYnRuXCIpO1xyXG4gICAgbGlua1RleHRvQmFubmVyRG9pcy5pbm5lclRleHQgPSB0ZXh0b0J0bkVsZW1lbnRvRG9pcztcclxuICAgIGxpbmtUZXh0b0Jhbm5lckRvaXMuaHJlZiA9IGxpbmtCdG5FbGVtZW50b0RvaXM7XHJcbiAgICBkaXZCYW5uZXJEb2lzLmFwcGVuZChsaW5rVGV4dG9CYW5uZXJEb2lzKTtcclxuICB9XHJcblxyXG4gIC8vIC0+IGNyaWFyIGltYWdlbVxyXG4gIGNvbnN0IGltYWdlbURvaXNCYW5uZXJEZXN0YXF1ZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGltYWdlbURvaXNCYW5uZXJEZXN0YXF1ZXMuc3JjID0gdXJsRWxlbWVudG9Eb2lzO1xyXG4gIC8vIC0+IGFwcGVuZCBpbWFnZW0gbm8gY29udGVpbmVyXHJcbiAgY29udGVpbmVyRG9pc0Jhbm5lckRlc3RhcXVlcy5hcHBlbmQoaW1hZ2VtRG9pc0Jhbm5lckRlc3RhcXVlcyk7XHJcbiAgY29udGVpbmVyRG9pc0Jhbm5lckRlc3RhcXVlcy5hcHBlbmQoZGl2QmFubmVyRG9pcyk7XHJcblxyXG4gIC8vIENSSUFSIFRFUkNFSVJPIEVMRU1FTlRPXHJcbiAgLy8gLT4gY3JpYXIgY29udGVpbmVyXHJcbiAgY29uc3QgY29udGVpbmVyVHJlc0Jhbm5lckRlc3RhcXVlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gIGNvbnRlaW5lclRyZXNCYW5uZXJEZXN0YXF1ZXMuY2xhc3NMaXN0LmFkZChcImRlc3RhcXVlcy1iYW5uZXJzXCIpO1xyXG4gIC8vIGNvbnRlaW5lclRyZXNCYW5uZXJEZXN0YXF1ZXMuaHJlZiA9IFwiL2pvZ29zLWRlLXRhYnVsZWlyb1wiO1xyXG5cclxuICAvLyAtPiBjcmlhciB0aXR1bG8gZSBidG5cclxuICBjb25zdCBkaXZCYW5uZXJUcmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBjb25zdCB0aXRsZUJhbm5lclRyZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDRcIik7XHJcbiAgY29uc3QgbGlua1RleHRvQmFubmVyVHJlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG5cclxuICBkaXZCYW5uZXJUcmVzLmNsYXNzTGlzdC5hZGQoXCJkZXN0YXF1ZXMtYmFubmVycy10ZXh0XCIpO1xyXG4gIHRpdGxlQmFubmVyVHJlcy5jbGFzc0xpc3QuYWRkKFwiZGVzdGFxdWVzLWJhbm5lcnMtdGl0bGVcIik7XHJcblxyXG4gIGlmICh0aXRsZUVsZW1lbnRvVHJlcy5sZW5ndGggPiAwKSB7XHJcbiAgICB0aXRsZUJhbm5lclRyZXMuaW5uZXJUZXh0ID0gdGl0bGVFbGVtZW50b1RyZXM7XHJcbiAgICBkaXZCYW5uZXJUcmVzLmFwcGVuZCh0aXRsZUJhbm5lclRyZXMpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRleHRvQnRuRWxlbWVudG9UcmVzLmxlbmd0aCA+IDApIHtcclxuICAgIGxpbmtUZXh0b0Jhbm5lclRyZXMuY2xhc3NMaXN0LmFkZChcImRlc3RhcXVlcy1iYW5uZXJzLWJ0blwiKTtcclxuICAgIGxpbmtUZXh0b0Jhbm5lclRyZXMuaW5uZXJUZXh0ID0gdGV4dG9CdG5FbGVtZW50b1RyZXM7XHJcbiAgICBsaW5rVGV4dG9CYW5uZXJUcmVzLmhyZWYgPSBsaW5rQnRuRWxlbWVudG9UcmVzO1xyXG4gICAgZGl2QmFubmVyVHJlcy5hcHBlbmQobGlua1RleHRvQmFubmVyVHJlcyk7XHJcbiAgfVxyXG5cclxuICAvLyAtPiBjcmlhciBpbWFnZW1cclxuICBjb25zdCBpbWFnZW1UcmVzQmFubmVyRGVzdGFxdWVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1UcmVzQmFubmVyRGVzdGFxdWVzLnNyYyA9IHVybEVsZW1lbnRvVHJlcztcclxuICAvLyAtPiBhcHBlbmQgaW1hZ2VtIG5vIGNvbnRlaW5lclxyXG4gIGNvbnRlaW5lclRyZXNCYW5uZXJEZXN0YXF1ZXMuYXBwZW5kKGltYWdlbVRyZXNCYW5uZXJEZXN0YXF1ZXMpO1xyXG4gIGNvbnRlaW5lclRyZXNCYW5uZXJEZXN0YXF1ZXMuYXBwZW5kKGRpdkJhbm5lclRyZXMpO1xyXG5cclxuICAvLyBDUklBUiBRVUFSVE8gRUxFTUVOVE9cclxuICAvLyAtPiBjcmlhciBjb250ZWluZXJcclxuICBjb25zdCBjb250ZWluZXJRdWF0cm9CYW5uZXJEZXN0YXF1ZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBjb250ZWluZXJRdWF0cm9CYW5uZXJEZXN0YXF1ZXMuY2xhc3NMaXN0LmFkZChcImRlc3RhcXVlcy1iYW5uZXJzXCIpO1xyXG4gIC8vIGNvbnRlaW5lclF1YXRyb0Jhbm5lckRlc3RhcXVlcy5ocmVmID0gXCIvYXJ0ZS1wYXBlbGFyaWEtZS1hcm1hcmluaG9cIjtcclxuXHJcbiAgLy8gLT4gY3JpYXIgdGl0dWxvIGUgYnRuXHJcbiAgY29uc3QgZGl2QmFubmVyUXVhdHJvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBjb25zdCB0aXRsZUJhbm5lclF1YXRybyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcclxuICBjb25zdCBsaW5rVGV4dG9CYW5uZXJRdWF0cm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuXHJcbiAgZGl2QmFubmVyUXVhdHJvLmNsYXNzTGlzdC5hZGQoXCJkZXN0YXF1ZXMtYmFubmVycy10ZXh0XCIpO1xyXG4gIHRpdGxlQmFubmVyUXVhdHJvLmNsYXNzTGlzdC5hZGQoXCJkZXN0YXF1ZXMtYmFubmVycy10aXRsZVwiKTtcclxuXHJcbiAgaWYgKHRpdGxlRWxlbWVudG9RdWF0cm8ubGVuZ3RoID4gMCkge1xyXG4gICAgdGl0bGVCYW5uZXJRdWF0cm8uaW5uZXJUZXh0ID0gdGl0bGVFbGVtZW50b1F1YXRybztcclxuICAgIGRpdkJhbm5lclF1YXRyby5hcHBlbmQodGl0bGVCYW5uZXJRdWF0cm8pO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRleHRvQnRuRWxlbWVudG9RdWF0cm8ubGVuZ3RoID4gMCkge1xyXG4gICAgbGlua1RleHRvQmFubmVyUXVhdHJvLmNsYXNzTGlzdC5hZGQoXCJkZXN0YXF1ZXMtYmFubmVycy1idG5cIik7XHJcbiAgICBsaW5rVGV4dG9CYW5uZXJRdWF0cm8uaW5uZXJUZXh0ID0gdGV4dG9CdG5FbGVtZW50b1F1YXRybztcclxuICAgIGxpbmtUZXh0b0Jhbm5lclF1YXRyby5ocmVmID0gbGlua0J0bkVsZW1lbnRvUXVhdHJvO1xyXG4gICAgZGl2QmFubmVyUXVhdHJvLmFwcGVuZChsaW5rVGV4dG9CYW5uZXJRdWF0cm8pO1xyXG4gIH1cclxuXHJcbiAgLy8gLT4gY3JpYXIgaW1hZ2VtXHJcbiAgY29uc3QgaW1hZ2VtUXVhdHJvQmFubmVyRGVzdGFxdWVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZW1RdWF0cm9CYW5uZXJEZXN0YXF1ZXMuc3JjID0gdXJsRWxlbWVudG9RdWF0cm87XHJcbiAgLy8gLT4gYXBwZW5kIGltYWdlbSBubyBjb250ZWluZXJcclxuICBjb250ZWluZXJRdWF0cm9CYW5uZXJEZXN0YXF1ZXMuYXBwZW5kKGltYWdlbVF1YXRyb0Jhbm5lckRlc3RhcXVlcyk7XHJcbiAgY29udGVpbmVyUXVhdHJvQmFubmVyRGVzdGFxdWVzLmFwcGVuZChkaXZCYW5uZXJRdWF0cm8pO1xyXG5cclxuICAvLyBBcHBlbmQgZ2VlcmFsIG5vIGNvbnRlaW5lclxyXG4gIGJhbm5lckRlc3RhcXVlRGVza3RvcENvbnRlaW5lci5hcHBlbmQoY29udGVpbmVyVW1CYW5uZXJEZXN0YXF1ZXMpO1xyXG4gIGJhbm5lckRlc3RhcXVlRGVza3RvcENvbnRlaW5lci5hcHBlbmQoY29udGVpbmVyRG9pc0Jhbm5lckRlc3RhcXVlcyk7XHJcbiAgYmFubmVyRGVzdGFxdWVEZXNrdG9wQ29udGVpbmVyLmFwcGVuZChjb250ZWluZXJUcmVzQmFubmVyRGVzdGFxdWVzKTtcclxuICBiYW5uZXJEZXN0YXF1ZURlc2t0b3BDb250ZWluZXIuYXBwZW5kKGNvbnRlaW5lclF1YXRyb0Jhbm5lckRlc3RhcXVlcyk7XHJcblxyXG4gIHJldHVybiBiYW5uZXJEZXN0YXF1ZURlc2t0b3BDb250ZWluZXI7XHJcbn07XHJcblxuLy8gQ1JJQVIgU0VDQU8gU0FJQkEgTUFJU1xyXG5jb25zdCBjcmlhclNlY2FvU2FpYmFNYWlzID0gKHRleHRvSDIsIHRleHRvUGFyYWdyYWZvLCB0ZXh0b0JvdGFvLCB1cmxJbWFnZW0pID0+IHtcclxuICAgIC8vIENSSUFSIENPTlRFSU5FUlxyXG4gICAgY29uc3Qgc2VjYW9TYWliYU1haXNDb250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgc2VjYW9TYWliYU1haXNDb250ZWluZXIuaWQgPSBcInNlY2FvLXNhaWJhLW1haXNcIjtcclxuXHJcbiAgICAvLyBDUklBUiBDT05URUlORVIgSU5GT1xyXG4gICAgY29uc3Qgc2VjYW9TYWliYU1haXNJbmZvQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIC8vIENSSUFSIEgyXHJcbiAgICBjb25zdCBzZWNhb1NhaWJhTWFpc0luZm9IMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcclxuICAgIHNlY2FvU2FpYmFNYWlzSW5mb0gyLmlubmVySFRNTCA9IHRleHRvSDI7XHJcbiAgICAvLyBDUklBUiBQQVJBR1JBRk9cclxuICAgIGNvbnN0IHNlY2FvU2FpYmFNYWlzSW5mb1BhcmFncmFmbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgc2VjYW9TYWliYU1haXNJbmZvUGFyYWdyYWZvLmlubmVySFRNTCA9IHRleHRvUGFyYWdyYWZvO1xyXG4gICAgLy8gQ1JJQVIgQk9UQU9cclxuICAgIGNvbnN0IGxpbmtCb3RhbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xyXG4gICAgbGlua0JvdGFvLmhyZWYgPSBcIi9wYWdpbmEvcXVlbS1zb21vcy5odG1sXCI7XHJcbiAgICBjb25zdCBzZWNhb1NhaWJhTWFpc0luZm9Cb3RhbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBzZWNhb1NhaWJhTWFpc0luZm9Cb3Rhby5pbm5lckhUTUwgPSB0ZXh0b0JvdGFvO1xyXG4gICAgbGlua0JvdGFvLmFwcGVuZChzZWNhb1NhaWJhTWFpc0luZm9Cb3Rhbyk7XHJcbiAgICAvLyBBUFBFTkRTIENPTlRFSU5FUiBJTkZPXHJcbiAgICBzZWNhb1NhaWJhTWFpc0luZm9Db250ZWluZXIuYXBwZW5kKHNlY2FvU2FpYmFNYWlzSW5mb0gyKTtcclxuICAgIHNlY2FvU2FpYmFNYWlzSW5mb0NvbnRlaW5lci5hcHBlbmQoc2VjYW9TYWliYU1haXNJbmZvUGFyYWdyYWZvKTtcclxuICAgIHNlY2FvU2FpYmFNYWlzSW5mb0NvbnRlaW5lci5hcHBlbmQobGlua0JvdGFvKTtcclxuXHJcbiAgICAvLyBDUklBUiBESVYgMiBETyBDT05URUlORVIgTUFJT1JcclxuICAgIGNvbnN0IHNlY2FvU2FpYmFNYWlzSW1hZ2VtQ29udGVpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIC8vIENSSUFSIElNQUdFTVxyXG4gICAgY29uc3Qgc2VjYW9TYWliYU1haXNJbWFnZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgc2VjYW9TYWliYU1haXNJbWFnZW0uYWx0ID0gXCJpbWFnZW0gc2FpYmEgbWFpc1wiO1xyXG4gICAgc2VjYW9TYWliYU1haXNJbWFnZW0uc3JjID0gdXJsSW1hZ2VtO1xyXG4gICAgLy8gQVBQRU5EIElNQUdFTVxyXG4gICAgc2VjYW9TYWliYU1haXNJbWFnZW1Db250ZWluZXIuYXBwZW5kKHNlY2FvU2FpYmFNYWlzSW1hZ2VtKTtcclxuXHJcbiAgICAvLyBBUFBFTkRTIE5PIENPTlRFSU5FUiBNQUlPUlxyXG4gICAgc2VjYW9TYWliYU1haXNDb250ZWluZXIuYXBwZW5kKHNlY2FvU2FpYmFNYWlzSW5mb0NvbnRlaW5lcik7XHJcbiAgICBzZWNhb1NhaWJhTWFpc0NvbnRlaW5lci5hcHBlbmQoc2VjYW9TYWliYU1haXNJbWFnZW1Db250ZWluZXIpO1xyXG5cclxuXHJcbiAgICByZXR1cm4gc2VjYW9TYWliYU1haXNDb250ZWluZXI7XHJcbn1cclxuXHJcblxuY29uc3QgY3JpYXJCYW5uZXJEZXN0YXF1ZUluZmVyaW9yID0gKFxyXG4gIHVybEltYWdlbUJhbm5lckRlc3RhcXVlLFxyXG4gIHRleHRvTWVub3IsXHJcbiAgdGV4dG9NYWlvcixcclxuICB0ZXh0b0JvdGFvLFxyXG4gIGxpbmtcclxuKSA9PiB7XHJcbiAgLy8gMSBDUklBUiBDT05URUlORVJcclxuICBjb25zdCBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgLy8gYmFubmVyRGVzdGFxdWVJbmZlcmlvckNvbnRhaW5lci5ocmVmID0gJy9vZmVydGFzJ1xyXG4gIGJhbm5lckRlc3RhcXVlSW5mZXJpb3JDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImJhbm5lci1kZXN0YXF1ZS1pbmZlcmlvclwiKTtcclxuICAvLyAyIENSSUFSIElNQUdFTVxyXG4gIGNvbnN0IGltYWdlbUJhbm5lckRlc3RhcXVlSW5mZXJpb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gIGltYWdlbUJhbm5lckRlc3RhcXVlSW5mZXJpb3IuY2xhc3NMaXN0LmFkZChcImltYWdlbS1kZXN0YXF1ZS1pbmZlcmlvclwiKTtcclxuICBpbWFnZW1CYW5uZXJEZXN0YXF1ZUluZmVyaW9yLnNyYyA9IHVybEltYWdlbUJhbm5lckRlc3RhcXVlO1xyXG4gIGltYWdlbUJhbm5lckRlc3RhcXVlSW5mZXJpb3IuYWx0ID0gXCJiYW5uZXIgZGVzdGFxdWUgaW5mZXJpb3JcIjtcclxuICBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yQ29udGFpbmVyLmhyZWYgPSBsaW5rO1xyXG5cclxuICAvLyAyIENSSUFSIERJViBQQVJBIFRFWFRPXHJcbiAgY29uc3QgZGl2VGV4dG9zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZUZXh0b3MuY2xhc3NMaXN0LmFkZChcImRpdi1iYW5uZXItaW5mZXJpb3JcIik7XHJcblxyXG4gIC8vIC8vIDMgQ1JJQVIgUEFSQUdSQUZPXHJcbiAgY29uc3QgcGFyYWdyYWZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgcGFyYWdyYWZvLmNsYXNzTGlzdC5hZGQoXCJwYXJhZ3JhZm8tYmFubmVyLWluZmVyaW9yXCIpO1xyXG4gIHBhcmFncmFmby5pbm5lckhUTUwgPSB0ZXh0b01lbm9yO1xyXG5cclxuICAvLyAvLyAzIENSSUFSIFNUUk9OR1xyXG4gIGNvbnN0IHN0cm9uZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIik7XHJcbiAgc3Ryb25nLmNsYXNzTGlzdC5hZGQoXCJzdHJvbmctYmFubmVyLWluZmVyaW9yXCIpO1xyXG4gIHN0cm9uZy5pbm5lckhUTUwgPSB0ZXh0b01haW9yO1xyXG5cclxuICAvLyAvLyBBUFBFTkRTIDMtPjJcclxuICBkaXZUZXh0b3MuYXBwZW5kKHBhcmFncmFmbyk7XHJcbiAgZGl2VGV4dG9zLmFwcGVuZChzdHJvbmcpO1xyXG5cclxuICAvLyAvLyAyIENSSUFSIEJPVEFPXHJcbiAgY29uc3QgYm90YW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBib3Rhby5jbGFzc0xpc3QuYWRkKFwiYm90YW8tYmFubmVyLWluZmVyaW9yXCIpO1xyXG4gIGJvdGFvLnRleHRDb250ZW50ID0gdGV4dG9Cb3RhbztcclxuICBib3Rhby5ocmVmID0gbGluaztcclxuICBkaXZUZXh0b3MuYXBwZW5kKGJvdGFvKTtcclxuXHJcbiAgLy8gQVBQRU5EIDItPjFcclxuICBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yQ29udGFpbmVyLmFwcGVuZChpbWFnZW1CYW5uZXJEZXN0YXF1ZUluZmVyaW9yKTtcclxuICBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yQ29udGFpbmVyLmFwcGVuZChkaXZUZXh0b3MpO1xyXG4gIC8vIGJhbm5lckRlc3RhcXVlSW5mZXJpb3JDb250YWluZXIuYXBwZW5kKGJvdGFvKTtcclxuXHJcbiAgcmV0dXJuIGJhbm5lckRlc3RhcXVlSW5mZXJpb3JDb250YWluZXI7XHJcbn07XHJcblxuLy8gY29uc3QgY3JpYXJCYW5uZXJEZXN0YXF1ZUNhdGVnb3JpYSA9ICh1cmxJbWFnZW1CYW5uZXJEZXN0YXF1ZSkgPT4ge1xuLy8gICAvLyAxIENSSUFSIENPTlRFSU5FUlxuLy8gICBjb25zdCBiYW5uZXJEZXN0YXF1ZUluZmVyaW9yQ29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4vLyAgIGJhbm5lckRlc3RhcXVlSW5mZXJpb3JDb250LmNsYXNzTGlzdC5hZGQoXCJiYW5uZXItZGVzdGFxdWUtaW5mZXJpb3JcIik7XG4vLyAgIC8vIDIgQ1JJQVIgSU1BR0VNXG4vLyAgIGNvbnN0IGltYWdlbUJhbm5lckRlc3RhcXVlSW5mID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbi8vICAgaW1hZ2VtQmFubmVyRGVzdGFxdWVJbmYuY2xhc3NMaXN0LmFkZChcImltYWdlbS1kZXN0YXF1ZS1pbmZlcmlvclwiKTtcbi8vICAgaW1hZ2VtQmFubmVyRGVzdGFxdWVJbmYuc3JjID0gdXJsSW1hZ2VtQmFubmVyRGVzdGFxdWU7XG4vLyAgIGltYWdlbUJhbm5lckRlc3RhcXVlSW5mLmFsdCA9IFwiYmFubmVyIGRlc3RhcXVlIGluZmVyaW9yIGNhXCI7XG5cbi8vICAgLy8gLy8gMiBDUklBUiBESVYgUEFSQSBURVhUT1xuLy8gICAvLyBjb25zdCBkaXZUZXh0b3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gICAvLyBkaXZUZXh0b3MuY2xhc3NMaXN0LmFkZChcImRpdi1iYW5uZXItaW5mZXJpb3JcIik7XG4vLyAgIC8vIC8vIDMgQ1JJQVIgUEFSQUdSQUZPXG4vLyAgIC8vIGNvbnN0IHBhcmFncmFmbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuLy8gICAvLyBwYXJhZ3JhZm8uY2xhc3NMaXN0LmFkZChcInBhcmFncmFmby1iYW5uZXItaW5mZXJpb3JcIik7XG4vLyAgIC8vIHBhcmFncmFmby5pbm5lckhUTUwgPSB0ZXh0b01lbm9yO1xuLy8gICAvLyAvLyAzIENSSUFSIFNUUk9OR1xuLy8gICAvLyBjb25zdCBzdHJvbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIpO1xuLy8gICAvLyBzdHJvbmcuY2xhc3NMaXN0LmFkZChcInN0cm9uZy1iYW5uZXItaW5mZXJpb3JcIik7XG4vLyAgIC8vIHN0cm9uZy5pbm5lckhUTUwgPSB0ZXh0b01haW9yO1xuLy8gICAvLyBBUFBFTkRTIDMtPjJcblxuLy8gICAvLyBkaXZUZXh0b3MuYXBwZW5kKHBhcmFncmFmbyk7XG4vLyAgIC8vIGRpdlRleHRvcy5hcHBlbmQoc3Ryb25nKTtcbi8vICAgLy8gMiBDUklBUiBCT1RBT1xuXG4vLyAgIC8vIGNvbnN0IGJvdGFvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbi8vICAgLy8gYm90YW8uY2xhc3NMaXN0LmFkZChcImJvdGFvLWJhbm5lci1pbmZlcmlvclwiKTtcbi8vICAgLy8gYm90YW8udGV4dENvbnRlbnQgPSB0ZXh0b0JvdGFvO1xuXG4vLyAgIC8vIEFQUEVORCAyLT4xXG4vLyAgIGJhbm5lckRlc3RhcXVlSW5mZXJpb3JDb250LmFwcGVuZChpbWFnZW1CYW5uZXJEZXN0YXF1ZUluZik7XG5cbi8vICAgcmV0dXJuIGJhbm5lckRlc3RhcXVlSW5mZXJpb3JDb250O1xuLy8gfTtcblxuLy8gY29uc3QgY29udGFpbmVySW1hZ2VtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcbi8vICAgXCIucGFnaW5hLWNhdGVnb3JpYSAjbGlzdGFnZW1Qcm9kdXRvc1wiXG4vLyApO1xuXG4vLyBjb250YWluZXJJbWFnZW0uYWZ0ZXIoY3JpYXJCYW5uZXJEZXN0YXF1ZUluZmVyaW9yKGJhbm5lckRlc3RhcXVlSW5mZXJpb3IpKTtcblxuY29uc3QgY3JpYXJNb2RhbEZhbGVDb25vc2NvID0gKCkgPT4ge1xyXG4gICAgLy8gMSBjb250ZWluZXJcclxuICAgIGNvbnN0IGNvbnRlaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBjb250ZWluZXIuaWQgPSBcImZhbGUtY29ub3Njby1kaXZcIjtcclxuICAgIC8vIDIgZm9ybSBjb250ZWluZXJcclxuICAgIGNvbnN0IGZvcm1Db250ZWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZm9ybUNvbnRlaW5lci5pZCA9IFwiZm9ybS1jb250ZWluZXJcIjtcclxuICAgIC8vIDMgaDIgZmFsZSBjb25vc2NvXHJcbiAgICBjb25zdCBoMkZhbGVDb25vc2NvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xyXG4gICAgaDJGYWxlQ29ub3Njby5pbm5lckhUTUwgPSBcIkZhbGUgQ29ub3Njb1wiO1xyXG4gICAgY29uc3Qgc3VidGl0dWxvRmFsZUNvbm9zY28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIHN1YnRpdHVsb0ZhbGVDb25vc2NvLnRleHRDb250ZW50ID0gXCJQb3IgZmF2b3IsIHByZWVuY2hhIG9zIGRhZG9zIGFiYWl4by5cIlxyXG4gICAgLy8gMyBsYWJlbCBub21lXHJcbiAgICBjb25zdCBsYWJlbE5vbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIGxhYmVsTm9tZS50ZXh0Q29udGVudCA9IFwiTm9tZVwiO1xyXG4gICAgLy8gMyBpbnB1dCBub21lXHJcbiAgICBjb25zdCBpbnB1dE5vbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbn1cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XG4gIGNvbnN0IGZvb3RlclogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvb3RlclwiKTtcbiAgY29uc3Qgd2hhdHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgd2hhdHMuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSdodHRwczovL2Nkbi5hd3NsaS5jb20uYnIvMjI4OS8yMjg5MDQxL2FycXVpdm9zL0ljb24uc3ZnJyBhbHQgPVwid2hhdHNcIiAvPmA7XG5cbiAgLy8gY29uc3QgYm94V2hhdHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyBib3hXaGF0cy5jbGFzc0xpc3QuYWRkKFwiYm94LXdoYXRzXCIpO1xuXG4gIC8vIGJveFdoYXRzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwiY29udGVudC13aGF0c1wiPlxuICAvLyAgICAgPHVsPlxuICAvLyAgICAgICAgIDxsaT5cbiAgLy8gICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vYXBpLndoYXRzYXBwLmNvbS9zZW5kP3Bob25lPTU1MTE0NzU3MDExMVwiIHRhcmdldD1cIl9ibGFua1wiPlxuICAvLyAgICAgICAgICAgICAgIFNBQ1xuICAvLyAgICAgICAgICAgICA8L2E+XG4gIC8vICAgICAgICAgPC9saT5cbiAgLy8gICAgICAgICA8bGk+XG4gIC8vICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT01NTExOTE3ODk5MjA0XCIgdGFyZ2V0PVwiX2JsYW5rXCI+XG4gIC8vICAgICAgICAgICAgICAgQ29tZXJjaWFsXG4gIC8vICAgICAgICAgICAgIDwvYT5cbiAgLy8gICAgICAgICA8L2xpPlxuICAvLyAgICAgICAgIDwvdWw+XG4gIC8vICAgICA8L2Rpdj5gO1xuXG4gIC8vIGJveFdoYXRzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAvLyB3aGF0cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAvLyAgIGlmIChib3hXaGF0cy5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIikge1xuICAvLyAgICAgYm94V2hhdHMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgLy8gICB9IGVsc2Uge1xuICAvLyAgICAgYm94V2hhdHMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAvLyAgIH1cbiAgLy8gfSk7XG5cbiAgd2hhdHMuaHJlZiA9IFwiaHR0cHM6Ly9hcGkud2hhdHNhcHAuY29tL3NlbmQ/cGhvbmU9NTUxMTkxNzg5OTUxNVwiO1xuICB3aGF0cy5pZCA9IFwid2hhdHNcIjtcbiAgd2hhdHMudGFyZ2V0ID0gXCJfYmxhbmtcIjtcbiAgZm9vdGVyWi5hcHBlbmQod2hhdHMpO1xuICB3aGF0cy5hZnRlcihib3hXaGF0cyk7XG59KTtcbiJdLCJmaWxlIjoic2NyaXB0cy5taW4uanMifQ==
